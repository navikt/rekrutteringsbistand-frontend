/*
  Storybook Dark Mode Overrides (Aksel tokens, ingen !important)
  Mål: Kun style Storybook UI-elementer, aldri generelle HTML-tags som kan blø ned i stories.
*/

html.dark {
  /* Lokale alias for Storybook */
  --sb-bg: var(--ax-bg-sunken);
  --sb-surface: var(--ax-bg-default);
  --sb-surface-subtle: var(--ax-surface-subtle);
  --sb-border: var(--ax-border-neutral-subtle);
  --sb-border-strong: var(--ax-border-neutral-strong);
  --sb-text: var(--ax-text-default);
  --sb-text-muted: var(--ax-text-neutral);
  --sb-action: var(--ax-text-action);
  --sb-success: var(--ax-text-success);
  --sb-warning: var(--ax-text-warning);
  --sb-danger: var(--ax-text-danger);
  --sb-code-bg: var(--ax-bg-default);
  --sb-pill-bg: var(--ax-surface-subtle);
}

/* Grunnflate - kun Storybook UI containers */
html.dark body.sb-show-main,
html.dark .sb-show-main {
  background: var(--sb-bg);
  color: var(--sb-text);
}

html.dark #storybook-docs .sbdocs-wrapper {
  background: var(--sb-bg);
}

/* Storybook docs headings - MÅ ha sbdocs prefix */
html.dark .sbdocs-title,
html.dark .sbdocs-subtitle,
html.dark .sbdocs-h1,
html.dark .sbdocs-h2,
html.dark .sbdocs-h3 {
  color: var(--sb-text);
}

/* Storybook docs paragraphs - MÅ ha sbdocs prefix */
html.dark .sbdocs-p {
  color: var(--sb-text);
}

/* Storybook lenker - kun de med sbdocs prefix */
html.dark .sbdocs-a {
  color: var(--sb-action);
}
html.dark .sbdocs-a:hover {
  text-decoration: underline;
}

/* Tabeller og ArgTypes - kun docblock prefix */
html.dark .docblock-argstable,
html.dark .docblock-argstable tbody tr,
html.dark .docblock-argstable tbody td,
html.dark .docblock-argstable th {
  background: var(--sb-bg);
  color: var(--sb-text);
  border-color: var(--sb-border);
}

html.dark .docblock-argstable td:empty {
  background: transparent;
}

/* Inline code/pills i argstable */
html.dark .docblock-argstable td code,
html.dark .docblock-argstable td .sbdocs code,
html.dark .docblock-argstable td span[class*='TypeSummary'],
html.dark .docblock-argstable td span[class*='DocBlock-TypeSummary'],
html.dark .docblock-argstable td span[class*='Pill'] {
  background: var(--sb-pill-bg);
  color: var(--sb-text-muted);
  border: 1px solid var(--sb-border-strong);
  border-radius: 4px;
  padding: 2px 6px;
  font-size: 12px;
  line-height: 1.2;
  box-shadow: none;
}

html.dark .docblock-argstable td .required {
  color: var(--sb-danger);
}

/* Knapper i argstable */
html.dark .docblock-argstable button {
  background: var(--sb-pill-bg);
  color: var(--sb-text);
  border: 1px solid var(--sb-border-strong);
}
html.dark .docblock-argstable button:hover {
  background: var(--sb-surface-subtle);
}

/* Tooltip */
html.dark .sb-tooltip {
  background: var(--sb-pill-bg);
  color: var(--sb-text);
  border: 1px solid var(--sb-border-strong);
}

/* Paneler / tabpanel */
html.dark [data-panel='true'],
html.dark div[role='tabpanel'] {
  background: var(--sb-bg);
  color: var(--sb-text);
}

/* Code blocks - kun i sbdocs context */
html.dark .sbdocs-pre,
html.dark .sbdocs-code,
html.dark #storybook-docs .sbdocs-wrapper pre,
html.dark #storybook-docs .sbdocs-wrapper code {
  background: var(--sb-code-bg);
  color: var(--sb-text-muted);
  border: 1px solid var(--sb-border);
}

/* Syntax highlight (enkel token mapping) */
html.dark .sbdocs-pre code .token.comment {
  color: var(--sb-text-muted);
  opacity: 0.7;
}
html.dark .sbdocs-pre code .token.keyword {
  color: var(--sb-action);
}
html.dark .sbdocs-pre code .token.string {
  color: var(--sb-success);
}
html.dark .sbdocs-pre code .token.number {
  color: var(--sb-warning);
}

/* Storybook Controls panel - inputs/selects/buttons */
html.dark .sbdocs-controls input,
html.dark .sbdocs-controls select,
html.dark .sbdocs-controls textarea,
html.dark .sbdocs-controls button,
html.dark .docblock-argstable input,
html.dark .docblock-argstable select,
html.dark .docblock-argstable textarea {
  background: var(--sb-code-bg);
  color: var(--sb-text);
  border: 1px solid var(--sb-border-strong);
}

html.dark .sbdocs-controls input:focus,
html.dark .sbdocs-controls select:focus,
html.dark .sbdocs-controls textarea:focus,
html.dark .sbdocs-controls button:focus {
  outline: 1px solid var(--sb-action);
  outline-offset: 0;
}

/* Preview container & header */
html.dark .sbdocs-preview {
  background: var(--sb-bg);
  border: 1px solid var(--sb-border);
  border-radius: 6px;
}
html.dark .sbdocs-preview .sbdocs-previewHeader {
  background: var(--sb-surface-subtle);
  border-bottom: 1px solid var(--sb-border);
}
html.dark .sbdocs-preview .docs-story {
  background: var(--sb-surface);
}
html.dark .sbdocs-preview [role='toolbar'] {
  background: var(--sb-bg);
  border-color: var(--sb-border);
  box-shadow: none;
}
html.dark .sbdocs-preview [role='toolbar'] button {
  background: var(--sb-pill-bg);
  border: 1px solid var(--sb-border-strong);
  color: var(--sb-text-muted);
}
html.dark .sbdocs-preview [role='toolbar'] button:hover {
  background: var(--sb-surface-subtle);
}

/* Scrollbar (webkit) - kun i Storybook UI contexts */
html.dark .sb-show-main::-webkit-scrollbar-track,
html.dark #storybook-docs::-webkit-scrollbar-track {
  background: var(--sb-bg);
}
html.dark .sb-show-main::-webkit-scrollbar-thumb,
html.dark #storybook-docs::-webkit-scrollbar-thumb {
  background: var(--sb-border);
  border-radius: 4px;
}
html.dark .sb-show-main::-webkit-scrollbar-thumb:hover,
html.dark #storybook-docs::-webkit-scrollbar-thumb:hover {
  background: var(--sb-border-strong);
}

/* Top toolbar */
html.dark .sb-bar {
  background: var(--sb-bg);
}
html.dark .sb-bar button {
  background: var(--sb-surface);
}
