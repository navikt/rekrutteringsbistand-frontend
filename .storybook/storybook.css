/*
  Storybook Dark Mode Overrides (Aksel tokens, ingen !important)
  Mål: Bruke design tokens og minimere spesifisitet.
*/

html.dark {
  /* Lokale alias for Storybook */
  --sb-bg: var(--ax-bg-sunken);
  --sb-surface: var(--ax-bg-default);
  --sb-surface-subtle: var(--ax-surface-subtle);
  --sb-border: var(--ax-border-neutral-subtle);
  --sb-border-strong: var(--ax-border-neutral-strong);
  --sb-text: var(--ax-text-default);
  --sb-text-muted: var(--ax-text-neutral);
  --sb-action: var(--ax-text-action);
  --sb-success: var(--ax-text-success);
  --sb-warning: var(--ax-text-warning);
  --sb-danger: var(--ax-text-danger);
  --sb-code-bg: var(--ax-bg-default);
  --sb-pill-bg: var(--ax-surface-subtle);
}

/* Grunnflate */
html.dark body.sb-show-main,
html.dark .sb-show-main,
html.dark #storybook-docs .sbdocs-wrapper {
  background: var(--sb-bg);
  color: var(--sb-text);
}

/* Typografi inne i docs */
html.dark #storybook-docs .sbdocs-wrapper h1,
html.dark #storybook-docs .sbdocs-wrapper h2,
html.dark #storybook-docs .sbdocs-wrapper h3,
html.dark #storybook-docs .sbdocs-wrapper h4,
html.dark #storybook-docs .sbdocs-wrapper h5,
html.dark #storybook-docs .sbdocs-wrapper p,
html.dark #storybook-docs .sbdocs-wrapper td,
html.dark #storybook-docs .sbdocs-wrapper th,
html.dark #storybook-docs .sbdocs-wrapper li,
html.dark #storybook-docs .sbdocs-wrapper span,
html.dark #storybook-docs .sbdocs-wrapper label {
  color: var(--sb-text);
}

/* Lenker */
html.dark #storybook-docs .sbdocs-wrapper a {
  color: var(--sb-action);
}
html.dark #storybook-docs .sbdocs-wrapper a:hover {
  text-decoration: underline;
}

/* Tabeller og ArgTypes */
html.dark .docblock-argstable,
html.dark .docblock-argstable tbody tr,
html.dark .docblock-argstable tbody td,
html.dark .docblock-argstable th,
html.dark #storybook-docs table,
html.dark #storybook-docs table td,
html.dark #storybook-docs table th {
  background: var(--sb-bg);
  color: var(--sb-text);
  border-color: var(--sb-border);
}

html.dark .docblock-argstable td:empty {
  background: transparent;
}

/* Inline code/pills */
html.dark .docblock-argstable td code,
html.dark .docblock-argstable td .sbdocs code,
html.dark .docblock-argstable td span[class*='TypeSummary'],
html.dark .docblock-argstable td span[class*='DocBlock-TypeSummary'],
html.dark .docblock-argstable td span[class*='Pill'] {
  background: var(--sb-pill-bg);
  color: var(--sb-text-muted);
  border: 1px solid var(--sb-border-strong);
  border-radius: 4px;
  padding: 2px 6px;
  font-size: 12px;
  line-height: 1.2;
  box-shadow: none;
}

html.dark .docblock-argstable td .required {
  color: var(--sb-danger);
}

/* Knapper i argstable */
html.dark .docblock-argstable button {
  background: var(--sb-pill-bg);
  color: var(--sb-text);
  border: 1px solid var(--sb-border-strong);
}
html.dark .docblock-argstable button:hover {
  background: var(--sb-surface-subtle);
}

/* Tooltip */
html.dark .sb-tooltip {
  background: var(--sb-pill-bg);
  color: var(--sb-text);
  border: 1px solid var(--sb-border-strong);
}

/* Paneler / tabpanel */
html.dark [data-panel='true'],
html.dark div[role='tabpanel'] {
  background: var(--sb-bg);
  color: var(--sb-text);
}

/* Code blocks */
html.dark pre,
html.dark code,
html.dark #storybook-docs pre,
html.dark #storybook-docs code {
  background: var(--sb-code-bg);
  color: var(--sb-text-muted);
  border: 1px solid var(--sb-border);
}

/* Syntax highlight (enkel token mapping) */
html.dark pre code .token.comment {
  color: var(--sb-text-muted);
  opacity: 0.7;
}
html.dark pre code .token.keyword {
  color: var(--sb-action);
}
html.dark pre code .token.string {
  color: var(--sb-success);
}
html.dark pre code .token.number {
  color: var(--sb-warning);
}

/* Inputs */
html.dark input,
html.dark select,
html.dark textarea,
html.dark button {
  background: var(--sb-code-bg);
  color: var(--sb-text);
  border: 1px solid var(--sb-border-strong);
}
html.dark input:focus,
html.dark select:focus,
html.dark textarea:focus,
html.dark button:focus {
  outline: 1px solid var(--sb-action);
  outline-offset: 0;
}

/* Preview container & header */
html.dark .sbdocs-preview {
  background: var(--sb-bg);
  border: 1px solid var(--sb-border);
  border-radius: 6px;
}
html.dark .sbdocs-preview .sbdocs-previewHeader {
  background: var(--sb-surface-subtle);
  border-bottom: 1px solid var(--sb-border);
}
html.dark .sbdocs-preview .docs-story {
  background: var(--sb-surface);
}
html.dark .sbdocs-preview [role='toolbar'] {
  background: var(--sb-bg);
  border-color: var(--sb-border);
  box-shadow: none;
}
html.dark .sbdocs-preview [role='toolbar'] button {
  background: var(--sb-pill-bg);
  border: 1px solid var(--sb-border-strong);
  color: var(--sb-text-muted);
}
html.dark .sbdocs-preview [role='toolbar'] button:hover {
  background: var(--sb-surface-subtle);
}

/* Scrollbar (webkit) */
html.dark ::-webkit-scrollbar-track {
  background: var(--sb-bg);
}
html.dark ::-webkit-scrollbar-thumb {
  background: var(--sb-border);
  border-radius: 4px;
}
html.dark ::-webkit-scrollbar-thumb:hover {
  background: var(--sb-border-strong);
}

/* Fjernet generell border på .docs-story for å ikke påvirke selve story-innholdet */

/* Små inline spans (fallback) */
html.dark .docblock-argstable td > span:not(:empty) {
  color: var(--sb-text-muted);
}

/* Opphev outlines */
html.dark .docblock-argstable td > span {
  outline: none;
}

/* Transparent top toolbar */
html.dark .sb-bar {
  background: var(--sb-bg);
}
html.dark .sb-bar button {
  background: var(--sb-surface);
}
