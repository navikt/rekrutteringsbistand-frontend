# Test info

- Name: Legg til kandidat knapp  >> Ikke tilgang til kandidat
- Location: /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/stilling/vis-stilling/legg-til-kandidat.spec.ts:36:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByText('Tilgangen ble avvist fordi brukeren har adressebeskyttelse')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByText('Tilgangen ble avvist fordi brukeren har adressebeskyttelse')

    at /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/stilling/vis-stilling/legg-til-kandidat.spec.ts:50:7
```

# Page snapshot

```yaml
- alert
- button "Open Next.js Dev Tools":
  - img
- button "Open issues overlay": 2 Issue
- button "Collapse issues badge":
  - img
- button "Rekrutteringsbistand":
  - img
  - text: Rekrutteringsbistand
- button "Opprett":
  - img
  - text: Opprett
- link "Oversikt":
  - /url: /
  - button "Oversikt":
    - img
    - text: Oversikt
- link "Stillinger":
  - /url: /stilling?brukStandardsok=true
  - button "Stillinger":
    - img
    - text: Stillinger
- link "Kandidater":
  - /url: /kandidat
  - button "Kandidater":
    - img
    - text: Kandidater
- link "Etterregistrering":
  - /url: /etterregistrering
  - button "Etterregistrering":
    - img
    - text: Etterregistrering
- strong: Playwright Test
- text: "Bruker: TestIdent Rolle: Arbeidsgiverrettet"
- link "Nyheter":
  - /url: /nyheter
  - button "Nyheter"
- button "Gi tilbakemelding":
  - img
  - text: Gi tilbakemelding
- button "Mørk modus":
  - img
  - text: Mørk modus
- button "Nav kontor NAV FYA1":
  - img "Nav kontor"
  - text: NAV FYA1
  - img
- button "Modia":
  - img
  - text: Modia
- link "Til gammel løsning":
  - /url: https://rekrutteringsbistand.intern.dev.nav.no/
  - button "Til gammel løsning":
    - img
    - text: Til gammel løsning
- text: FE
- paragraph: Fornavn Etternavn
- button "Toggle Sidebar"
- main:
  - navigation "breadcrumb":
    - list:
      - listitem:
        - link "Stilling":
          - /url: /stilling
      - listitem: / MinStilling
  - heading "International Paradigm Developer" [level=2]
  - text: Min stilling Intern
  - img
  - text: Lunde-Jørgensen
  - img
  - text: Registrert av Sara Johansen
  - link "https://vis-stilling.intern.dev.nav.no/arbeid/stilling/minStilling":
    - /url: https://vis-stilling.intern.dev.nav.no/arbeid/stilling/minStilling
  - button "Kopier":
    - img "Kopier"
  - paragraph: Kandidater
  - paragraph: "10"
  - paragraph: Aktuelle
  - paragraph: "3"
  - paragraph: Presentert
  - paragraph: "2"
  - paragraph: Ansatt
  - paragraph: 4 av 6
  - tablist:
    - tab "Om stillingen" [selected]
    - tab "Kandidater (10)"
    - button "Finn kandidater":
      - img
      - text: Finn kandidater
    - button "Legg til kandidater"
    - dialog "Legg til kandidater til International Paradigm Developer":
      - heading "Legg til kandidater til International Paradigm Developer" [level=1]
      - heading "Søk etter fødselsnummer" [level=1]
      - text: Fødselsnummer på kandidat
      - textbox "Fødselsnummer på kandidat": "26040282334"
      - img "Feil"
      - paragraph: Finner ikke person knyttet til fødselsnummer
      - button "Legg til kandidater" [disabled]
      - button "Avbryt"
  - tabpanel "Om stillingen":
    - heading "Om stillingen" [level=1]
    - img
    - text: Torgmoen 3, 0159 Fagermark
    - img
    - text: Vikariat - Heltid
    - img
    - text: Ukedager - Dagtid
    - img
    - text: Søknadsfrist 31. mai 2025
    - img
    - text: Oppstart 31. mai 2025
    - paragraph: Depereo peccatus inflammatio vester versus crur. Atavus antepono appono dicta acer vinum tres accendo atqui conatus. Tolero conitor vilicus non. Tutamen ventosus degero in theologus circumvenio depraedor patruus accendo optio. Timor comburo vapulus nesciunt auctus tertius. Adnuo curia spoliatio versus a voluptatibus cotidie. Pecco tricesimus necessitatibus quisquam circumvenio ocer tandem una temeritas sublime. Commodi speciosus defendo creber cunctatio cuius cometes quasi curtus. Spiritus avarus curso coniecto thema utrum venio somnus centum casus.
    - separator
    - heading "Om Andersen AS" [level=1]
    - text: Sortitus celo aeger corpus quod bellum tardus aeger. Thymum aut repudiandae esse vesper. Aedificium tabesco ter venustas vicissitudo.
    - term: Organisasjonsnummer
    - definition: "312113341"
    - term: Sektor
    - definition: Offentlig
    - heading "Kontaktperson" [level=1]
    - paragraph: Ida Aas, Chief Intranet Agent
    - link "Hedda_Andreassen@gmail.com":
      - /url: mailto:Hedda_Andreassen@gmail.com
    - paragraph: Tlf 14 6 40 56 5
    - separator
    - heading "Om annonsen" [level=1]
    - term: Annonsenummer
    - definition: "478996"
    - term: Hentet fra
    - definition: DIR
    - term: Referanse
    - definition: 88OoaVlKJS
    - term: Kategori
    - definition: STILLING
    - term: Publisert
    - definition: 02.02.26
    - term: Siste visning
    - definition: 20.03.26
    - term: Sist endret
    - definition: 18.06.25
    - term: Kontaktperson hos Nav
    - definition: Sara Johansen (TestIdent)
    - complementary:
      - button "Skriv ut":
        - img
        - text: Skriv ut
      - button "Rediger":
        - img
        - text: Rediger
      - button "Dupliser":
        - img
        - text: Dupliser
      - button "Avpubliser":
        - img
        - text: Avpubliser
      - button "Ferdigstill" [disabled]:
        - img
        - text: Ferdigstill
- separator
```

# Test source

```ts
   1 | import test, { expect } from '@playwright/test';
   2 |
   3 | test.use({ storageState: 'tests/.auth/arbeigsgiverrettet.json' });
   4 |
   5 | test.describe(`Legg til kandidat knapp `, () => {
   6 |   test('Legg til kandidat', async ({ page }) => {
   7 |     await page.goto('http://localhost:1337/stilling/minStilling');
   8 |     await page.getByRole('button', { name: 'Legg til kandidater' }).click();
   9 |     await page
  10 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  11 |       .click();
  12 |     await page
  13 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  14 |       .fill('16828397900');
  15 |     await expect(
  16 |       page
  17 |         .getByTestId('velg-kandidat-resultat')
  18 |         .getByRole('button', { name: 'Legg til' }),
  19 |     ).toBeVisible();
  20 |   });
  21 |
  22 |   test('Usynlig kandidat', async ({ page }) => {
  23 |     await page.goto('http://localhost:1337/stilling/minStilling');
  24 |     await page.getByRole('button', { name: 'Legg til kandidater' }).click();
  25 |     await page
  26 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  27 |       .click();
  28 |     await page
  29 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  30 |       .fill('30081879652');
  31 |     await expect(
  32 |       page.getByRole('button', { name: 'Se hvorfor kandidaten ikke er' }),
  33 |     ).toBeVisible();
  34 |   });
  35 |
  36 |   test('Ikke tilgang til kandidat', async ({ page }) => {
  37 |     await page.goto('http://localhost:1337/stilling/minStilling');
  38 |     await page.getByRole('button', { name: 'Legg til kandidater' }).click();
  39 |     await page
  40 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  41 |       .click();
  42 |     await page
  43 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  44 |       .fill('26040282334');
  45 |     await page.getByRole('dialog', { name: 'Legg til kandidater til' }).click();
  46 |     await expect(
  47 |       page.getByText(
  48 |         'Tilgangen ble avvist fordi brukeren har adressebeskyttelse',
  49 |       ),
> 50 |     ).toBeVisible();
     |       ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  51 |   });
  52 |
  53 |   test('Finner ikke kandidat', async ({ page }) => {
  54 |     await page.goto('http://localhost:1337/stilling/minStilling');
  55 |     await page.getByRole('button', { name: 'Legg til kandidater' }).click();
  56 |     await page
  57 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  58 |       .click();
  59 |     await page
  60 |       .getByRole('textbox', { name: 'Fødselsnummer på kandidat' })
  61 |       .fill('22034609946');
  62 |     await expect(page.getByText('Finner ikke person knyttet')).toBeVisible();
  63 |   });
  64 | });
  65 |
```