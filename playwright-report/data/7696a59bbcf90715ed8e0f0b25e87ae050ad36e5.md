# Test info

- Name: Tilgangskontroll for Jobbsøkerrettet >> 3. Stilling
- Location: /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/tilgangskontroll/tilgangskontroll.tester.ts:104:9

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByTestId('stilling-side')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByTestId('stilling-side')
    - waiting for" http://localhost:1337/stilling/ca3ae2e5-b482-4776-ac7b-c5ebe67ea83f" navigation to finish...
    - navigated to "http://localhost:1337/stilling/ca3ae2e5-b482-4776-ac7b-c5ebe67ea83f"

    at /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/tilgangskontroll/tilgangskontroll.tester.ts:108:55
```

# Page snapshot

```yaml
- alert
- button "Open Next.js Dev Tools":
  - img
- button "Rekrutteringsbistand":
  - img
  - text: Rekrutteringsbistand
- button "Opprett":
  - img
  - text: Opprett
- link "Oversikt":
  - /url: /
  - button "Oversikt":
    - img
    - text: Oversikt
- link "Stillinger":
  - /url: /stilling?brukStandardsok=true
  - button "Stillinger":
    - img
    - text: Stillinger
- link "Kandidater":
  - /url: /kandidat
  - button "Kandidater":
    - img
    - text: Kandidater
- link "Etterregistrering":
  - /url: /etterregistrering
  - button "Etterregistrering":
    - img
    - text: Etterregistrering
- strong: Playwright Test
- text: "Bruker: TestIdent Rolle: Jobbsøkerrettet"
- link "Nyheter":
  - /url: /nyheter
  - button "Nyheter"
- button "Gi tilbakemelding":
  - img
  - text: Gi tilbakemelding
- button "Mørk modus":
  - img
  - text: Mørk modus
- button "Nav kontor NAV FYA1":
  - img "Nav kontor"
  - text: NAV FYA1
  - img
- button "Modia":
  - img
  - text: Modia
- link "Til gammel løsning":
  - /url: https://rekrutteringsbistand.intern.dev.nav.no/
  - button "Til gammel løsning":
    - img
    - text: Til gammel løsning
- text: FE
- paragraph: Fornavn Etternavn
- button "Toggle Sidebar"
- main:
  - navigation "breadcrumb":
    - list:
      - listitem:
        - link "Stilling":
          - /url: /stilling
      - listitem: / Ca3ae2e5-b482-4776-ac7b-c5ebe67ea83f
  - heading "District Markets Analyst" [level=2]
  - text: Intern
  - img
  - text: Danielsen, Pedersen og Ødegård
  - img
  - text: Registrert av Dr. Karoline Haukelidsæter
  - link "https://vis-stilling.intern.dev.nav.no/arbeid/stilling/ca3ae2e5-b482-4776-ac7b-c5ebe67ea83f":
    - /url: https://vis-stilling.intern.dev.nav.no/arbeid/stilling/ca3ae2e5-b482-4776-ac7b-c5ebe67ea83f
  - button "Kopier":
    - img "Kopier"
  - paragraph: Kandidater
  - paragraph: "10"
  - paragraph: Aktuelle
  - paragraph: "-"
  - paragraph: Presentert
  - paragraph: "-"
  - paragraph: Ansatt
  - paragraph: 0 av 9
  - tablist:
    - tab "Om stillingen" [selected]
    - button "Finn kandidater":
      - img
      - text: Finn kandidater
    - button "Legg til kandidater"
  - tabpanel "Om stillingen":
    - heading "Om stillingen" [level=1]
    - img
    - text: Elinesgate 8, 1600 Smesjøen
    - img
    - text: Vikariat - Heltid
    - img
    - text: Ukedager - Natt
    - img
    - text: Søknadsfrist 31. mai 2025
    - img
    - text: Oppstart 31. mai 2025
    - paragraph: Ter tactus cum speciosus subiungo tot conscendo error. Casus hic cogito similique. Amo templum decipio. Annus contabesco vesica tubineus volutabrum autus contego similique charisma adipiscor. Audeo testimonium crastinus compello soleo quibusdam color. Culpa teneo adinventitias verbera sint defessus acerbitas bellicus. Vestrum peccatus laudantium cupio tubineus nobis tam. Amplus vox adduco brevis. Capto cena iure pel pectus temptatio.
    - separator
    - heading "Om Thoresen-Svendsen" [level=1]
    - text: Creta talus vorax bene nesciunt suppellex appello torqueo tabula. Turpis tandem talio sapiente rerum tribuo trucido brevis. Attero trado addo adeo accusantium similique exercitationem acsi.
    - term: Organisasjonsnummer
    - definition: "312113341"
    - term: Sektor
    - definition: Offentlig
    - heading "Kontaktperson" [level=1]
    - paragraph: Thea Skoglund Jr., Lead Accounts Director
    - link "Daniel.Nygard@gmail.com":
      - /url: mailto:Daniel.Nygard@gmail.com
    - paragraph: Tlf 13 40 60 76
    - separator
    - heading "Om annonsen" [level=1]
    - term: Annonsenummer
    - definition: "109807"
    - term: Hentet fra
    - definition: DIR
    - term: Referanse
    - definition: MkzaQgKyTx
    - term: Kategori
    - definition: STILLING
    - term: Publisert
    - definition: 28.06.25
    - term: Siste visning
    - definition: 18.07.25
    - term: Sist endret
    - definition: 18.06.25
    - term: Kontaktperson hos Nav
    - definition: Dr. Karoline Haukelidsæter (Z536282)
    - complementary:
      - button "Skriv ut":
        - img
        - text: Skriv ut
- separator
```

# Test source

```ts
   8 |     rolle === Roller.AD_GRUPPE_REKRUTTERINGSBISTAND_JOBBSOKERRETTET;
   9 |   const MODIA = rolle === Roller.AD_GRUPPE_MODIA_GENERELL_TILGANG;
   10 |
   11 |   const rolleNavn = (rolle: Roller): string => {
   12 |     switch (rolle) {
   13 |       case Roller.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET:
   14 |         return 'Arbeidsgiverrettet';
   15 |       case Roller.AD_GRUPPE_REKRUTTERINGSBISTAND_JOBBSOKERRETTET:
   16 |         return 'Jobbsøkerrettet';
   17 |       case Roller.AD_GRUPPE_MODIA_GENERELL_TILGANG:
   18 |         return 'Modia';
   19 |       default:
   20 |         return 'UKJENT ROLLE!';
   21 |     }
   22 |   };
   23 |
   24 |   test.describe(`Tilgangskontroll for ${rolleNavn(rolle)}`, () => {
   25 |     test.beforeEach(async ({ page }) => {
   26 |       await page.goto('http://localhost:1337/');
   27 |     });
   28 |
   29 |     test('1. Forside', async ({ page }) => {
   30 |       // Ser oversikt fanen
   31 |       await expect(
   32 |         page.getByRole('button', { name: 'Oversikt' }),
   33 |       ).toBeVisible();
   34 |
   35 |       // Utfallsstatistikk
   36 |       const utfallsstatistikk = page.getByTestId('forside-utfallsstatistikk');
   37 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
   38 |         await expect(utfallsstatistikk).toBeVisible();
   39 |       }
   40 |
   41 |       // Forespørsler statistikk
   42 |       const forespørslerStatistikk = page.getByTestId(
   43 |         'forside-forespørsel-statistikk',
   44 |       );
   45 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
   46 |         await expect(forespørslerStatistikk).toBeVisible();
   47 |       }
   48 |     });
   49 |
   50 |     test('2. Stillingssøk', async ({ page }) => {
   51 |       await page.getByRole('button', { name: 'Stillinger' }).click();
   52 |
   53 |       await page.waitForURL('**/stilling**');
   54 |
   55 |       // Alle stillinger fane
   56 |       const alleStillingerFane = page.getByRole('radio', {
   57 |         name: 'Alle stillinger',
   58 |       });
   59 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
   60 |         await expect(alleStillingerFane).toBeVisible();
   61 |       }
   62 |
   63 |       // Mine stillinger fane
   64 |       const mineStillingerFane = page.getByRole('radio', {
   65 |         name: 'Mine stillinger',
   66 |       });
   67 |       if (ARBEIDSGIVERRETTET) {
   68 |         await expect(mineStillingerFane).toBeVisible();
   69 |       }
   70 |       if (JOBBSOKERRETTET || MODIA) {
   71 |         await expect(mineStillingerFane).toBeHidden();
   72 |       }
   73 |
   74 |       // Filtre
   75 |       await page.goto(
   76 |         'http://localhost:1337/stilling?publisert=intern&statuser=publisert%2Cutl%C3%B8pt%2Cstoppet&fylker=33&kommuner=3301',
   77 |       );
   78 |
   79 |       if (ARBEIDSGIVERRETTET) {
   80 |         await expect(page.getByText('Status')).toBeVisible();
   81 |       }
   82 |       if (JOBBSOKERRETTET || MODIA) {
   83 |         await expect(page.getByText('Status')).toBeHidden();
   84 |       }
   85 |
   86 |       await expect(page.getByText('Område')).toBeVisible();
   87 |       await expect(page.getByText('Inkludering')).toBeVisible();
   88 |       await expect(page.getByText('Kategori')).toBeVisible();
   89 |       await expect(page.getByText('Synlighet')).toBeVisible();
   90 |       await expect(
   91 |         page.getByRole('button', { name: 'Alle filtre' }),
   92 |       ).toBeVisible();
   93 |       await page.getByRole('button', { name: 'Alle filtre' }).click();
   94 |       await expect(page.getByRole('heading', { name: 'Filter' })).toBeVisible();
   95 |       await page
   96 |         .locator('.data-\\[state\\=open\\]\\:animate-in')
   97 |         .first()
   98 |         .click();
   99 |       await page.getByRole('button', { name: 'Alle filtre' }).click();
  100 |       await expect(page.getByRole('heading', { name: 'Filter' })).toBeVisible();
  101 |       await page.getByRole('button', { name: 'Close' }).click();
  102 |     });
  103 |
  104 |     test('3. Stilling', async ({ page }) => {
  105 |       await page.goto('http://localhost:1337/stilling/internStilling');
  106 |
  107 |       // Viser stilling side
> 108 |       await expect(page.getByTestId('stilling-side')).toBeVisible();
      |                                                       ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  109 |
  110 |       // Viser finn kandidater knapp
  111 |       const finnKandidaterKnapp = page.getByRole('button', {
  112 |         name: 'Finn kandidater',
  113 |       });
  114 |
  115 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  116 |         await expect(finnKandidaterKnapp).toBeVisible();
  117 |       }
  118 |       if (MODIA) {
  119 |         await expect(finnKandidaterKnapp).toBeHidden();
  120 |       }
  121 |
  122 |       // Viser legg til kandidate knapp
  123 |       const leggTilKandidatKnapp = page.getByRole('button', {
  124 |         name: 'Legg til kandidat',
  125 |       });
  126 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  127 |         await expect(leggTilKandidatKnapp).toBeVisible();
  128 |       }
  129 |       if (MODIA) {
  130 |         await expect(leggTilKandidatKnapp).toBeHidden();
  131 |       }
  132 |
  133 |       // Viser om stillingen
  134 |       const omStillingFane = page.getByRole('tab', { name: 'Om stillingen' });
  135 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
  136 |         await expect(omStillingFane).toBeVisible();
  137 |       }
  138 |     });
  139 |
  140 |     test('3.1 Min Stilling', async ({ page }) => {
  141 |       await page.goto('http://localhost:1337/stilling/minStilling');
  142 |
  143 |       const redigerKnapp = page.getByRole('button', { name: 'Rediger' });
  144 |       const dupliserKnapp = page.getByRole('button', { name: 'Dupliser' });
  145 |       const avpubliserKnapp = page.getByRole('button', { name: 'Avpubliser' });
  146 |       const ferdigstillKnapp = page.getByRole('button', {
  147 |         name: 'Ferdigstill',
  148 |       });
  149 |
  150 |       if (ARBEIDSGIVERRETTET) {
  151 |         await expect(redigerKnapp).toBeVisible();
  152 |         await expect(dupliserKnapp).toBeVisible();
  153 |         await expect(avpubliserKnapp).toBeVisible();
  154 |         await expect(ferdigstillKnapp).toBeVisible(); // updated to check for the new button
  155 |       } else {
  156 |         await expect(redigerKnapp).toBeHidden();
  157 |         await expect(dupliserKnapp).toBeHidden();
  158 |         await expect(avpubliserKnapp).toBeHidden();
  159 |         await expect(ferdigstillKnapp).toBeHidden();
  160 |       }
  161 |
  162 |       if (ARBEIDSGIVERRETTET) {
  163 |         await expect(
  164 |           page.getByRole('tab', { name: 'Kandidater (10)' }),
  165 |         ).toBeVisible();
  166 |       }
  167 |     });
  168 |
  169 |     test('4. Kandidatsøk', async ({ page }) => {
  170 |       await page.goto('http://localhost:1337/kandidat');
  171 |
  172 |       // Viser kandidatsøk fane
  173 |       const kandidatSøkTab = page.getByRole('button', { name: 'Kandidater' });
  174 |
  175 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  176 |         await expect(kandidatSøkTab).toBeVisible();
  177 |       }
  178 |
  179 |       if (MODIA) {
  180 |         await expect(kandidatSøkTab).toBeHidden();
  181 |
  182 |         await expect(
  183 |           page.getByRole('heading', { name: 'Ikke tilgang' }),
  184 |         ).toBeVisible();
  185 |       }
  186 |
  187 |       // Mine brukere fane
  188 |       const mineBrukereTab = page.getByRole('radio', { name: 'Mine brukere' });
  189 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  190 |         await expect(mineBrukereTab).toBeVisible();
  191 |       }
  192 |       if (MODIA) {
  193 |         await expect(mineBrukereTab).toBeHidden();
  194 |       }
  195 |
  196 |       // Mitt kontor fane
  197 |       const mittKontorTab = page.getByRole('radio', { name: 'Mitt kontor' });
  198 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  199 |         await expect(mittKontorTab).toBeVisible();
  200 |       }
  201 |       if (MODIA) {
  202 |         await expect(mittKontorTab).toBeHidden();
  203 |       }
  204 |
  205 |       // Mine kontor fane
  206 |       const mineKontorTab = page.getByRole('radio', { name: 'Mine kontor' });
  207 |
  208 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
```