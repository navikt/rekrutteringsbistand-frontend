# Test info

- Name: Tilgangskontroll for Jobbsøkerrettet >> 5. Kandidat
- Location: /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/tilgangskontroll/tilgangskontroll.tester.ts:236:9

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByRole('tab', { name: 'Oversikt' })
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByRole('tab', { name: 'Oversikt' })

    at /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/tilgangskontroll/tilgangskontroll.tester.ts:243:36
```

# Page snapshot

```yaml
- alert
- button "Open Next.js Dev Tools":
  - img
- button "Open issues overlay": 4 Issue
- button "Collapse issues badge":
  - img
- button "Rekrutteringsbistand":
  - img
  - text: Rekrutteringsbistand
- button "Opprett":
  - img
  - text: Opprett
- link "Oversikt":
  - /url: /
  - button "Oversikt":
    - img
    - text: Oversikt
- link "Stillinger":
  - /url: /stilling?brukStandardsok=true
  - button "Stillinger":
    - img
    - text: Stillinger
- link "Kandidater":
  - /url: /kandidat
  - button "Kandidater":
    - img
    - text: Kandidater
- link "Etterregistrering":
  - /url: /etterregistrering
  - button "Etterregistrering":
    - img
    - text: Etterregistrering
- strong: Playwright Test
- text: "Bruker: TestIdent Rolle: Jobbsøkerrettet"
- link "Nyheter":
  - /url: /nyheter
  - button "Nyheter"
- button "Gi tilbakemelding":
  - img
  - text: Gi tilbakemelding
- button "Mørk modus":
  - img
  - text: Mørk modus
- button "Nav kontor NAV FYA1":
  - img "Nav kontor"
  - text: NAV FYA1
  - img
- button "Modia":
  - img
  - text: Modia
- link "Til gammel løsning":
  - /url: https://rekrutteringsbistand.intern.dev.nav.no/
  - button "Til gammel løsning":
    - img
    - text: Til gammel løsning
- text: FE
- paragraph: Fornavn Etternavn
- button "Toggle Sidebar"
- button "Tilbake"
- heading "Ojsann!" [level=2]
- img "Feil"
- paragraph: Noe gikk galt!
- term: "Feilkode for rapportering av feil:"
- definition:
  - text: nqlevcjkfr
  - button "Kopier":
    - img "Kopier"
- paragraph: "useStillingsContext må være i scope: StillingsContextProvider"
- button "Vis detaljert feilmelding"
```

# Test source

```ts
  143 |       const redigerKnapp = page.getByRole('button', { name: 'Rediger' });
  144 |       const dupliserKnapp = page.getByRole('button', { name: 'Dupliser' });
  145 |       const avpubliserKnapp = page.getByRole('button', { name: 'Avpubliser' });
  146 |       const ferdigstillKnapp = page.getByRole('button', {
  147 |         name: 'Ferdigstill',
  148 |       });
  149 |
  150 |       if (ARBEIDSGIVERRETTET) {
  151 |         await expect(redigerKnapp).toBeVisible();
  152 |         await expect(dupliserKnapp).toBeVisible();
  153 |         await expect(avpubliserKnapp).toBeVisible();
  154 |         await expect(ferdigstillKnapp).toBeVisible(); // updated to check for the new button
  155 |       } else {
  156 |         await expect(redigerKnapp).toBeHidden();
  157 |         await expect(dupliserKnapp).toBeHidden();
  158 |         await expect(avpubliserKnapp).toBeHidden();
  159 |         await expect(ferdigstillKnapp).toBeHidden();
  160 |       }
  161 |
  162 |       if (ARBEIDSGIVERRETTET) {
  163 |         await expect(
  164 |           page.getByRole('tab', { name: 'Kandidater (10)' }),
  165 |         ).toBeVisible();
  166 |       }
  167 |     });
  168 |
  169 |     test('4. Kandidatsøk', async ({ page }) => {
  170 |       await page.goto('http://localhost:1337/kandidat');
  171 |
  172 |       // Viser kandidatsøk fane
  173 |       const kandidatSøkTab = page.getByRole('button', { name: 'Kandidater' });
  174 |
  175 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  176 |         await expect(kandidatSøkTab).toBeVisible();
  177 |       }
  178 |
  179 |       if (MODIA) {
  180 |         await expect(kandidatSøkTab).toBeHidden();
  181 |
  182 |         await expect(
  183 |           page.getByRole('heading', { name: 'Ikke tilgang' }),
  184 |         ).toBeVisible();
  185 |       }
  186 |
  187 |       // Mine brukere fane
  188 |       const mineBrukereTab = page.getByRole('radio', { name: 'Mine brukere' });
  189 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  190 |         await expect(mineBrukereTab).toBeVisible();
  191 |       }
  192 |       if (MODIA) {
  193 |         await expect(mineBrukereTab).toBeHidden();
  194 |       }
  195 |
  196 |       // Mitt kontor fane
  197 |       const mittKontorTab = page.getByRole('radio', { name: 'Mitt kontor' });
  198 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  199 |         await expect(mittKontorTab).toBeVisible();
  200 |       }
  201 |       if (MODIA) {
  202 |         await expect(mittKontorTab).toBeHidden();
  203 |       }
  204 |
  205 |       // Mine kontor fane
  206 |       const mineKontorTab = page.getByRole('radio', { name: 'Mine kontor' });
  207 |
  208 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  209 |         await expect(mineKontorTab).toBeVisible();
  210 |       }
  211 |       if (MODIA) {
  212 |         await expect(mineKontorTab).toBeHidden();
  213 |       }
  214 |
  215 |       // Valgte kontor fane
  216 |       const valgteKontorTab = page.getByRole('radio', {
  217 |         name: 'Valgte kontor',
  218 |       });
  219 |       if (ARBEIDSGIVERRETTET) {
  220 |         await expect(valgteKontorTab).toBeVisible();
  221 |       }
  222 |       if (JOBBSOKERRETTET || MODIA) {
  223 |         await expect(valgteKontorTab).toBeHidden();
  224 |       }
  225 |
  226 |       // Alle fane
  227 |       const alleFane = page.getByRole('radio', { name: 'Alle' });
  228 |       if (ARBEIDSGIVERRETTET) {
  229 |         await expect(alleFane).toBeVisible();
  230 |       }
  231 |       if (JOBBSOKERRETTET || MODIA) {
  232 |         await expect(alleFane).toBeHidden();
  233 |       }
  234 |     });
  235 |
  236 |     test('5. Kandidat', async ({ page }) => {
  237 |       await page.goto(
  238 |         'http://localhost:1337/kandidat?visKandidatnr=PAM012t1avh27',
  239 |       );
  240 |       // Viser kandidat side
  241 |       const oversiktFane = page.getByRole('tab', { name: 'Oversikt' });
  242 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
> 243 |         await expect(oversiktFane).toBeVisible();
      |                                    ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  244 |       }
  245 |       if (MODIA) {
  246 |         await expect(oversiktFane).toBeHidden();
  247 |       }
  248 |
  249 |       // Viser aktivitetfanen inne på kandidat
  250 |       const aktivitetFane = page.getByRole('tab', { name: 'Aktivitet' });
  251 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  252 |         await expect(aktivitetFane).toBeVisible();
  253 |       }
  254 |       if (MODIA) {
  255 |         await expect(aktivitetFane).toBeHidden();
  256 |       }
  257 |     });
  258 |
  259 |     test('6. Formidlinger', async ({ page }) => {
  260 |       await page.goto('http://localhost:1337/etterregistrering');
  261 |
  262 |       // Viser formidlinger
  263 |       const formidlinger = await page.getByRole('heading', {
  264 |         name: 'Etterregistrering formidlinger',
  265 |       });
  266 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  267 |         await expect(formidlinger).toBeVisible();
  268 |       }
  269 |       if (MODIA) {
  270 |         await expect(formidlinger).toBeHidden();
  271 |       }
  272 |
  273 |       // Kan opprette formidling
  274 |       const etterFormidlingKnapp = page.getByRole('button', {
  275 |         name: 'Opprett etterregistrering',
  276 |       });
  277 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  278 |         await page.getByRole('button', { name: 'Opprett' }).click();
  279 |         await expect(
  280 |           page.getByRole('menuitem', { name: 'Etterregistrering' }),
  281 |         ).toBeVisible();
  282 |       }
  283 |       if (MODIA) {
  284 |         await expect(
  285 |           page.getByRole('button', { name: 'Opprett' }),
  286 |         ).toBeHidden();
  287 |       }
  288 |     });
  289 |   });
  290 | };
  291 |
```