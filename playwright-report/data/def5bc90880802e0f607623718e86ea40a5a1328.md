# Test info

- Name: Tilgangskontroll for Arbeidsgiverrettet >> 3. Stilling
- Location: /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/tilgangskontroll/tilgangskontroll.tester.ts:104:9

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByRole('tab', { name: 'Om stillingen' })
Expected: visible
Received: undefined
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByRole('tab', { name: 'Om stillingen' })
    - waiting for navigation to finish...

    at /home/runner/work/rekrutteringsbistand-frontend/rekrutteringsbistand-frontend/tests/tilgangskontroll/tilgangskontroll.tester.ts:136:38
```

# Page snapshot

```yaml
- img "Laster..."
```

# Test source

```ts
   36 |       const utfallsstatistikk = page.getByTestId('forside-utfallsstatistikk');
   37 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
   38 |         await expect(utfallsstatistikk).toBeVisible();
   39 |       }
   40 |
   41 |       // Forespørsler statistikk
   42 |       const forespørslerStatistikk = page.getByTestId(
   43 |         'forside-forespørsel-statistikk',
   44 |       );
   45 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
   46 |         await expect(forespørslerStatistikk).toBeVisible();
   47 |       }
   48 |     });
   49 |
   50 |     test('2. Stillingssøk', async ({ page }) => {
   51 |       await page.getByRole('button', { name: 'Stillinger' }).click();
   52 |
   53 |       await page.waitForURL('**/stilling**');
   54 |
   55 |       // Alle stillinger fane
   56 |       const alleStillingerFane = page.getByRole('radio', {
   57 |         name: 'Alle stillinger',
   58 |       });
   59 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
   60 |         await expect(alleStillingerFane).toBeVisible();
   61 |       }
   62 |
   63 |       // Mine stillinger fane
   64 |       const mineStillingerFane = page.getByRole('radio', {
   65 |         name: 'Mine stillinger',
   66 |       });
   67 |       if (ARBEIDSGIVERRETTET) {
   68 |         await expect(mineStillingerFane).toBeVisible();
   69 |       }
   70 |       if (JOBBSOKERRETTET || MODIA) {
   71 |         await expect(mineStillingerFane).toBeHidden();
   72 |       }
   73 |
   74 |       // Filtre
   75 |       await page.goto(
   76 |         'http://localhost:1337/stilling?publisert=intern&statuser=publisert%2Cutl%C3%B8pt%2Cstoppet&fylker=33&kommuner=3301',
   77 |       );
   78 |
   79 |       if (ARBEIDSGIVERRETTET) {
   80 |         await expect(page.getByText('Status')).toBeVisible();
   81 |       }
   82 |       if (JOBBSOKERRETTET || MODIA) {
   83 |         await expect(page.getByText('Status')).toBeHidden();
   84 |       }
   85 |
   86 |       await expect(page.getByText('Område')).toBeVisible();
   87 |       await expect(page.getByText('Inkludering')).toBeVisible();
   88 |       await expect(page.getByText('Kategori')).toBeVisible();
   89 |       await expect(page.getByText('Synlighet')).toBeVisible();
   90 |       await expect(
   91 |         page.getByRole('button', { name: 'Alle filtre' }),
   92 |       ).toBeVisible();
   93 |       await page.getByRole('button', { name: 'Alle filtre' }).click();
   94 |       await expect(page.getByRole('heading', { name: 'Filter' })).toBeVisible();
   95 |       await page
   96 |         .locator('.data-\\[state\\=open\\]\\:animate-in')
   97 |         .first()
   98 |         .click();
   99 |       await page.getByRole('button', { name: 'Alle filtre' }).click();
  100 |       await expect(page.getByRole('heading', { name: 'Filter' })).toBeVisible();
  101 |       await page.getByRole('button', { name: 'Close' }).click();
  102 |     });
  103 |
  104 |     test('3. Stilling', async ({ page }) => {
  105 |       await page.goto('http://localhost:1337/stilling/internStilling');
  106 |
  107 |       // Viser stilling side
  108 |       await expect(page.getByTestId('stilling-side')).toBeVisible();
  109 |
  110 |       // Viser finn kandidater knapp
  111 |       const finnKandidaterKnapp = page.getByRole('button', {
  112 |         name: 'Finn kandidater',
  113 |       });
  114 |
  115 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  116 |         await expect(finnKandidaterKnapp).toBeVisible();
  117 |       }
  118 |       if (MODIA) {
  119 |         await expect(finnKandidaterKnapp).toBeHidden();
  120 |       }
  121 |
  122 |       // Viser legg til kandidate knapp
  123 |       const leggTilKandidatKnapp = page.getByRole('button', {
  124 |         name: 'Legg til kandidat',
  125 |       });
  126 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  127 |         await expect(leggTilKandidatKnapp).toBeVisible();
  128 |       }
  129 |       if (MODIA) {
  130 |         await expect(leggTilKandidatKnapp).toBeHidden();
  131 |       }
  132 |
  133 |       // Viser om stillingen
  134 |       const omStillingFane = page.getByRole('tab', { name: 'Om stillingen' });
  135 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET || MODIA) {
> 136 |         await expect(omStillingFane).toBeVisible();
      |                                      ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  137 |       }
  138 |     });
  139 |
  140 |     test('3.1 Min Stilling', async ({ page }) => {
  141 |       await page.goto('http://localhost:1337/stilling/minStilling');
  142 |
  143 |       const redigerKnapp = page.getByRole('button', { name: 'Rediger' });
  144 |       const dupliserKnapp = page.getByRole('button', { name: 'Dupliser' });
  145 |       const avpubliserKnapp = page.getByRole('button', { name: 'Avpubliser' });
  146 |       const ferdigstillKnapp = page.getByRole('button', {
  147 |         name: 'Ferdigstill',
  148 |       });
  149 |
  150 |       if (ARBEIDSGIVERRETTET) {
  151 |         await expect(redigerKnapp).toBeVisible();
  152 |         await expect(dupliserKnapp).toBeVisible();
  153 |         await expect(avpubliserKnapp).toBeVisible();
  154 |         await expect(ferdigstillKnapp).toBeVisible(); // updated to check for the new button
  155 |       } else {
  156 |         await expect(redigerKnapp).toBeHidden();
  157 |         await expect(dupliserKnapp).toBeHidden();
  158 |         await expect(avpubliserKnapp).toBeHidden();
  159 |         await expect(ferdigstillKnapp).toBeHidden();
  160 |       }
  161 |
  162 |       if (ARBEIDSGIVERRETTET) {
  163 |         await expect(
  164 |           page.getByRole('tab', { name: 'Kandidater (10)' }),
  165 |         ).toBeVisible();
  166 |       }
  167 |     });
  168 |
  169 |     test('4. Kandidatsøk', async ({ page }) => {
  170 |       await page.goto('http://localhost:1337/kandidat');
  171 |
  172 |       // Viser kandidatsøk fane
  173 |       const kandidatSøkTab = page.getByRole('button', { name: 'Kandidater' });
  174 |
  175 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  176 |         await expect(kandidatSøkTab).toBeVisible();
  177 |       }
  178 |
  179 |       if (MODIA) {
  180 |         await expect(kandidatSøkTab).toBeHidden();
  181 |
  182 |         await expect(
  183 |           page.getByRole('heading', { name: 'Ikke tilgang' }),
  184 |         ).toBeVisible();
  185 |       }
  186 |
  187 |       // Mine brukere fane
  188 |       const mineBrukereTab = page.getByRole('radio', { name: 'Mine brukere' });
  189 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  190 |         await expect(mineBrukereTab).toBeVisible();
  191 |       }
  192 |       if (MODIA) {
  193 |         await expect(mineBrukereTab).toBeHidden();
  194 |       }
  195 |
  196 |       // Mitt kontor fane
  197 |       const mittKontorTab = page.getByRole('radio', { name: 'Mitt kontor' });
  198 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  199 |         await expect(mittKontorTab).toBeVisible();
  200 |       }
  201 |       if (MODIA) {
  202 |         await expect(mittKontorTab).toBeHidden();
  203 |       }
  204 |
  205 |       // Mine kontor fane
  206 |       const mineKontorTab = page.getByRole('radio', { name: 'Mine kontor' });
  207 |
  208 |       if (ARBEIDSGIVERRETTET || JOBBSOKERRETTET) {
  209 |         await expect(mineKontorTab).toBeVisible();
  210 |       }
  211 |       if (MODIA) {
  212 |         await expect(mineKontorTab).toBeHidden();
  213 |       }
  214 |
  215 |       // Valgte kontor fane
  216 |       const valgteKontorTab = page.getByRole('radio', {
  217 |         name: 'Valgte kontor',
  218 |       });
  219 |       if (ARBEIDSGIVERRETTET) {
  220 |         await expect(valgteKontorTab).toBeVisible();
  221 |       }
  222 |       if (JOBBSOKERRETTET || MODIA) {
  223 |         await expect(valgteKontorTab).toBeHidden();
  224 |       }
  225 |
  226 |       // Alle fane
  227 |       const alleFane = page.getByRole('radio', { name: 'Alle' });
  228 |       if (ARBEIDSGIVERRETTET) {
  229 |         await expect(alleFane).toBeVisible();
  230 |       }
  231 |       if (JOBBSOKERRETTET || MODIA) {
  232 |         await expect(alleFane).toBeHidden();
  233 |       }
  234 |     });
  235 |
  236 |     test('5. Kandidat', async ({ page }) => {
```