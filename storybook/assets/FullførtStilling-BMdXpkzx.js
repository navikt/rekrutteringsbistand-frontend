import{r as p,G as ce,R as O,bi as me,aw as M,u as pe,f as fe,cI as w,A as ge,j as e,H as u,M as z,d as I,C as N,cJ as _,cK as C,L as ue,cL as R,cF as xe,cM as he,cN as ve,cO as ke,cz as je,cD as W,B as m,x as be}from"./iframe-CxUg2AuX.js";import{E as Se,R as Ne,F as ye,S as De,G as ze}from"./Gjen√•pneStillingKnapp-CuXyJLn7.js";import{D as T}from"./DatoVelger-CpnWDq9s.js";import{M as B}from"./Modal-J0jh0CrT.js";import{a as $}from"./Checkbox-D_7Wlz4X.js";import{a as Ae}from"./useDatepicker-BdoVjxGM.js";import{A as Q,a as X,b as Y,c as Z}from"./accordion-D3zqT2om.js";import{B as ee}from"./Box-BZqmbGx8.js";import{S as se}from"./Bell-BQbGgcFP.js";import{S as te}from"./Table-BZvmg8Op.js";import{S as ae}from"./PersonChat-Mr0Rfi8N.js";import{S as ie}from"./Eye-CKcLKWTq.js";import{P as Ee}from"./ProgressBar-Nd8Lnzo3.js";var Ve=function(r,a){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)a.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n};const Fe=p.forwardRef((r,a)=>{var{title:n,titleId:i}=r,o=Ve(r,["title","titleId"]);let c=ce();return c=n?i||"title-"+c:void 0,O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":c},o),n?O.createElement("title",{id:c},n):null,O.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.5 2.25c-.69 0-1.25.56-1.25 1.25v16.75h-2.5V10.5c0-.69-.56-1.25-1.25-1.25h-3c-.69 0-1.25.56-1.25 1.25v9.75H4a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 0-1.5h-1.25V3.5c0-.69-.56-1.25-1.25-1.25zm.25 18V3.75h2.5v16.5zm-8-9.5v9.5h2.5v-9.5z",clipRule:"evenodd"}))});function re(){const r=me(),{stillingsData:a,refetch:n}=M(),{brukerData:i,valgtNavKontor:o}=pe(),[c,f]=p.useState(!1),[x,v]=p.useState(!1),[k,y]=p.useState(),P=p.useMemo(()=>fe(Ae(new Date,3),ke),[]),A=p.useCallback(()=>{const s=a?.stilling,t=a?.stilling?.properties??{},d=t?.starttime==="Etter avtale",l=t?.applicationdue==="Snarest";return{visningsdato:typeof s?.expires=="string"?w(s.expires):void 0,oppstart:!d&&typeof t?.starttime=="string"?w(t.starttime):void 0,oppstartEtterAvtale:d,soknadsfrist:!l&&typeof t?.applicationdue=="string"?w(t.applicationdue):void 0,soknadsfristSnarest:l}},[a]),{control:j,handleSubmit:le,setValue:b,getValues:S,watch:D,reset:K,trigger:q}=ge({mode:"onSubmit",reValidateMode:"onChange",defaultValues:A()});p.useEffect(()=>{c&&(K(A()),y(void 0))},[c,A,K]);const ne=D("oppstartEtterAvtale"),de=D("soknadsfristSnarest"),E=D("oppstart"),V=D("soknadsfrist"),[H,G]=p.useState(),[L,J]=p.useState();if(p.useEffect(()=>{E&&G(E)},[E]),p.useEffect(()=>{V&&J(V)},[V]),!a)return null;const oe=async s=>{const t=R(s.visningsdato),d=s.oppstartEtterAvtale?"Etter avtale":R(s.oppstart),l=s.soknadsfristSnarest?"Snarest":R(s.soknadsfrist),g=a.stilling.properties??{};if(!s.oppstartEtterAvtale&&d==null||!s.soknadsfristSnarest&&l==null){y("Ugyldig datoformat. Vennligst kontroller at alle datoer er gyldige.");return}const F={...a,stilling:{...a.stilling,status:xe.Aktiv,expires:t,properties:{...g,starttime:d,applicationdue:l},administration:{...a.stilling.administration??{},status:ve.Done}}};v(!0),y(void 0);try{const h=await he(F,{eierNavident:i.ident,eierNavn:i.navn,eierNavKontorEnhetId:o?.navKontor});n?.(),r.push(`/stilling/${h.stilling.uuid}`),f(!1)}catch(h){y(h?.message??"Klarte ikke √• lagre endringene")}finally{v(!1)}};return e.jsxs("div",{className:"mt-4",children:[e.jsx(u,{size:"xsmall",level:"3",children:"Forlengelse"}),e.jsx(z,{size:"small",className:"mt-1",children:"Trenger du litt mer tid? Du kan endre datoene for siste visning, s√∏knadsfrist, og oppstart."}),e.jsx(I,{size:"small",className:"mt-4 w-full",onClick:()=>f(!0),children:"Forlenge oppdraget"}),e.jsx(B,{open:c,onClose:()=>f(!1),header:{heading:"Forleng oppdraget",size:"small"},width:"small",children:e.jsxs("form",{onSubmit:le(oe),children:[e.jsxs(B.Body,{children:[e.jsx(z,{className:"mb-6",children:"Endre datoene for oppdraget hvis du vil ha litt mer tid."}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(N,{name:"visningsdato",control:j,rules:{required:"Velg siste visningsdato",validate:s=>s?_(s)?C(s)?"Dato kan ikke v√¶re i fortiden":!0:"Ugyldig datoformat":"Velg siste visningsdato"},render:({field:{value:s,onChange:t},fieldState:{error:d}})=>e.jsx(T,{label:"Siste visningsdato",disablePastDates:!0,valgtDato:s,setDato:l=>{t(l)},error:d?.message})}),e.jsxs("div",{className:"grid grid-cols-[3fr_2fr] items-start gap-6",children:[e.jsx(N,{name:"oppstart",control:j,rules:{validate:s=>{const{oppstartEtterAvtale:t}=S();return t?!0:s?C(s)?"Dato kan ikke v√¶re i fortiden":!0:"Velg oppstartsdato eller marker Etter avtale"}},render:({field:{value:s,onChange:t},fieldState:{error:d}})=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(T,{label:"Oppstart",disablePastDates:!0,valgtDato:s,setDato:l=>{t(l)},disabled:ne,error:d?.message})})}),e.jsx(N,{name:"oppstartEtterAvtale",control:j,render:({field:{value:s,onChange:t}})=>e.jsx($,{className:"min-w-max pt-9",checked:s,onChange:d=>{const l=d.target.checked;t(l);const g=S("oppstart");l?(g&&G(g),b("oppstart",void 0,{shouldValidate:!0})):!g&&H&&b("oppstart",H,{shouldValidate:!0}),q("oppstart")},children:"Etter avtale"})})]}),e.jsxs("div",{className:"grid grid-cols-[3fr_2fr] items-start gap-6",children:[e.jsx(N,{name:"soknadsfrist",control:j,rules:{validate:s=>{const{soknadsfristSnarest:t}=S();return t?!0:s?C(s)?"Dato kan ikke v√¶re i fortiden":!0:"Velg s√∏knadsfrist eller marker Snarest"}},render:({field:{value:s,onChange:t},fieldState:{error:d}})=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(T,{label:"S√∏knadsfrist",disablePastDates:!0,valgtDato:s,setDato:l=>{t(l)},disabled:de,error:d?.message})})}),e.jsx(N,{name:"soknadsfristSnarest",control:j,render:({field:{value:s,onChange:t}})=>e.jsx($,{className:"min-w-max pt-9",checked:s,onChange:d=>{const l=d.target.checked;t(l);const g=S("soknadsfrist");if(l){g&&J(g),b("soknadsfrist",void 0,{shouldValidate:!0});const F=S("visningsdato"),h=_(F),U=_(P);(!h||U&&h<U)&&b("visningsdato",P,{shouldValidate:!0})}else!g&&L&&b("soknadsfrist",L,{shouldValidate:!0});q(["soknadsfrist","visningsdato"])},children:"Snarest"})})]}),k&&e.jsx(ue,{variant:"error",children:k})]})]}),e.jsxs(B.Footer,{children:[e.jsx(I,{type:"submit",loading:x,disabled:x,children:"Publiser"}),e.jsx(I,{type:"button",variant:"secondary",onClick:()=>f(!1),disabled:x,children:"Avbryt"})]})]})})]})}re.__docgenInfo={description:"",methods:[],displayName:"ForlengeOppdrag"};function Oe({antallF√•ttJobben:r,antallDelt:a,totalStillinger:n,dropDown:i}){const{stillingsData:o,omStilling:{erJobbmesse:c}}=M(),f=je(o).visningsStatus,x=c?null:e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsx(u,{size:"small",level:"2",children:"Del med arbeidsgiver"}),e.jsx(Ee,{value:a,valueMax:n,size:"small","aria-labelledby":"progress-bar-label-small"}),e.jsxs("div",{className:"flex justify-end text-sm tabular-nums",children:[a,"/",n]})]}),v=e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Ne,{}),e.jsx(ye,{})]}),k=e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx(u,{size:"xsmall",level:"3",children:"Sjekkliste"}),e.jsx(z,{size:"small",className:"mt-1",children:"Ble det match? Velg hvem som fikk jobben og fullf√∏r. Du kan ogs√• fullf√∏re oppdraget selv om det ikke gikk denne gangen."})]}),e.jsxs("div",{children:[e.jsx(u,{size:"xsmall",level:"3",children:"S√∏kerstopp"}),e.jsx(z,{size:"small",className:"mt-1",children:"Har du f√•tt nok jobbs√∏kere? Du kan stoppe √• motta nye forslag, og samtidig skjule oppdraget fra listen. Sl√• det p√• igjen n√•r du vil."}),e.jsx(Se,{}),f!==W.Slettet&&f!==W.Fullfort&&e.jsx(re,{})]}),!c&&e.jsxs(ee.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(u,{size:"xsmall",level:"3",className:"mb-4",children:"Hva skjer etter fullf√∏ring?"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Alle som ikke fikk jobben f√•r beskjed om avslaget p√• nav.no/min-side."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Aktivitetskortet flyttes til ‚ÄúFullf√∏rt‚Äù-kolonnen i aktivitetsplanen."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"De som fikk jobben f√•r ikke beskjed automatisk, siden de mest sannsynlig f√•r h√∏re nyheten direkte fra arbeidsgiveren."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Oppdraget vises ikke lenger som aktiv."})]}),r>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Registreringen sendes til statistikk. Tellingene l√•ses ved m√•nedsskifte."})]})]})]})]});return i?e.jsx("div",{className:"p-2",children:e.jsx(Q,{type:"single",collapsible:!0,children:e.jsxs(X,{value:"item-1",children:[v,e.jsx(Y,{children:x}),e.jsx(Z,{children:k})]})})}):e.jsxs("div",{className:"mr-2",children:[v,e.jsxs("div",{className:"mt-5",children:[x,k]})]})}Oe.__docgenInfo={description:"",methods:[],displayName:"AktivStilling",props:{dropDown:{required:!1,tsType:{name:"boolean"},description:""},antallF√•ttJobben:{required:!0,tsType:{name:"number"},description:""},antallDelt:{required:!0,tsType:{name:"number"},description:""},totalStillinger:{required:!0,tsType:{name:"number"},description:""}}};function we({totalStillinger:r,antallF√•ttJobben:a,dropDown:n}){const{stillingsData:i,omStilling:{erJobbmesse:o}}=M(),c=e.jsxs(e.Fragment,{children:[e.jsx(De,{}),e.jsx(ze,{})]}),f=e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx(u,{size:"small",level:"2",children:"Oppdrag fullf√∏rt"}),e.jsxs(m,{size:"small",className:"mt-1 text-[var(--ax-text-neutral-subtle)]",children:["Av ",i.stilling?.administration?.reportee," ",be({dato:i.stilling.updated})]})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:a>0?e.jsxs("div",{children:[e.jsx(u,{size:"xsmall",level:"3",children:"üéØ Her traff du blink"}),e.jsxs(m,{size:"small",children:[a," av ",r," stillinger ble besatt"]})]}):e.jsxs("div",{children:[e.jsx(u,{size:"xsmall",level:"3",children:"üêü Ingen napp denne gangen"}),e.jsxs(m,{size:"small",children:[a," av ",r," stillinger ble besatt"]})]})}),e.jsxs(ee.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(u,{size:"xsmall",level:"3",className:"mb-4",children:"Hva som skjedde bak kulissene"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Alle som ikke fikk jobben fikk beskjed om avslaget p√• nav.no/min-side."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Aktivitetskortet ble flyttet til ‚ÄúFullf√∏rt‚Äù-kolonnen i aktivitetsplanen."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"De som fikk jobben fikk ikke beskjed automatisk, siden de mest sannsynlig f√•r h√∏re nyheten direkte fra arbeidsgiveren."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(m,{size:"small",children:"Annonsen vises ikke lenger som aktiv."})]})]})]})]})]});return n?e.jsx("div",{className:"p-2",children:e.jsx(Q,{type:"single",collapsible:!0,children:e.jsxs(X,{value:"item-1",children:[c,e.jsx(Y,{children:e.jsxs(m,{size:"small",children:[a," av ",r," stillinger ble besatt"]})}),e.jsx(Z,{children:f})]})})}):e.jsxs("div",{className:n?"p-4":"mr-2",children:[c," ",f]})}we.__docgenInfo={description:"",methods:[],displayName:"Fullf√∏rtStilling",props:{totalStillinger:{required:!0,tsType:{name:"number"},description:""},antallF√•ttJobben:{required:!0,tsType:{name:"number"},description:""},dropDown:{required:!1,tsType:{name:"boolean"},description:""}}};export{Oe as A,we as F};
