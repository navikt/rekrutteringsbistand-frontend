import{j as t,r as a,Q as _,ax as T,u as S,d as b,cp as F,E as I}from"./iframe-DaMpkblx.js";import{L as h}from"./LenkeKortMedIkon-DQg6b8mp.js";import{U as d}from"./umamiEvents-CYDHrNFb.js";import{l as w}from"./leggTilKandidat-Dfy89YYn.js";import{L as M}from"./LeggTilKandidater-0VXN8jo8.js";import{M as o}from"./Modal-Bk1drFoQ.js";function C({stillingId:i}){const r=`/stilling/${i}/finn-kandidater`;return t.jsx(h,{tittel:"Finn og foreslÃ¥ jobbsÃ¸kere",beskrivelse:"Se alle som leter etter jobb nÃ¥, og finn riktig person til jobben",ikon:"ðŸ‘‰",href:r,"data-umami-event":d.Stilling.finn_kandidater_knapp})}C.__docgenInfo={description:"",methods:[],displayName:"FinnKandidaterKnapp",props:{stillingId:{required:!0,tsType:{name:"string"},description:""}}};const E=({stillingsId:i,stillingsTittel:r})=>{const s=a.useRef(null),{track:g}=_(),{kandidatlisteInfo:c,refetchKandidatliste:j}=T(),{valgtNavKontor:K,visVarsel:p}=S(),[l,m]=a.useState([]),[y,x]=a.useState(0),[k,u]=a.useState(!1),v=()=>{x(n=>n+1),g(d.Stilling.Ã¥pne_legg_til_kandidat_modal),s.current?.showModal()},L=async()=>{u(!0);const n=l.filter(e=>e.aktÃ¸rId===null),f=l.map(e=>e.aktÃ¸rId).filter(e=>e!=null);if(c?.kandidatlisteId&&(f.length>0||n.length>0))try{await w(f,i);for(const e of n)await F(c.kandidatlisteId,{fnr:e.fÃ¸dselsnummer,fÃ¥ttJobb:!0,navKontor:K?.navKontor??"",stillingsId:i});g(d.Stilling.legg_til_kandidat,{antall:l.length}),p({tekst:"JobbsÃ¸kere ble lagt til i stillingen",type:"success"}),m([]),j?.(),s.current?.close()}catch(e){throw p({tekst:"Noe gikk galt ved lagring av jobbsÃ¸kere",type:"error"}),new I({message:"Veil ved legg til jobbsÃ¸kere",error:e})}u(!1)};return t.jsxs(a.Fragment,{children:[t.jsx(h,{tittel:"Legg til jobbsÃ¸kere",beskrivelse:"Vet du fÃ¸dselsnummeret til personen, kan du legge dem til med en gang.",onClick:v,ikon:"âž•",loading:k}),t.jsxs(o,{width:"600px",ref:s,header:{closeButton:!1,heading:`Legg til jobbsÃ¸kere til ${r??"stilling"}`},children:[t.jsx(o.Body,{children:t.jsx(M,{callBack:n=>{m(n)}},y)}),t.jsxs(o.Footer,{children:[t.jsx(b,{disabled:l.length===0,onClick:L,children:"Legg til jobbsÃ¸ker"}),t.jsx(b,{loading:k,type:"button",variant:"secondary",onClick:()=>s.current?.close(),children:"Avbryt"})]})]})]},i)};E.__docgenInfo={description:"",methods:[],displayName:"LeggTilKandidatTilStilling",props:{stillingsId:{required:!0,tsType:{name:"string"},description:""},stillingsTittel:{required:!0,tsType:{name:"string"},description:""}}};export{C as F,E as L};
