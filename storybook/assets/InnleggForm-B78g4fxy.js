import{b3 as K,bK as T,r as a,j as e,B as E,C as R}from"./iframe-DTWfjzwK.js";import{K as w}from"./KiAnalyseIntro-Ddp2uRkx.js";import{K as A}from"./KiAnalysePanel-wk5N2CGY.js";import{u as L}from"./useFormFeltMedKiValidering-AL3mCviG.js";import{R as N}from"./RikTekstEditor-DoIGU5ox.js";import{S as V}from"./Skeleton-D_JLZz9T.js";const B="rediger-innlegg-htmlcontent-form",l=({onUpdated:d})=>{const{rekrutteringstreffId:g}=K(),{data:m,isLoading:o}=T(g),n=m?.[0],u=n?n.htmlContent??null:void 0,[c,f]=a.useState(0),{analyse:h,analyseError:p,validating:y,kiErrorBorder:j,harGodkjentKiFeil:v,showAnalysis:x,erRedigeringAvPublisertTreff:k,validerMedKiOgLagreVedGodkjenning:C,onGodkjennKiFeil:b,control:F,setValue:s,kiLoggLoading:i}=L({feltType:"innlegg",fieldName:"htmlContent",savedValue:u,onUpdated:d});return a.useEffect(()=>{const t=n?.htmlContent??"";s("htmlContent",t,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1});const r=window.setTimeout(()=>{f(I=>I+1)},0);return()=>window.clearTimeout(r)},[s,n?.htmlContent]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"space-y-3",children:[e.jsx(w,{title:"Introduksjon"}),(o||i)&&e.jsx(V,{variant:"text"}),!o&&!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:e.jsx(E,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})}),e.jsx("div",{className:`rounded-lg border ${j?"border-red-500":"border-gray-300"}`,onBlur:t=>{const r=t.currentTarget;setTimeout(async()=>{r.contains(document.activeElement)||await C()},0)},children:e.jsx(R,{name:"htmlContent",control:F,render:({field:t})=>e.jsx(N,{id:B,tekst:t.value??"",onChange:t.onChange},c)})}),e.jsx(A,{validating:y,analyse:h,analyseError:p,harGodkjentKiFeil:v,showAnalysis:x,erRedigeringAvPublisertTreff:k,onGodkjennKiFeil:b,ariaLabel:"Analyse av innlegg"})]})]})})};l.displayName="InnleggForm";l.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{l as I};
