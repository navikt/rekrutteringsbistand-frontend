import{r as i,z as F,R as y,J as le,j as n,B as se,d as M}from"./iframe-BHOx9B5b.js";import{_ as f}from"./style-B8y9rqWt.js";import{f as A}from"./FilterChip-BCp9krKw.js";import{T as H}from"./TømFiltre-BDHt6glw.js";import{a as ie}from"./util-BeBCU710.js";import{U as C}from"./umamiEvents-DmzFNrn7.js";import{C as B}from"./Chips-DNERyA1-.js";import{T as U}from"./Tooltip-CR7BZIwl.js";var oe=function(r,d){var l={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&d.indexOf(t)<0&&(l[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(r);s<t.length;s++)d.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(r,t[s])&&(l[t[s]]=r[t[s]]);return l};const ce=i.forwardRef((r,d)=>{var{title:l,titleId:t}=r,s=oe(r,["title","titleId"]);let o=F();return o=l?t||"title-"+o:void 0,y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:d,"aria-labelledby":o},s),l?y.createElement("title",{id:o},l):null,y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.03 9.28-3.5 3.5a.75.75 0 0 1-1.06 0l-3.5-3.5a.75.75 0 1 1 1.06-1.06L12 13.44l2.97-2.97a.75.75 0 1 1 1.06 1.06",clipRule:"evenodd"}))});var de=function(r,d){var l={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&d.indexOf(t)<0&&(l[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(r);s<t.length;s++)d.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(r,t[s])&&(l[t[s]]=r[t[s]]);return l};const pe=i.forwardRef((r,d)=>{var{title:l,titleId:t}=r,s=de(r,["title","titleId"]);let o=F();return o=l?t||"title-"+o:void 0,y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:d,"aria-labelledby":o},s),l?y.createElement("title",{id:o},l):null,y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.03 10.22-3.5-3.5a.75.75 0 0 0-1.06 0l-3.5 3.5a.75.75 0 1 0 1.06 1.06L12 10.56l2.97 2.97a.75.75 0 1 0 1.06-1.06",clipRule:"evenodd"}))}),fe=({tømFiltreProps:r,filtre:d=[]})=>{const l=le(),[t,s]=i.useState(!1),[o,$]=i.useState(0),[m,P]=i.useState(null),[g,D]=i.useState(0),[W,J]=i.useState(0),[e,V]=i.useState(!1),[v,X]=i.useState(null),R=i.useRef(null),x=i.useRef(null),L=i.useRef(null),K=i.useRef(null),u=d.flatMap((a,c)=>(a.type||[]).map((b,N)=>{const I=a.mapVerdiNavn?A(a.mapVerdiNavn(b)):A(ie(b));return{key:`${c}-${b}-${N}`,label:I,remove:()=>a.setVerdi((a.type||[]).filter(E=>E!==b))}})),O=Math.max(0,u.length-o),Q=O>0;i.useEffect(()=>{t?l.track(C.Generell.åpne_filter_chip_panel):l.track(C.Generell.lukk_filter_chip_panel)},[t,l]),i.useLayoutEffect(()=>{if(!R.current||!x.current)return;const a=R.current.offsetWidth;if(!a)return;const c=x.current,b=Array.from(c.querySelectorAll("button[data-chip-measure]")),N=c.querySelector("button[data-clear-all]"),I=c.querySelector("div[data-control-wrapper]"),E=getComputedStyle(c),q=parseFloat(E.columnGap||E.gap||"0")||0,k=N?.offsetWidth||0,re=b.map(h=>h.offsetWidth),w=[];re.reduce((h,S,p)=>{const T=h+S+(p>0||k>0?q:0);return w.push(T),T},k);const ae=w[w.length-1]||k;let _=o,j=g;if(ae<=a)_=u.length,j=0;else{let h=o,S=g;for(let p=u.length;p>=0;p--){if(u.length-p===0){if((p===0?k:w[p-1])<=a){h=p,S=0;break}continue}const z=(I?.offsetWidth||0)+16+8,G=p===0?k:w[p-1];if(G+(G>0?q:0)+z<=a){h=p,S=z;break}}_=h,j=S}if(_===o&&j===g)return;const ne=window.requestAnimationFrame(()=>{_!==o&&$(_),j!==g&&D(j)});return()=>window.cancelAnimationFrame(ne)},[u,r,o,g,R,x]),i.useLayoutEffect(()=>{const a=L.current;if(a&&!m&&P(a.getBoundingClientRect().height),W===0&&x.current){const c=x.current.querySelector("button[data-collapse-measure]");if(c){const b=c.offsetWidth+8;J(b)}}},[m,W]),i.useEffect(()=>{let a;const c=()=>{clearTimeout(a),a=setTimeout(()=>$(0),150)};return window.addEventListener("resize",c),()=>{clearTimeout(a),window.removeEventListener("resize",c)}},[]);const Y=()=>{V(!0),v&&clearTimeout(v);const a=setTimeout(()=>{V(!1)},1e3);X(a)};if(i.useEffect(()=>()=>{v&&clearTimeout(v)},[v]),u.length===0)return null;const Z=t?u:u.slice(0,o),ee=t?m?`${m*8}px`:"600px":m?`${m}px`:"40px",te=t?(W||40)+16:0;return n.jsxs("div",{ref:R,className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" w-full",children:[n.jsx(f,{id:"f20d71e6f40cafe0",dynamic:[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"],children:`.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar{width:16px;height:16px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-track{background:transparent;margin:2px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(203, 213, 225, 0.8)":"transparent"};border-radius:8px;border:4px solid transparent;background-clip:content-box;transition:background.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(203,213,225,.8);background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(148,163,184,.9)!important;background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-corner{background:transparent}.chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-width:thin;scrollbar-color:${e?"rgba(203, 213, 225, 0.8)":"transparent"} transparent;transition:scrollbar-color.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(203,213,225,.8)transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(75, 85, 99, 0.8)":"transparent"};background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(75,85,99,.8);background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(107,114,128,.9)!important;background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-color:${e?"rgba(75, 85, 99, 0.8)":"transparent"} transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(75,85,99,.8)transparent}`}),n.jsxs("div",{className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex justify-between relative",children:[n.jsx("div",{style:{maxHeight:ee,paddingRight:te},onScroll:Y,className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" chips-scroll-container flex-1 min-w-0 transition-all duration-300 ease-in-out overflow-auto",children:n.jsxs(B,{ref:L,size:"small",className:"flex items-center gap-2 flex-wrap","aria-expanded":t,children:[r&&n.jsx("div",{className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:n.jsx(H,{...r,"data-clear-all":"true",className:"flex-shrink-0"})}),Z.map(a=>n.jsx(B.Removable,{onClick:a.remove,style:{whiteSpace:"nowrap",flexShrink:0},className:"flex-shrink-0",children:a.label},a.key)),!t&&O>0&&n.jsx(se,{onClick:()=>{s(!0),l.track(C.Generell.åpne_filter_chip_panel_tekst)},className:"cursor-pointer text-s whitespace-nowrap text-[var(--ax-text-accent-subtle)]",children:`+ ${O} filtre`})]})}),n.jsxs("div",{ref:x,"aria-hidden":"true",className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" invisible fixed left-[-9999px] flex items-center gap-2 flex-nowrap",children:[r&&n.jsx("div",{className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:n.jsx(H,{...r,"data-clear-all":!0,className:"flex-shrink-0"})}),u.map(a=>n.jsx(B.Removable,{"data-chip-measure":!0,onClick:c=>c.preventDefault(),className:"flex-shrink-0 whitespace-nowrap",children:a.label},`m-${a.key}`))]}),Q&&!t&&n.jsxs("div",{style:{width:g},className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-y-0 right-0 flex items-center justify-end",children:[n.jsx("div",{style:{background:"linear-gradient(to right, rgba(0,0,0,0) 0%, var(--ax-surface-default) 55%)"},className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-0 pointer-events-none"}),n.jsx("div",{className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" relative flex items-center gap-2 pr-2 ",children:n.jsx(U,{content:"Vis alle aktive filtre",children:n.jsx(M,{onClick:()=>{s(!0),l.track(C.Generell.åpne_filter_chip_panel)},size:"small",variant:"tertiary","aria-label":"Vis flere filtre",icon:n.jsx(ce,{})})})})]}),t&&n.jsx("div",{className:f.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute top-0 right-0 pr-2 pt-0",children:n.jsx(U,{content:"Skjul aktive filtre",children:n.jsx(M,{ref:K,size:"small",variant:"tertiary","aria-label":"Skjul filtre",onClick:()=>{s(!1),l.track(C.Generell.lukk_filter_chip_panel)},icon:n.jsx(pe,{})})})})]})]})};fe.__docgenInfo={description:"",methods:[],displayName:"ValgteFiltre",props:{filtre:{defaultValue:{value:"[]",computed:!1},required:!1}}};export{fe as V};
