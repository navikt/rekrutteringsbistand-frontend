import{r as S,G as A,R as h,j as e,B as x,M as f,aw as w,Q as F,U as I,S as M,cG as N,u as R,d as b,cz as K,cO as C,cH as D,E as T}from"./iframe-k3RGaKPd.js";import{P as z,s as U}from"./PersonbrukerTekst-BR3WAK6r.js";import{B as j}from"./Box-BivCqWL2.js";import{S as $}from"./EyeSlash-DNIAta31.js";import{S as P}from"./ClockDashed-B9dbyvTm.js";import{U as V}from"./umamiEvents-CYDHrNFb.js";import{M as v}from"./Modal-DgdEZW2q.js";import{b as L}from"./useFormField-CBigW7mh.js";var G=function(t,r){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(t);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(t,a[l])&&(n[a[l]]=t[a[l]]);return n};const J=S.forwardRef((t,r)=>{var{title:n,titleId:a}=t,l=G(t,["title","titleId"]);let i=A();return i=n?a||"title-"+i:void 0,h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":i},l),n?h.createElement("title",{id:i},n):null,h.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.75 3.75V7.5a.75.75 0 0 1-1.5 0v-4c0-.69.56-1.25 1.25-1.25h9c.69 0 1.25.56 1.25 1.25v7a.75.75 0 0 1-1.5 0V3.75zm-1.75 7a.25.25 0 0 0-.25.25v9.25h12.5v-6.5H12a.75.75 0 0 1-.75-.75v-2a.25.25 0 0 0-.25-.25zM4.25 11c0-.966.784-1.75 1.75-1.75h5c.966 0 1.75.784 1.75 1.75v1.25h5.75c.69 0 1.25.56 1.25 1.25v7c0 .69-.56 1.25-1.25 1.25h-13c-.69 0-1.25-.56-1.25-1.25zM10 4.75a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))});function O(t){const r=()=>{if("fulltNavn"in t){if(t.fulltNavn&&t.fulltNavn.trim().length!==0)return t.fulltNavn.split(" ").map(a=>a.charAt(0).toUpperCase()).join("")}else if(t.fornavn&&t.etternavn&&t.fornavn.trim().length!==0&&t.etternavn.trim().length!==0)return t.fornavn.charAt(0).toUpperCase()+t.etternavn.charAt(0).toUpperCase();return""};return e.jsx(j.New,{borderRadius:"full",background:"neutral-moderate",className:"py-2.5 text-center",width:"40px",height:"40px",children:e.jsx(x,{textColor:"subtle",className:"text-sm",children:r()})})}O.__docgenInfo={description:"",methods:[],displayName:"IkonNavnAvatar"};function E(){return e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Oppdraget og annonsen"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx($,{"aria-hidden":!0})}),e.jsx(f,{size:"small",className:"m-0",children:"Oppdraget vises ikke lenger som åpent for søkere."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(J,{"aria-hidden":!0})}),e.jsx(f,{size:"small",className:"m-0",children:"Du kan fremdeles se detaljer om oppdraget."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(P,{"aria-hidden":!0})}),e.jsx(f,{size:"small",className:"m-0",children:"Du kan gjenåpne oppdraget hvis du vil gjøre noen endringer."})]})]})]})}E.__docgenInfo={description:"",methods:[],displayName:"FullførOppdragTekst"};function q({setVisModal:t}){const{stillingsData:r,erEier:n}=w(),{track:a}=F(),l=I(r,n);return e.jsx(M,{hooks:[l],children:i=>{const d=(i?.kandidater?.filter(s=>!s.arkivert)??[]).filter(s=>s.utfall===N.FATT_JOBBEN).map(s=>`${s.fornavn} ${s.etternavn}`)||[],o=i?.formidlingerAvUsynligKandidat?.filter(s=>s.utfall===N.FATT_JOBBEN).map(s=>`${s.fornavn} ${s.etternavn}`)||[],g=(d?.length||0)+(o?.length||0),p=i?.antallStillinger;return a(V.Stilling.åpne_fullfør_stilling_modal),e.jsx(H,{antallStillinger:p,antallKandidaterSomHarFåttJobb:g,onClose:t,kandidaterSomHarFåttJobb:d.concat(o),kandidatlisteId:i.kandidatlisteId})}})}function H({antallStillinger:t,antallKandidaterSomHarFåttJobb:r,kandidaterSomHarFåttJobb:n,onClose:a,kandidatlisteId:l}){const{valgtNavKontor:i,brukerData:m,visVarsel:d}=R(),{stillingsData:o,refetch:g,erEier:p}=w(),[s,k]=S.useState(!1),_=I(o,p),B=async c=>{k(!0);try{await U(c,K.Lukket),await C({...o,stilling:{...o.stilling,status:D.Stoppet}},{eierNavident:m.ident,eierNavn:m.navn,eierNavKontorEnhetId:i?.navKontor}),d({type:"success",tekst:"Du har nå fullført oppdraget."}),g?.(),await _.mutate()}catch(u){d({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new T({message:"Klarte ikke å fullføre oppdrag",error:u})}k(!1),a()};return e.jsxs(v,{width:600,open:!0,onClose:a,header:{heading:"Fullfør oppdraget"},children:[e.jsxs(v.Body,{children:[e.jsx(f,{className:"mb-3",children:r===0?"Ingen stillinger er besatt":`${r} av ${t} 
                  ${t===1?"stilling":"stillinger"} er
                  besatt.`}),r>5&&e.jsx(L,{header:"Disse jobbsøkerne er blitt ansatt",children:n?.map((c,u)=>e.jsx(y,{kandidat:c},u))}),r<=5&&n?.map((c,u)=>e.jsx(y,{kandidat:c},u)),e.jsxs(j.New,{borderRadius:"large",background:"neutral-soft",className:"p-5",children:[e.jsx(f,{className:"font-bold",children:"Dette skjer når du fullfører:"}),e.jsx(E,{}),r!==0&&e.jsx(z,{})]})]}),e.jsxs(v.Footer,{children:[e.jsx(b,{type:"button",disabled:s,onClick:()=>B(l),children:"Fullfør"}),e.jsx(b,{type:"button",variant:"secondary",onClick:a,children:"Avbryt"})]})]})}const y=({kandidat:t})=>e.jsx(j.New,{borderRadius:"large",background:"neutral-soft",className:"mb-2 p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{fulltNavn:t}),e.jsx(x,{children:t})]})});q.__docgenInfo={description:"",methods:[],displayName:"FullførStillingModal",props:{setVisModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{q as F};
