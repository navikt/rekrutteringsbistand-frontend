import{bg as B,K as F,dp as q,r as u,j as t,F as v,d as b,aA as N,p as M,de as C,bX as z,C as T,B as D}from"./iframe-DwwpuTFP.js";import{B as $}from"./Box-Dy8C-oQK.js";import{T as k}from"./TextField-BWONIbWb.js";import{S as K}from"./Plus-DYhB_CR9.js";import{a as h}from"./util-D_fvgQrs.js";import{C as O}from"./ComboboxProvider-BBEdAdNv.js";function I(){const{control:f,register:l,trigger:d,clearErrors:o,formState:{errors:y}}=B(),p=F(),{fields:r,append:g,remove:m}=q({control:f,name:"stilling.contactList"}),n=u.useRef(!1);return u.useEffect(()=>{if(!n.current){if(r.length===0){const i=p?.stillingsData?.stilling?.contactList??[];i.length>0?i.forEach(a=>g({name:a.name??"",title:a.title??"",email:a.email??"",phone:a.phone??""})):g({name:"",title:"",email:"",phone:""})}n.current=!0}},[]),t.jsxs("div",{className:"flex flex-col gap-4",children:[r.map((i,a)=>{const e=`stilling.contactList.${a}`,c=y?.stilling?.contactList?.[a]??{};return t.jsxs($.New,{background:"neutral-moderate",padding:"3",borderRadius:"large",className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"py-1 flex justify-between items-start",children:[t.jsxs(v,{className:"font-semibold",children:["Kontakt ",a+1]}),t.jsx(b,{size:"small",type:"button",variant:"tertiary",icon:t.jsx(N,{}),disabled:r.length===1,onClick:()=>m(a),title:"fjern",children:"Fjern"})]}),t.jsx(k,{label:"Navn",...l(`${e}.name`),error:c?.name?.message}),t.jsx(k,{label:"Tittel",...l(`${e}.title`),error:c?.title?.message}),t.jsx(v,{children:"Velg hvordan de kan nÃ¥s (minst en)"}),t.jsx(k,{label:"E-post",type:"email",...l(`${e}.email`,{onBlur:()=>{d(`${e}.email`)},onChange:()=>{o(`${e}.email`)}}),error:c?.email?.message}),t.jsx(k,{label:"Telefonnummer",type:"tel",inputMode:"tel",...l(`${e}.phone`,{onBlur:()=>{d(`${e}.phone`)},onChange:()=>{o(`${e}.phone`)}}),error:c?.phone?.message})]},i.id)}),t.jsx("div",{children:t.jsx(b,{type:"button",variant:"tertiary",icon:t.jsx(K,{}),size:"small",onClick:()=>g({name:"",title:"",email:"",phone:""}),children:"Legg til kontaktperson"})})]})}I.__docgenInfo={description:"",methods:[],displayName:"LeggTilKontaktperson"};const G=({lokasjoner:f,leggTilLokasjon:l,fjernLokasjonId:d})=>{const o=M(),[y,p]=u.useState([]),[r,g]=u.useState(""),[m,n]=u.useState(!1),i=f;u.useEffect(()=>{r.length>1&&p([...o.data?.filter(e=>e.type===C.KOMMUNE).filter(e=>e.navn.toLowerCase().includes(r.toLocaleLowerCase())).map(e=>`${h(e.navn)} (kommune)`)??[],...o.data?.filter(e=>e.type===C.FYLKE).filter(e=>e.navn.toLowerCase().includes(r.toLocaleLowerCase())).map(e=>`${h(e.navn)} (fylke)`)??[],...o.data?.filter(e=>e.type===C.LAND)?.filter(e=>e.navn.toLowerCase().includes(r.toLocaleLowerCase())).map(e=>`${h(e.navn)} (land)`)??[]])},[o.data,r]);const a=(e,c)=>{const w=e.match(/\(([^)]+)\)$/),x=w?w[1]:"",S=e.replace(/\s*\([^)]*\)$/,"").trim(),s=o.data?.filter(j=>j.type.toLowerCase()===x.toLowerCase()).find(j=>j.navn.toLowerCase()===S.toLowerCase());if(c&&s)l({address:s.lokasjon.adresse,postalCode:null,city:s.lokasjon.poststed,county:s.lokasjon.fylke,municipal:s.lokasjon.kommune,municipalCode:s.lokasjon.kommunenummer,country:s.lokasjon.land});else{const j=i.find(L=>{const P=s?.lokasjon.kommune&&L.municipal===s.lokasjon.kommune,E=s?.lokasjon.fylke&&L.county===s.lokasjon.fylke,V=s?.lokasjon.land&&L.country===s.lokasjon.land;return x.toLowerCase()==="kommune"?P:x.toLowerCase()==="fylke"?E:x.toLowerCase()==="land"?V:!1});j?.id&&d(j.id)}};return t.jsx(O,{isListOpen:m,disabled:o.isLoading,toggleListButton:!1,selectedOptions:i.map(e=>e.municipal?`${h(e.municipal)} (kommune)`:e.county?`${h(e.county)} (fylke)`:e.country?`${h(e.country)} (land)`:""),onChange:e=>{n(e.length>0),g(e)},onToggleSelected:(e,c)=>{a(e,c)},label:"",description:"Du kan velge flere kommuner, fylker eller land",options:y,isMultiSelect:!0})};G.__docgenInfo={description:"",methods:[],displayName:"VelgKommuneFylkeEllerLand",props:{lokasjoner:{required:!0,tsType:{name:"Array",elements:[{name:"GeografiDTOmedId"}],raw:"GeografiDTOmedId[]"},description:""},leggTilLokasjon:{required:!0,tsType:{name:"signature",type:"function",raw:"(lokasjon: GeografiDTO) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"LocationSchema"}],raw:"z.infer<typeof LocationSchema>"},name:"lokasjon"}],return:{name:"void"}}},description:""},fjernLokasjonId:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const _=({control:f,lokasjonsFelt:l,index:d,fjern:o,oppdaterPoststed:y,postSted:p})=>{const[r,g]=u.useState(""),m=z(r);return u.useEffect(()=>{if(!m.isLoading){const n=m.data?.korrigertNavnBy;m.data&&n&&n!==p&&y(m.data)}},[m,p,y,d]),t.jsx($.New,{background:"neutral-moderate",padding:"3",borderRadius:"large",children:t.jsxs("div",{children:[t.jsxs("div",{className:"py-3 flex justify-between",children:[t.jsxs(v,{children:["Adresse ",d+1]}),t.jsx("div",{children:t.jsx(b,{size:"small",type:"button",variant:"tertiary",icon:t.jsx(N,{}),onClick:()=>o(),title:"fjern",children:"Fjern"})})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(T,{name:`${l}.${d}.address`,control:f,render:({field:n})=>t.jsx(k,{label:"Gateadresse",...n,value:n.value||""})}),t.jsxs("div",{className:"flex flex-row gap-4 justify-baseline",children:[t.jsx("div",{className:"w-32",children:t.jsx(T,{name:`${l}.${d}.postalCode`,control:f,render:({field:n})=>t.jsx(k,{label:"Postnummer",type:"text",inputMode:"numeric",maxLength:4,...n,value:n.value||"",onChange:i=>{g(i.target.value);const a=i.target.value.replace(/\D/g,"");a.length<=4&&n.onChange(a)}})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(D,{weight:"semibold",children:"Poststed"}),t.jsx("div",{className:"mt-4",children:t.jsx(v,{children:p})})]})]})]})]})})};_.__docgenInfo={description:"",methods:[],displayName:"VelgPoststed",props:{control:{required:!0,tsType:{name:"Control",elements:[{name:"any"}],raw:"Control<any>"},description:""},lokasjonsFelt:{required:!0,tsType:{name:"string"},description:""},index:{required:!0,tsType:{name:"number"},description:""},fjern:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},oppdaterPoststed:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: PamPostdataDTO) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"PostdataSchema"}],raw:"z.infer<typeof PostdataSchema>"},name:"value"}],return:{name:"void"}}},description:""},postSted:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};export{I as L,_ as V,G as a};
