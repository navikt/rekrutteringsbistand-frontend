import{a as z,W as J,aM as W,o as K,c as H,l as h,T as n,U as Y,r as v,w as Q,j as e,S as X,u as Z,aL as j,e as R}from"./iframe-D0HnIaN5.js";import{u as A,a as m}from"./KandidaSokFilterContext-BOMNYTYg.js";import{u as F}from"./KandidatSøkMarkerteContext-DPHAc6Q9.js";import{K as ee}from"./KandidatKort-Dl5aOxkT.js";import{L as re}from"./LagreIKandidatlisteButton-C_ktCdHp.js";import{u as se}from"./usePamGeografi-Boo0PZFp.js";import"./kandidat.mock-BbyMcYLX.js";import{s as S,g as _,l as y}from"./fylkeOgKommuneMapping-CcekNe0U.js";import{L as te}from"./LagreIRekrutteringstreffButton-AxSe8sO1.js";import{R as ne}from"./RekrutteringstreffFeatureToggle-CH8C_0IV.js";import{S as I}from"./SideScroll-hK-KFEVx.js";import{S as ae}from"./SkeletonKort-CniCh97k.js";import{C as ie}from"./Checkbox-Q-9E9dgU.js";import{P as oe}from"./Pagination-DQGPPPwy.js";import{H as b,K as le}from"./KandidatSøkChips-SywL8WU9.js";import{V as de}from"./ValgteKontorer-8Z8JjVLZ.js";import{b as M,A as P,c as G,K as U,F as B,S as C,a as L,U as O,P as V,I as w}from"./Utdanningsnivå-D0jhSKg8.js";import{A as me}from"./AlleFilterKomponent-BbN1d1M8.js";import{T as E}from"./TilgangskontrollForInnhold-Csn_zn6S.js";const ce=K({kandidatnumre:h(n())}),pe=K({yrkeJobbonskerObj:h(K({styrkBeskrivelse:n().optional(),sokeTitler:h(n()).optional(),primaertJobbonske:Y().optional(),styrkKode:n().optional()})),etternavn:n(),postnummer:n(),arenaKandidatnr:n(),kommuneNavn:n(),geografiJobbonsker:h(K({geografiKodeTekst:n(),geografiKode:n()})),innsatsgruppe:n(),fornavn:n(),fodselsnummer:n(),poststed:n()}),ge=K({kandidater:h(pe),navigering:ce,antallTotalt:H()}),ue=(c,r=1,p="nyeste")=>`${J.internUrl}/kandidatsok/${c}?side=${r}&sortering=${p}`,fe=(c,r)=>{const{data:p,isLoading:k}=se(),l=!k,d=r.ønsketSted.flatMap(o=>{if(o.includes("(Kommune)")){const a=o.split("(Kommune)")[0].trim(),s=p?.find(i=>i.lokasjon.kommune?.toUpperCase()===a.toUpperCase());if(s){const i=S.get(_(s?.lokasjon.kommunenummer||"")),u=i?[...i.map(T=>y(T))]:[],t=`${a}.NO${s?.lokasjon.fylkesnummer}.${s?.lokasjon.kommunenummer}`;return[...u,t]}}if(o.includes("(Fylke)")){const a=o.split("(Fylke)")[0].trim(),s=p?.find(i=>i.lokasjon.fylke?.toUpperCase()===a.toUpperCase());if(s){const i=S.get(_(s?.lokasjon.fylkesnummer||"")),u=i?[...i.map(T=>y(T))]:[],t=`${a}.NO${s?.lokasjon.fylkesnummer}`;return[...u,t]}}return[]}),g={orgenhet:r.orgenhet,fritekst:r.fritekst,portefølje:r.portefølje,valgtKontor:r.valgtKontor,innsatsgruppe:r.innsatsgruppe,side:r.side,ønsketYrke:r.ønsketYrke,ønsketSted:d,borPåØnsketSted:r.borPåØnsketSted==="ja",kompetanse:r.kompetanse,førerkort:r.førerkort,prioritertMålgruppe:r.prioritertMålgruppe,hovedmål:r.hovedmål,utdanningsnivå:r.utdanningsnivå,arbeidserfaring:r.arbeidserfaring,ferskhet:r.ferskhet,språk:r.språk,sortering:r.sortering};return z(l?{url:ue(c,r.side,r.sortering),body:g}:null,o=>W(ge)(o))},xe=v.createContext(void 0),je=()=>{const c=v.useContext(xe);if(!c)throw new Q({message:"useKandidatNavigering must be used within a KandidatNavigeringProvider"});return c},D=({type:c,stillingsId:r,rekrutteringstreffId:p,alleredeLagtTilTreff:k,alleredeLagtTilKandidatliste:l})=>{const d=A(),g=fe(c,d),{setKandidatNavigering:o}=je(),a=v.useRef(null);v.useEffect(()=>{o(g.data?.navigering.kandidatnumre??[])},[g.data?.navigering,o]);const{markerteKandidater:s,setMarkertListe:i,fjernMarkerteKandidater:u}=F();return e.jsx(X,{hooks:[g],skeleton:e.jsx("div",{className:"mt-14",children:e.jsx(ae,{})}),children:t=>{const f=Math.ceil(t.antallTotalt/25),T=f>390?390:f,$=()=>{if(s&&s.length==t.kandidater.length)u();else if(t.kandidater){const N=t.kandidater.map(x=>x.arenaKandidatnr).filter(x=>x!=null&&x!=="");i(N)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:a,className:"flex items-center justify-between",children:[e.jsx("div",{className:"ml-5",children:e.jsx(ie,{checked:s&&s.length>0&&s.length===t.kandidater.length,onClick:$,children:"Marker alle på siden"})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[!p&&e.jsx(re,{stillingsId:r}),e.jsx(ne,{children:!r&&e.jsx(te,{rekrutteringstreffId:p,kandidatsokKandidater:t.kandidater})})]})]}),e.jsxs(I,{children:[e.jsx("div",{className:"flex flex-col gap-1 pt-2",children:t.kandidater?.map((N,x)=>e.jsx(ee,{stillingsId:r,alleredeLagtTil:l??k,kandidat:N},N.arenaKandidatnr||x))}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:["Viser ",t.antallTotalt," treff"]}),f>1&&e.jsx(oe,{className:"my-4 flex justify-center",size:"medium",page:d.side,onPageChange:d.setSide,count:T})]})]})]})}})};D.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkResultat",props:{type:{required:!0,tsType:{name:"KandidatSøkPortefølje"},description:""},stillingsId:{required:!1,tsType:{name:"string"},description:""},rekrutteringstreffId:{required:!1,tsType:{name:"string"},description:""},alleredeLagtTilTreff:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},alleredeLagtTilKandidatliste:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};function q(){return e.jsx("div",{className:"flex gap-4 ",children:e.jsx("div",{className:"block @[720px]:hidden",children:e.jsx("div",{className:"whitespace-nowrap",children:e.jsxs(me,{children:[e.jsx(M,{}),e.jsx(P,{}),e.jsx(G,{}),e.jsx(U,{}),e.jsx(B,{}),e.jsx(C,{}),e.jsx(L,{})," ",e.jsx(b,{})," ",e.jsx(O,{}),e.jsx(V,{}),e.jsx(w,{})]})})})})}q.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkFilter"};const ke=({stillingsId:c,rekrutteringstreffId:r,alleredeLagtTilTreff:p,alleredeLagtTilKandidatliste:k})=>{const{portefølje:l,setPortefølje:d}=A(),{valgtNavKontor:g,brukerData:o}=Z(),a="tab-ellipsis",s=()=>e.jsx(R,{variant:l===m.MINE_BRUKERE?"primary":"tertiary",onClick:()=>d(m.MINE_BRUKERE),size:"xsmall",className:a,title:"Mine brukere","aria-label":"Mine brukere",children:"Mine"}),i=()=>g?e.jsx(E,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET,j.AD_GRUPPE_REKRUTTERINGSBISTAND_JOBBSOKERRETTET],children:e.jsx(R,{variant:l===m.MITT_KONTOR?"primary":"tertiary",onClick:()=>d(m.MITT_KONTOR),size:"xsmall",className:a,title:"Mitt kontor","aria-label":"Mitt kontor",children:"Mitt kontor"})}):null,u=()=>o?.enheter&&o.enheter.length>1?e.jsx(E,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET,j.AD_GRUPPE_REKRUTTERINGSBISTAND_JOBBSOKERRETTET],children:e.jsx(R,{variant:l===m.MINE_KONTORER?"primary":"tertiary",onClick:()=>d(m.MINE_KONTORER),size:"xsmall",className:a,title:"Mine kontorer","aria-label":"Mine kontorer",children:"Mine kontorer"})}):null,t=()=>e.jsx(E,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:e.jsx(R,{variant:l===m.ALLE?"primary":"tertiary",onClick:()=>d(m.ALLE),size:"xsmall",className:a,title:"Alle kontorer","aria-label":"Alle kontorer",children:"Alle"})}),f=()=>e.jsx(E,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:e.jsx(R,{variant:l===m.VALGTE_KONTORER?"primary":"tertiary",onClick:()=>d(m.VALGTE_KONTORER),size:"xsmall",className:a,title:"Valgte kontorer","aria-label":"Valgte kontorer",children:"Velg kontor"})});return e.jsxs("div",{className:"@container",children:[e.jsxs("div",{className:"flex justify-between flex-col @3xl:flex-row @3xl:gap-0 gap-3 ",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(t,{}),e.jsx(s,{}),e.jsx(i,{}),e.jsx(u,{}),e.jsx(E,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:e.jsx(f,{})})]}),e.jsx(q,{})]}),l===m.VALGTE_KONTORER&&e.jsx(de,{}),e.jsx(le,{}),e.jsxs("div",{className:"@container/kandidatsøk flex",children:[e.jsx("div",{className:"flex-grow min-w-0",children:e.jsx(D,{alleredeLagtTilTreff:p,alleredeLagtTilKandidatliste:k,type:l,stillingsId:c,rekrutteringstreffId:r})}),e.jsxs("div",{className:"hidden @[720px]:block ml-4 pt-4  max-w-[200px]",children:[e.jsx(M,{}),e.jsx(I,{className:"mt-4",children:e.jsxs("div",{className:"flex flex-col gap-4 ",children:[e.jsx(P,{}),e.jsx(G,{}),e.jsx(U,{}),e.jsx(B,{}),e.jsx(C,{}),e.jsx(L,{}),e.jsx(b,{}),e.jsx(O,{}),e.jsx(V,{}),e.jsx(w,{})]})})]})]})]})};ke.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkTabs",props:{stillingsId:{required:!1,tsType:{name:"string"},description:""},rekrutteringstreffId:{required:!1,tsType:{name:"string"},description:""},alleredeLagtTilTreff:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},alleredeLagtTilKandidatliste:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};export{ke as K};
