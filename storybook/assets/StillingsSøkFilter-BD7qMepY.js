import{j as a,o as b,a as f,I as e,X as R,Y as C,J as B,d as E,he as ht,u as J,r as D,gI as W,b as H,e as ft}from"./iframe-DUxtTNxK.js";import{u as w,h as pt,v as z,S as kt,I as St}from"./StillingsSøkNavigasjon-AXeiknw6.js";import{P as bt}from"./Pagination-DZNxHrTd.js";import{L as yt,u as $,M as Et}from"./MittStandardsøk-BJkfKajl.js";import{u as G,G as T}from"./usePamGeografi-MCcy27U9.js";import{a as L,d as V}from"./util-DOP1jEkD.js";import{F as _t}from"./FilterChip-DK95LyXv.js";import{T as vt}from"./TømFiltre-DRUC_je7.js";import{C as I}from"./Chips-C6rbDzFC.js";import"./mockStillingssøk-Bb9leAHW.js";import{s as Ct,a as jt,f as xt,b as Nt,n as Q}from"./fylkeOgKommuneMapping-CcekNe0U.js";import{S as N}from"./stilling-typer-DLlwa7NU.js";import{a as M}from"./stillingssøk-typer-BUxO0bdC.js";import{V as v}from"./stillingInfoUtil-C2V4vZ-Z.js";import{L as Dt,a as Ft}from"./stilling.dto-Bw9Mbzio.js";import{u as At}from"./index-FAu4VCGm.js";import{a as O,C as K}from"./Checkbox-Odq9MjXC.js";import{S as Tt}from"./SWRLaster-ahx2Fy0D.js";import{R as It,a as U}from"./Radio-CbYFib6g.js";import{S as Rt}from"./Search-D2wB569L.js";import{B as X}from"./Box-Cboms74W.js";import{S as Z}from"./MagnifyingGlass-DcFLdfke.js";import{A as wt}from"./AlleFilterKomponent-BUKiKz61.js";const P=20,Lt=(s,t)=>s*t-t;class tt{addFilter(t,l){if(typeof t=="string"&&l!==void 0)this.filterClauses.push({term:{[t]:l}});else{const n=t;Array.isArray(n)?this.filterClauses.push(...n):n&&this.filterClauses.push(n)}return this}addMust(t,l){if(typeof t=="string"&&l!==void 0)this.mustClauses.push({term:{[t]:l}});else{const n=t;Array.isArray(n)?this.mustClauses.push(...n):n&&this.mustClauses.push(n)}return this}addShould(t,l){if(typeof t=="string"&&l!==void 0)this.shouldClauses.push({term:{[t]:l}});else{const n=t;Array.isArray(n)?this.shouldClauses.push(...n):n&&this.shouldClauses.push(n)}return this}addMustNot(t,l){if(typeof t=="string"&&l!==void 0)this.mustNotClauses.push({term:{[t]:l}});else{const n=t;Array.isArray(n)?this.mustNotClauses.push(...n):n&&this.mustNotClauses.push(n)}return this}addExists(t){return this.filterClauses.push({exists:{field:t}}),this}addRange(t,l){return this.filterClauses.push({range:{[t]:l}}),this}addBoolFilter(t){return this.filterClauses.push({bool:t}),this}setMinimumShouldMatch(t){return this.minimumShouldMatch=t,this}addSimpleQueryString(t,l,n="and"){return t&&t.length>0&&this.shouldClauses.push({simple_query_string:{query:t,fields:l,default_operator:n}}),this}addFritekstSøk(t,l){if(!t||t.length<1)return this;const n=[];return l==="tekstfelter"?n.push("stilling.adtext_no^0.5","stilling.tittel","stilling.employer.name","stilling.properties.jobtitle","stilling.properties.arbeidsplassenoccupation","stilling.properties.keywords"):n.push("stilling.adtext_no^0.5","stilling.tittel","stilling.annonsenr","stilling.employer.name","stilling.employer.orgnr","stilling.properties.jobtitle","stilling.properties.arbeidsplassenoccupation","stilling.properties.keywords"),this.shouldClauses.push({simple_query_string:{query:t,fields:n,default_operator:"and"}}),this}setSorting(t){return this.sorting=t,this}setAggregations(t){return this.aggregations=t,this}setPostFilter(t){return this.postFilterClause=t,this}buildStandardAggregation(t,l,n,r){const o=this.buildFilters(),u=new Set(["stilling.administration.navIdent","stillingsinfo.eierNavident","stillingsinfo.eierNavKontorEnhetId"]),h=i=>{if(!i)return i;if(i.term&&typeof i.term=="object"){const d=Object.keys(i.term)[0];return u.has(d)?null:i}if(i.exists&&i.exists.field==="stillingsinfo")return null;if(i.bool&&typeof i.bool=="object"){const d=i.bool,p=["filter","must","should","must_not"],y={};return(()=>{if(!Array.isArray(d.must))return!1;const g=d.must.some(A=>A.term&&A.term["stilling.administration.status"]==="DONE"),c=d.must.some(A=>A.exists&&A.exists.field==="stilling.publishedByAdmin"),x=d.must.some(A=>A.range&&A.range["stilling.published"]),ct=Array.isArray(d.must_not)&&d.must_not.some(A=>A.term&&(A.term["stilling.status"]==="REJECTED"||A.term["stilling.status"]==="DELETED"));return g&&c&&x&&ct})()||(p.forEach(g=>{if(Array.isArray(d[g])){const c=d[g].map(x=>h(x)).filter(x=>!!x);c.length>0&&(y[g]=c)}}),d.minimum_should_match&&y.should&&(y.minimum_should_match=d.minimum_should_match),Object.keys(y).length===0)?null:{bool:y}}return i},k=i=>{if(!i||Object.keys(i).length===0)return i;const d={};return["filter","must","should","must_not"].forEach(p=>{if(Array.isArray(i[p])){const y=i[p].map(F=>h(F)).filter(F=>!!F);y.length>0&&(d[p]=y)}}),i.minimum_should_match&&d.should&&(d.minimum_should_match=i.minimum_should_match),d},m=r?.includePortfolioInCounts?o:k(o),S=i=>{if(!i||Object.keys(i).length===0)return i;const d={},p=y=>{if(!Array.isArray(y))return!1;let F=!1,g=!1,c=!1;for(const x of y)if(x?.term&&x.term["stilling.administration.status"]==="DONE")F=!0;else if(x?.exists?.field==="stilling.publishedByAdmin")g=!0;else if(x?.range&&x.range["stilling.published"])c=!0;else return!1;return F&&g&&c&&y.length===3};return["filter","must","should","must_not"].forEach(y=>{if(Array.isArray(i[y])){const F=i[y].map(g=>{if(g&&g.term&&g.term["stilling.status"]||g&&g.terms&&g.terms["stilling.status"])return null;if(g&&g.bool){const c=S(g.bool);return c&&Object.keys(c).length===1&&c.must&&p(c.must)||Object.keys(c).length===0?null:{bool:c}}return g}).filter(g=>!!g);F.length>0&&(d[y]=F)}}),i.minimum_should_match&&d.should&&(d.minimum_should_match=i.minimum_should_match),d},_=S(m),j=this.postFilterClause&&typeof this.postFilterClause=="object"&&JSON.stringify(this.postFilterClause).includes('"stilling.status"')?this.postFilterClause:null;return{globalAggregering:{global:{},aggs:{visningsstatus:{filter:{bool:{filter:[..._&&Object.keys(_).length>0?[{bool:_}]:[]]}},aggs:{koder:{filters:{filters:{"Ikke publisert":{bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Åpen for søkere":{bool:{must:[{term:{"stilling.status":"ACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Stengt for søkere":{bool:{must:[{term:{"stilling.status":"INACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Utløpt - Stengt for søkere":{bool:{must:[{term:{"stilling.status":"INACTIVE"}},{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},Fullført:{bool:{must:[{term:{"stilling.status":"STOPPED"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},Avbrutt:{bool:{must:[{term:{"stilling.status":"DELETED"}}]}}}}}}},kategori:{filters:{filters:{stilling:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[],{bool:{must_not:[{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}},{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}}]}}]}},jobbmesse:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[],{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}]}}}}},stillingskategori:{filter:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[]]}},aggs:{koder:{terms:{field:"stillingsinfo.stillingskategori",size:20,order:{_key:"asc"}}}}},geografi:{filter:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[],...j?[j]:[]]}},aggs:{nested_geografi:{nested:{path:"stilling.locations"},aggs:{fylker:{terms:{field:"stilling.locations.countyCode",size:50,order:{_key:"asc"}},aggs:{stillinger:{reverse_nested:{},aggs:{unique_count:{cardinality:{field:"stilling.uuid"}}}}}},kommuner:{terms:{field:"stilling.locations.municipalCode",size:200,order:{_key:"asc"}}},utenCountyCode:{filter:{bool:{should:[{bool:{must_not:[{exists:{field:"stilling.locations.countyCode"}}]}},{term:{"stilling.locations.countyCode":""}}],minimum_should_match:1}},aggs:{fylker:{terms:{field:"stilling.locations.county.keyword",size:20,order:{_key:"asc"}},aggs:{stillinger:{reverse_nested:{},aggs:{unique_count:{cardinality:{field:"stilling.uuid"}}}}}}}}}}}}}}}}setStandardAggregation(t,l,n,r){const o=n&&n.length>0?n.join(" "):void 0,u=this.buildStandardAggregation(t,l,o,r);return this.aggregations={...this.aggregations,...u},this}buildFilters(){const t={};return this.filterClauses.length>0&&(t.filter=this.filterClauses),this.mustClauses.length>0&&(t.must=this.mustClauses),this.shouldClauses.length>0&&(t.should=this.shouldClauses,this.minimumShouldMatch!==void 0?t.minimum_should_match=this.minimumShouldMatch:this.mustClauses.length===0&&this.filterClauses.length===0&&(t.minimum_should_match=1)),this.mustNotClauses.length>0&&(t.must_not=this.mustNotClauses),t}build(t=P,l=0){const n=this.buildFilters(),r={size:t,from:l,track_total_hits:!0};return Object.keys(n).length>0?r.query={bool:n}:r.query={match_all:{}},this.sorting&&this.sorting.length>0&&(r.sort=this.sorting.length===1?this.sorting[0]:this.sorting),Object.keys(this.aggregations).length>0&&(r.aggs=this.aggregations),this.postFilterClause&&(r.post_filter=this.postFilterClause),r}constructor(){this.filterClauses=[],this.mustClauses=[],this.shouldClauses=[],this.mustNotClauses=[],this.sorting=[],this.aggregations={},this.postFilterClause=null}}const Bt=({totaltAntallTreff:s})=>{const t=w(),l=Kt(s,P);return l<=1?null:a.jsx(bt,{size:"small",className:"my-4 flex justify-center",page:t.side,count:l,onPageChange:n=>t.setSide(n)})},Kt=(s,t)=>{const l=Math.ceil(s/t),r=1e4/40-1;return Math.min(l,r)};Bt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};const Mt=({skjulLagreStandard:s})=>{const t=w(),l=G();function n(r){if(r.length===2){const o=l.data?.filter(u=>u.type===T.FYLKE).find(u=>u.lokasjon.fylkesnummer===r);return o?o.navn:""}else{const o=l.data?.filter(u=>u.type===T.KOMMUNE).find(u=>u.lokasjon.kommunenummer===r);return o?o.navn:""}}return a.jsx("div",{className:"relative w-full mt-3",children:a.jsx(I,{size:"small",children:a.jsxs("div",{className:"flex flex-row flex-wrap gap-2  pb-2",children:[Object.values(t).some(r=>Array.isArray(r)&&r.length>0)&&a.jsx(vt,{fjernFritekst:()=>t.setFritekstListe([])}),t.fritekst&&a.jsx(_t,{type:t.fritekst,setVerdi:t.setFritekstListe}),t.statuser.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setStatuser(t.statuser.filter(u=>u!==r)),children:L(r)},o)),t.inkludering.map((r,o)=>{const u=pt.find(k=>k.hovedtag===r),h=t.inkluderingUnderkategori.filter(k=>u?.subtags.includes(k));return h.length>0?h.map((k,m)=>a.jsx(I.Removable,{onClick:()=>t.setInkluderingUnderkategori(t.inkludering.filter(S=>S!==r)),children:z[k]},m)):a.jsx(I.Removable,{onClick:()=>t.setInkludering(t.inkludering.filter(k=>k!==r)),children:z[r]},o)}),t.publisert.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setPublisert(t.publisert.filter(u=>u!==r)),children:L(r)},o)),t.kategori.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setKategori(t.kategori.filter(u=>u!==r)),children:L(r)},o)),t.fylker.map((r,o)=>a.jsx(I.Removable,{onClick:()=>{t.setFylker(t.fylker.filter(u=>u!==r))},children:L(n(r))},o)),t.kommuner.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setKommuner(t.kommuner.filter(u=>u!==r)),children:L(n(r))},o)),!s&&a.jsx(yt,{})]})})})};Mt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips",props:{skjulLagreStandard:{required:!0,tsType:{name:"boolean"},description:""}}};function Ot(s,t){const l={...s||{}},n=t?.aggs||t?.aggregations||{},r={...l,aggs:n};return r.track_total_hits===void 0&&(r.track_total_hits=!0),r}const et=(s,t)=>{const l=s.filter.fritekst,n=l.some(h=>/^R?\d+$/.test(h)),r=["innen","på","av","og","for","med","som","mv.","o.l."],o=l.map(h=>`(+${h.split(" ").filter(m=>m.length>1&&!r.includes(m.toLowerCase())).map(m=>m.trim()).join(" +")})`).join(" | ");let u;n||(u="tekstfelter"),o&&o.length>0&&t.addFritekstSøk(o,u).setMinimumShouldMatch(l.length?"1":"0")},st=(s,t)=>{if(s.geografiData&&s.filter.fylker?.length>0||s.filter.kommuner?.length>0){const l=s.geografiData?.filter(i=>i.type===T.FYLKE).filter(i=>i.lokasjon.fylkesnummer&&s.filter?.fylker.includes(i.lokasjon.fylkesnummer))??[],n=s.geografiData?.filter(i=>i.type===T.KOMMUNE).filter(i=>i.lokasjon.kommunenummer&&s.filter?.kommuner.includes(i.lokasjon.kommunenummer))??[],r=l.filter(i=>i.type===T.FYLKE&&i.lokasjon.fylkesnummer&&!n.some(d=>d.lokasjon.fylkesnummer===i.lokasjon.fylkesnummer)).flatMap(i=>s.geografiData?.filter(d=>d.lokasjon.fylkesnummer===i.lokasjon.fylkesnummer&&d.type===T.KOMMUNE)??[]),u=[...l.filter(i=>i.lokasjon.fylkesnummer&&!n.some(d=>d.lokasjon.fylkesnummer===i.lokasjon.fylkesnummer)),...n,...r],h=u.filter(i=>i.type===T.FYLKE);if(u.filter(i=>i.type===T.FYLKE).length===0&&u.filter(i=>i.type===T.KOMMUNE).length===0)return;const m=u.filter(i=>i.type===T.KOMMUNE).flatMap(i=>{const d=i.lokasjon.kommunenummer&&Ct.get(i.lokasjon.kommunenummer)?.map(p=>p.nummer);return[i.lokasjon.kommunenummer,...d||[]]}),S=new Set([...h].flatMap(i=>{const d=jt.get(xt(i.navn))?.map(p=>p.navn.toUpperCase())||[];return[i.navn,...d]})),_=S.size===0?[]:[{terms:{"stilling.locations.county.keyword":Array.from(S).map(i=>i.toUpperCase())}}],j=m.length===0?[]:[{terms:{"stilling.locations.municipalCode":m}}];t.addFilter({nested:{path:"stilling.locations",query:{bool:{should:[..._,...j],minimum_should_match:1}}}})}},it=(s,t)=>{s.filter.inkludering&&s.filter.inkludering.length>0&&t.addFilter({terms:{"stilling.properties.tags":s.filter.inkludering}})},lt=(s,t)=>{const l=s.filter.kategori;l.includes(N.Jobbmesse)&&t.addBoolFilter({should:[{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}],minimum_should_match:1}),l.includes(N.Stilling)&&!l.includes(N.Jobbmesse)&&t.addBoolFilter({must_not:[{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}},{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}]})},nt=(s,t)=>{s.formidlinger?t.addMust("stillingsinfo.stillingskategori","FORMIDLING"):t.addBoolFilter({must_not:[{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}},{term:{"stillingsinfo.stillingskategori":"FORMIDLING"}}]}),s.filter.portefølje===M.INTERN?(t.addFilter({exists:{field:"stillingsinfo"}}),t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}]})):s.filter.portefølje===M.VIS_MINE?s.navIdent&&(s.filter.visAvbryt||t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}),t.addBoolFilter({should:[{term:{"stilling.administration.navIdent":s.navIdent}},{term:{"stillingsinfo.eierNavident":s.navIdent}}],minimum_should_match:1})):s.filter.portefølje===M.MITT_KONTOR?(s.eierNavKontorEnhetId&&t.addFilter({term:{"stillingsinfo.eierNavKontorEnhetId":s.eierNavKontorEnhetId}}),t.addBoolFilter({must_not:[{bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}}]}},{term:{"stilling.status":"DELETED"}}]})):s.filter.portefølje===M.ARBEIDSPLASSEN_NO&&(t.addFilter({term:{"stilling.privacy":"SHOW_ALL"}}),t.addBoolFilter({must_not:[{term:{"stilling.source":"DIR"}}]}),s.filter.utenOppdrag?t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}]}):t.addFilter({exists:{field:"stillingsinfo"}}))},Pt=(s,t)=>{const l=s.filter.sortering,n={publisert:[{"stilling.published":{order:"desc"}}],utløpsdato:[{"stilling.expires":{order:"asc"}}],relevans:[]},o=n[l||"publisert"]||n.publisert;o&&o.length>0&&t.setSorting(o)},Jt=()=>[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],Vt=s=>{s.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:Jt()})},rt=(s,t)=>{const l=s.filter.statuser,n=l.length===0,r=l.length===Object.values(v).length;if(s.navIdent||Vt(t),n||r)return;const o=[];l.includes(v.ApenForSokere)&&o.push({bool:{must:[{term:{"stilling.status":"ACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),l.includes(v.Fullfort)&&o.push({bool:{must:[{term:{"stilling.status":"STOPPED"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),l.includes(v.UtloptStengtForSokere)&&o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}},{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),l.includes(v.StengtForSokere)&&o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),l.includes(v.IkkePublisert)&&o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),l.includes(v.Slettet)&&o.push({term:{"stilling.status":"DELETED"}}),s.navIdent&&o.length>0&&(l.includes(v.IkkePublisert)||o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),l.includes(v.Slettet)||o.push({term:{"stilling.status":"DELETED"}})),o.length>0&&t.setPostFilter({bool:{should:o,minimum_should_match:1}})};function Ut(s){const t=new tt;nt(s,t),et(s,t),rt(s,t),lt(s,t),st(s,t),Pt(s,t),(s.filter.inkludering.length>0||s.filter.inkluderingUnderkategori.length>0)&&t.addFilter(it(s,t));const l=Lt(s.filter.side,P);return t.build(P,l)}function Gt(s){const t=new tt;return nt(s,t),et(s,t),rt(s,t),lt(s,t),st(s,t),(s.filter.inkludering.length>0||s.filter.inkluderingUnderkategori.length>0)&&t.addFilter(it(s,t)),t.setStandardAggregation(s.navIdent,s.eierNavKontorEnhetId,s.filter.fritekst,{formidlinger:s.formidlinger,utenOppdrag:s.filter.utenOppdrag,includePortfolioInCounts:!0}),t.build(0,0)}const qt=b({label:e(),score:f()}),zt=b({konseptId:f(),label:e(),styrk08:e()}),Qt=b({adtext:e().nullish(),sourceurl:e().nullish(),applicationdue:e().nullish(),applicationemail:e().nullish(),applicationmail:e().nullish(),applicationlabel:C([e(),f()]).nullish(),applicationurl:e().nullish(),employer:e().nullish(),employerdescription:C([e(),f()]).nullish(),employerhomepage:e().nullish(),engagementtype:e().nullish(),extent:e().nullish(),occupation:e().nullish(),positioncount:f().nullish(),salary:f().nullish(),starttime:e().nullish(),role:e().nullish(),sector:e().nullish(),location:e().nullish(),externalref:C([e(),f()]).nullish(),jobtitle:e().nullish(),keywords:e().nullish().nullable(),sourcecreated:e().nullish(),sourceupdated:e().nullish(),logomain:e().nullish(),logolisting:e().nullish(),author:e().nullish(),address:C([e(),f()]).nullish(),industry:e().nullish(),nace2:R().nullish(),searchtags:E(qt).nullish(),searchtagsai:E(e()).nullish(),classification_styrk08_score:f().nullish(),classification_input_source:e().nullish(),classification_styrk08_code:C([f(),e()]).nullish(),classification_esco_code:e().nullish(),categories:E(R()).nullish(),euresflagg:C([e(),B()]).nullish(),hasInterestform:C([e(),B(),f()]).nullish(),remote:e().nullish(),workLanguage:C([e(),E(e())]).nullish(),finnSource:e().nullish(),adtextFormat:e().nullish(),tags:E(e()).nullish(),ontologyJobtitle:zt.nullish(),workschedule:C([e(),E(e())]).nullish(),workhours:C([e(),E(e())]).nullish(),workday:C([e(),E(e())]).nullish(),facebookpage:e().nullish(),contactperson:e().nullish(),contactpersontitle:e().nullish(),contactpersonemail:e().nullish(),contactpersonphone:e().nullish(),linkedinpage:e().nullish(),jobpercentage:C([e(),f()]).nullish(),jobpercentagerange:e().nullish(),jobarrangement:e().nullish(),twitteraddress:e().nullish(),admintags:e().nullish(),arbeidsplassenoccupation:e().nullish(),needDriversLicense:B().nullish(),experience:e().nullish(),copyOfExistingAd:e().nullish(),under18:e().nullish(),education:E(e()).nullish(),certificate:e().nullish(),expertise:e().nullish(),practice:e().nullish(),hardrequirements:R().nullish(),softrequirements:R().nullish(),personalattributes:R().nullish(),_approvedby:e().nullish(),_noorgnr:C([e(),B()]).nullish(),_providerid:C([e(),f()]).nullish(),_versionid:f().nullish(),_score:R().nullish(),_scoretotal:f().nullish()}),Yt=b({name:e(),role:e(),title:e(),email:e(),phone:e()}),Wt=b({status:e(),remarks:E(e()),comments:e(),reportee:e(),navIdent:e()}),Ht=b({name:e(),publicName:e(),orgnr:e().nullable(),parentOrgnr:e().nullable(),orgform:e()}),$t=b({styrkCode:e(),name:e()}),Xt=b({tittel:e(),uuid:e(),annonsenr:e().nullable(),status:e(),privacy:e(),published:e().nullable(),publishedByAdmin:e().nullable(),expires:e().nullable(),created:e(),updated:e(),employer:Ht.optional().nullable(),categories:E($t),source:e(),medium:e(),businessName:e().nullable(),locations:E(Dt),reference:e(),administration:Wt.optional(),properties:Qt.optional(),contacts:E(Yt)}),Zt=b({stilling:Xt,stillingsinfo:Ft.optional().nullable()}),te=b({total:f(),successful:f(),skipped:f(),failed:f()}),ee=b({value:f(),relation:e()}),se=b({_index:e(),_type:e(),_id:e(),_score:R(),_source:Zt,sort:E(f())}),ie=b({total:ee,max_score:R(),hits:E(se)}),le=b({took:f(),timed_out:B(),_shards:te,hits:ie}),ne=le.pick({hits:!0}),re=b({visningsStatusBuckets:E(b({key:e(),count:f()})).optional(),kategoriBuckets:b({stilling:f().optional(),jobbmesse:f().optional()}).optional(),geografi:b({fylker:E(b({key:e(),count:f()})).optional(),kommuner:E(b({key:e(),count:f()})).optional()}).optional()}),oe=b({hits:ne.shape.hits,antall:re,tookTreff:f().optional().nullable(),tookAggs:f().optional().nullable()}),ae=`${ht.internUrl}`,q=({filter:s,eierNavKontorEnhetId:t,navIdent:l,formidlinger:n,finnStillingerForKandidat:r})=>{const o=G(),u=Ut({filter:s,eierNavKontorEnhetId:t,navIdent:l,geografiData:o.data,formidlinger:n}),h=Gt({filter:{...s,side:1},eierNavKontorEnhetId:t,navIdent:l,geografiData:o.data,formidlinger:n}),k=Ot(u,h);return At(o.isLoading?null:{url:ae,body:k},async S=>{const _=await fetch(S.url,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(S.body)});if(!_.ok)throw new Error("Feil ved stillingssøk");const j=await _.json(),i=oe.safeParse(j);return i.success?i.data:j})},ot=({geografi:s,hideLegend:t})=>{const l=w(),{fylker:n,setFylker:r,kommuner:o,setKommuner:u}=l,{brukerData:{ident:h},valgtNavKontor:k}=J(),m=q({filter:l,eierNavKontorEnhetId:k?.navKontor,navIdent:h,formidlinger:l.formidlinger}),S=m.data?.antall?.geografi?.fylker||[],_=m.data?.antall?.geografi?.kommuner||[],j=Nt(_),i=m.isLoading||m.isValidating,d=g=>i?"-":g?S.find(c=>String(c.key)===String(g))?.count??0:0,p=g=>i?"-":g?j.find(c=>Q(c.key)===Q(g))?.count??0:0,y=g=>d(g),F=s?.filter(g=>g.type===T.FYLKE)?.map(g=>({...g,kommuner:s?.filter(c=>c.type===T.KOMMUNE)?.filter(c=>g.lokasjon.fylkesnummer===c.lokasjon.fylkesnummer).sort((c,x)=>c.navn.localeCompare(x.navn))})).sort((g,c)=>g.navn.localeCompare(c.navn));return a.jsx(O,{size:"small",hideLegend:t,legend:"Område",value:n||[],onChange:r,children:F?.map(g=>a.jsxs(D.Fragment,{children:[a.jsxs(K,{value:g.lokasjon.fylkesnummer,children:[V(g.navn)," (",y(g.lokasjon.fylkesnummer),")"]}),g.lokasjon.fylkesnummer&&n.includes(g.lokasjon.fylkesnummer)&&g.kommuner&&g.kommuner.length>1&&a.jsx(O,{className:"ml-4",onChange:u,hideLegend:!0,legend:`Velg kommuner i ${V(g.navn)}`,value:o||[],children:g.kommuner.map(c=>a.jsxs(K,{value:c.lokasjon.kommunenummer,children:[V(c.navn)," (",p(c.lokasjon.kommunenummer),")"]},c.lokasjon.kommunenummer))})]},g.lokasjon.fylkesnummer))})};ot.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function at({hideLegend:s}){const t=G();return a.jsx(Tt,{hooks:[t],children:l=>a.jsx(ot,{geografi:l,hideLegend:s})})}at.__docgenInfo={description:"",methods:[],displayName:"GeografiFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const Y=s=>{switch(s){case N.Stilling:return"Stilling";case N.Jobbmesse:return"Jobbmesse";default:return""}};function ut({hideLegend:s}){const t=w(),{kategori:l,setKategori:n}=t,{brukerData:r,valgtNavKontor:o}=J(),u=q({filter:t,eierNavKontorEnhetId:o?.navKontor,navIdent:r?.ident,formidlinger:t.formidlinger}),h=u.data?.antall?.kategoriBuckets,k=u.isLoading||u.isValidating,m=S=>{if(k)return"-";if(h){if(S===N.Stilling)return h.stilling||0;if(S===N.Jobbmesse)return h.jobbmesse||0}return 0};return a.jsxs(O,{hideLegend:s,size:"small",legend:"Kategori",value:l,onChange:n,children:[a.jsxs(K,{value:N.Stilling,children:[Y(N.Stilling)," (",m(N.Stilling),")"]}),a.jsxs(K,{value:N.Jobbmesse,children:[Y(N.Jobbmesse)," (",m(N.Jobbmesse),")"]})]})}ut.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function dt({hideLegend:s}){const t=w(),{statuser:l,setStatuser:n}=t,{brukerData:{ident:r},valgtNavKontor:o}=J(),u=q({filter:t,eierNavKontorEnhetId:o?.navKontor,navIdent:r,formidlinger:t.formidlinger}),h=D.useRef(0),k=u.data?.antall?.visningsStatusBuckets||[],m=u.isLoading||u.isValidating,S=i=>m?"-":k.find(d=>d.key===i)?.count??0,_=i=>{const d=l||[];d.includes(i)?n(d.filter(p=>p!==i)):n([...d,i])},j=[v.ApenForSokere,v.StengtForSokere,v.UtloptStengtForSokere,v.Fullfort];return D.useEffect(()=>{h.current<1&&!t.formidlinger&&!m&&(l?.length??0)===0&&(n([v.ApenForSokere]),h.current=h.current+1)},[m,l,n,t.formidlinger]),a.jsx(O,{legend:s?void 0:"Status",size:"small",children:a.jsx("div",{className:"flex flex-col gap-2",children:j.map(i=>{const d=!!l?.includes(i),p=i===v.UtloptStengtForSokere?"Utløpt":i;return a.jsxs(K,{checked:d,onChange:()=>_(i),value:i,disabled:m,size:"small",children:[p," (",S(i),")"]},i)})})})}dt.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function gt({hideLegend:s}){const t=w(),l=n=>{t.setSortering(n)};return a.jsxs(It,{size:"small",hideLegend:s,legend:"Sorter",value:t.sortering,onChange:l,className:"pb-2",children:[a.jsx(U,{value:"publiseringsdato",children:"Publiseringsdato"}),a.jsx(U,{value:"utløpsdato",children:"Utløpsdato"}),a.jsx(U,{value:"mestRelevant",children:"Mest relevant"})]})}gt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function mt({alltidÅpen:s}){const{fritekst:t,setFritekstListe:l}=w(),[n,r]=D.useState(""),[o,u]=D.useState(!1),[h,k]=D.useState(!1),m=$(),S=D.useRef(null),_=D.useRef(null),j=W(),i=()=>{u(!1),k(!1),j.push("/stilling?brukStandardsok=true")},d=()=>{if(n.trim()){const p=[...t,n];l(p),r("")}u(!1),k(!1)};return D.useEffect(()=>{!s&&h&&_.current&&_.current.focus()},[s,h]),D.useEffect(()=>{const p=y=>{S.current&&!S.current.contains(y.target)&&u(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]),a.jsxs("div",{className:"relative",ref:S,children:[a.jsx(Rt,{ref:_,onKeyDownCapture:p=>{p.key==="Enter"?(p.preventDefault(),d()):p.key==="Escape"&&(k(!1),r(""),u(!1))},onFocus:()=>u(!0),onBlur:()=>{setTimeout(()=>{n.trim()||k(!1),u(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:n,onChange:p=>r(p),onSearchClick:d}),o&&m.data&&h&&a.jsx(X.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:a.jsx("div",{className:"p-2",children:a.jsx(H,{variant:"tertiary",size:"small",icon:a.jsx(Z,{}),onClick:i,className:"w-full justify-start",children:"Standardssøk"})})})]})}mt.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};const ue=({formidlinger:s})=>{const[t,l]=D.useState(!1),{harRolle:n}=J(),r=$(),o=D.useRef(null),u=W(),h=n([ft.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),k=()=>{l(!1),u.push("/stilling?brukStandardsok=true")};return D.useEffect(()=>{const m=S=>{o.current&&!o.current.contains(S.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),a.jsxs("div",{className:"@container flex flex-row items-center justify-between",children:[a.jsx(kt,{}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative",ref:o,children:t&&r.data&&a.jsx(X.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:a.jsx("div",{className:"p-2",children:a.jsx(H,{variant:"tertiary",size:"small",icon:a.jsx(Z,{}),onClick:k,className:"w-full justify-start",children:"Standardssøk"})})})}),a.jsx("div",{className:"block @[720px]:hidden",children:a.jsx("div",{className:"whitespace-nowrap",children:a.jsxs(wt,{children:[a.jsx(mt,{alltidÅpen:!0}),a.jsx(Et,{}),a.jsx(gt,{}),h&&!s&&a.jsx(dt,{}),a.jsx(at,{}),!s&&a.jsx(ut,{}),a.jsx(St,{})]})})})]})]})};ue.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};export{ot as F,at as G,ut as K,ue as S,dt as a,mt as b,Mt as c,gt as d,Bt as e};
