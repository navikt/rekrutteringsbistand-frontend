import{u as v}from"./useJobbsøkere-BlT-oSse.js";import{u as k}from"./useRekrutteringstreff-B5RpWR66.js";import{h0 as h,r as o,y as S,h1 as A,g as b,o as P,W as s,k as N}from"./iframe-DYYFo0EH.js";import{J as p,b as d}from"./constants-p05mtcHt.js";import{g as R}from"./rekrutteringstreff-BNtU3qMz.js";const m=e=>e.hendelser?.some(t=>t.hendelsestype===p.INVITER)??!1,I=e=>e.hendelser?.some(t=>t.hendelsestype===p.SVAR_JA_TIL_INVITASJON)??!1,D=e=>e.hendelser?.some(t=>t.hendelsestype===p.SVAR_NEI_TIL_INVITASJON)??!1,J=()=>{const{rekrutteringstreffId:e}=h(),{data:t}=k(e),{data:r=[]}=v(e),n=o.useMemo(()=>t?.tilTid?new Date(t.tilTid)<new Date:!1,[t?.tilTid]),l=o.useMemo(()=>r.filter(m).length,[r]),a=l>0,u=o.useMemo(()=>r.filter(I).length,[r]),f=o.useMemo(()=>r.filter(i=>m(i)&&!I(i)&&!D(i)).length,[r]),c=[a,n].filter(Boolean).length;return{harInvitert:a,antallInviterte:l,antallSvarJa:u,antallVenterSvar:f,antallInviterePunkterFullfort:c,totaltAntallInviterePunkter:2}},V=P({id:s(),treffId:s(),tittel:s(),opprettetAvPersonNavident:s(),opprettetAvPersonNavn:s().optional().nullable(),opprettetAvPersonBeskrivelse:s(),sendesTilJobbsokerTidspunkt:s().nullable(),htmlContent:s(),opprettetTidspunkt:s(),sistOppdatertTidspunkt:s()}),_=N(V),w=e=>`${A.internUrl}/${e}/innlegg`,y=e=>S(w(e),b(_)),B=()=>{const{rekrutteringstreffId:e}=h(),t=k(e),{data:r}=y(e),n=t.data,l=n?.hendelser,a=o.useMemo(()=>R(l),[l]),u=a===d.AVLYST,f=a===d.INVITERE||a===d.FULLFØRE,{harInvitert:c}=J(),g=o.useMemo(()=>n?.fraTid?new Date(n.fraTid)<new Date:!1,[n?.fraTid]),i=o.useMemo(()=>n?.tilTid?new Date(n.tilTid)<new Date:!1,[n?.tilTid]),T=r?.[0]?.htmlContent??null;return{rekrutteringstreffId:e,treff:n,hendelser:l,innlegg:r,activeStep:a,avlyst:u,harPublisert:f,harInvitert:c,fraTidspunktHarPassert:g,tilTidspunktHarPassert:i,innleggHtmlFraBackend:T,oppdaterData:()=>{t.mutate()},rekrutteringstreffHook:t}};export{V as I,y as a,J as b,B as u};
