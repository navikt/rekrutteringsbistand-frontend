import{h2 as E,hB as K,h4 as A,r as o,j as e,H as N,a0 as R,B as D,aP as S}from"./iframe-CGQVJkZv.js";import{K as w}from"./KiAnalyse-DN5V2c9Q.js";import{K as B}from"./KiAnalysePanel-D7WNWaRh.js";import{u as L}from"./useAutosave-CHdaxfUe.js";import{u as P}from"./useFormFeltMedKiValidering-D0FjtJp3.js";import{R as V}from"./RikTekstEditor-CvhWLRMQ.js";import{T as H}from"./Tag-BYGMQyUB.js";import{S as _}from"./Skeleton-1ERJl7II.js";const z="rediger-innlegg-htmlcontent-form",i=({onUpdated:l})=>{const{rekrutteringstreffId:d}=E(),{data:m,isLoading:r}=K(d),{formState:g}=A(),t=m?.[0],c=t?t.htmlContent??null:void 0,{save:u}=L(),[h,f]=o.useState(Date.now()),{analyse:p,analyseError:x,validating:v,kiErrorBorder:j,harGodkjentKiFeil:y,showAnalysis:k,erRedigeringAvPublisertTreff:C,runValidationAndMaybeSave:I,onGodkjennKiFeil:b,control:F,setValue:s,kiLoggLoading:a}=P({feltType:"innlegg",fieldName:"htmlContent",savedValue:c,saveCallback:u,onUpdated:l,requireHasCheckedToShow:!0});return o.useEffect(()=>{const n=t?.htmlContent??"";s("htmlContent",n,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1}),f(Date.now())},[s,t?.htmlContent]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{level:"2",size:"medium",children:"Introduksjon"}),e.jsx(H,{variant:"alt1",size:"medium",children:"KI-støtte"})]}),e.jsxs(R,{className:"text-[var(--ax-text-neutral-subtle)]",children:["Ikke skriv ",e.jsx("u",{children:"personopplysninger"})," og ",e.jsx("u",{children:"diskriminerende"})," ","innhold."]}),(r||a)&&e.jsx(_,{variant:"text"}),!r&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:e.jsx(D,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})}),e.jsx("div",{className:`border rounded-lg ${j?"border-red-500":"border-gray-300"}`,onBlur:n=>{const T=n.currentTarget;setTimeout(async()=>{T.contains(document.activeElement)||g.isDirty&&await I()},0)},children:e.jsx(S,{name:"htmlContent",control:F,render:({field:n})=>e.jsx(V,{id:z,tekst:n.value??"",onChange:n.onChange},h)})}),e.jsx(w,{}),e.jsx(B,{validating:v,analyse:p,analyseError:x,harGodkjentKiFeil:y,showAnalysis:k,erRedigeringAvPublisertTreff:C,onGodkjennKiFeil:b,ariaLabel:"Analyse av innlegg"})]})]})})};i.displayName="InnleggForm";i.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{i as I};
