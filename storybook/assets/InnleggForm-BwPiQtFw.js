import{h2 as T,hA as A,h4 as K,r as a,j as e,B as R,aP as S}from"./iframe-sZP266bO.js";import{K as w}from"./KiAnalyseIntro-CNzzOVr9.js";import{K as D}from"./KiAnalysePanel-w9FV3VU9.js";import{u as N}from"./useAutosave-CsHUi5j0.js";import{u as L}from"./useFormFeltMedKiValidering-lZH2-5pN.js";import{R as P}from"./RikTekstEditor-DuzTyqqD.js";import{S as V}from"./Skeleton-DcZzD8OB.js";const B="rediger-innlegg-htmlcontent-form",i=({onUpdated:l})=>{const{rekrutteringstreffId:d}=T(),{data:g,isLoading:r}=A(d),{formState:m}=K(),n=g?.[0],u=n?n.htmlContent??null:void 0,{save:c}=N(),[h,f]=a.useState(Date.now()),{analyse:p,analyseError:v,validating:y,kiErrorBorder:x,harGodkjentKiFeil:j,showAnalysis:k,erRedigeringAvPublisertTreff:C,runValidationAndMaybeSave:I,onGodkjennKiFeil:F,control:b,setValue:o,kiLoggLoading:s}=L({feltType:"innlegg",fieldName:"htmlContent",savedValue:u,saveCallback:c,onUpdated:l,requireHasCheckedToShow:!0});return a.useEffect(()=>{const t=n?.htmlContent??"";o("htmlContent",t,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1}),f(Date.now())},[o,n?.htmlContent]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"space-y-3",children:[e.jsx(w,{title:"Introduksjon"}),(r||s)&&e.jsx(V,{variant:"text"}),!r&&!s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:e.jsx(R,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})}),e.jsx("div",{className:`border rounded-lg ${x?"border-red-500":"border-gray-300"}`,onBlur:t=>{const E=t.currentTarget;setTimeout(async()=>{E.contains(document.activeElement)||m.isDirty&&await I()},0)},children:e.jsx(S,{name:"htmlContent",control:b,render:({field:t})=>e.jsx(P,{id:B,tekst:t.value??"",onChange:t.onChange},h)})}),e.jsx(D,{validating:y,analyse:p,analyseError:v,harGodkjentKiFeil:j,showAnalysis:k,erRedigeringAvPublisertTreff:C,onGodkjennKiFeil:F,ariaLabel:"Analyse av innlegg"})]})]})})};i.displayName="InnleggForm";i.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{i as I};
