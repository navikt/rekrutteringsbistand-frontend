import{r as g,j as e,d as b,h0 as j,S as A,B as T}from"./iframe-DYYFo0EH.js";import{A as y,L,u as S,S as k,s as R}from"./LeggTilArbeidsgiverForm-BAAQEmy5.js";import{u as N}from"./useArbeidsgiver-C_4ZCEjF.js";import{u as I}from"./useRekrutteringstreffData-CbiV5A9X.js";import{S as w}from"./Plus-DtKNgPN_.js";import{M as f}from"./Modal-CNZnnLcK.js";import{u as _}from"./useArbeidsgivere-Dp2sObIl.js";import{T as C}from"./Tooltip-DgiXEcL3.js";const p=({arbeidsgiver:t,status:r,actionSlot:a})=>{const i=t.organisasjonsnummer,{data:n}=N(i),d=g.useMemo(()=>n?.find(s=>s.organisasjonsnummer===i),[n,i])?.adresse??null;return e.jsx(y,{navn:t.navn,organisasjonsnummer:i,adresse:d,status:r,actionSlot:a})};p.__docgenInfo={description:"",methods:[],displayName:"ArbeidsgiverListeItem",props:{arbeidsgiver:{required:!0,tsType:{name:"z.infer",elements:[{name:"ArbeidsgiverSchema"}],raw:"z.infer<typeof ArbeidsgiverSchema>"},description:""},status:{required:!1,tsType:{name:"string"},description:""},actionSlot:{required:!1,tsType:{name:"ReactNode"},description:""}}};const v=({className:t})=>{const r=g.useRef(null),{activeStep:a}=I(),i=a==="FULLFØRE"||a==="AVLYST",n=()=>r.current?.showModal(),o=()=>r.current?.close();return e.jsxs(e.Fragment,{children:[e.jsx(b,{onClick:n,variant:"secondary",icon:e.jsx(w,{}),disabled:i,className:t,type:"button",children:"Legg til arbeidsgiver"}),e.jsx(f,{ref:r,className:"overflow-visible",onClose:o,header:{heading:"Legg til arbeidsgivere"},children:e.jsx(f.Body,{className:"overflow-visible min-w-[500px]",children:e.jsx(L,{variant:"modal",onCompleted:()=>r.current?.close()})})})]})};v.__docgenInfo={description:"",methods:[],displayName:"LeggTilArbeidsgiverKnapp",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const E=()=>{const{rekrutteringstreffId:t}=j(),r=_(t),a=S(t),i=s=>s.hendelser.find(({hendelsestype:c})=>c==="OPPRETT")?{status:"Lagt til"}:{status:void 0},[n,o]=g.useState(!1),d=async s=>{if(s)try{o(!0),await R(t,s.arbeidsgiverTreffId??s.organisasjonsnummer),r.mutate(),a.mutate()}finally{o(!1)}};return e.jsx(A,{hooks:[r],children:s=>e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx(v,{})}),s.length===0?e.jsx(T,{children:"Ingen arbeidsgivere lagt til"}):e.jsx("ul",{children:s.map((l,c)=>{const{status:h}=i(l),m=s.length===1,x=e.jsx(k,{navn:l.navn,loading:n,disabled:m||n,onConfirm:()=>d(l),arbeidsgivereHook:r,variant:"trash",renderTrigger:({button:u})=>m?e.jsx(C,{content:"Treffet må alltid ha en arbeidsgiver som deltar. Legg til en ny arbeidsgiver først.",className:"max-w-[200px] text-left",children:e.jsx("span",{children:u})}):u});return e.jsx("li",{children:e.jsx(p,{arbeidsgiver:l,status:h,actionSlot:x})},c)})})]})})};E.__docgenInfo={description:"",methods:[],displayName:"Arbeidsgivere"};export{E as A};
