import{f as ee,r as a,j as r,B as te,e as A}from"./iframe-Cz03cNnU.js";import{_ as l}from"./style-CXB0m8CZ.js";import{f as U}from"./FilterChip-DFqmbjvz.js";import{T as I}from"./TømFiltre-CchwrPAH.js";import{a as re}from"./util-CtK3LrTT.js";import{U as x}from"./umamiEvents-D8PysN3T.js";import{C as T}from"./Chips-D0C_v1ER.js";import{T as ae}from"./Tooltip-ZI7-pO2o.js";import{S as ne}from"./ChevronDown-ChhOAzu5.js";import{S as se}from"./ChevronUp-CSbISjSS.js";const le=({tømFiltreProps:f,filtre:D=[]})=>{const d=ee(),[i,j]=a.useState(!1),[b,w]=a.useState(0),[p,M]=a.useState(null),[y,$]=a.useState(0),[S,F]=a.useState(0),[e,B]=a.useState(!1),[u,J]=a.useState(null),C=a.useRef(null),h=a.useRef(null),V=a.useRef(null),X=a.useRef(null),c=D.flatMap((t,n)=>(t.type||[]).map((o,N)=>{const R=t.mapVerdiNavn?U(t.mapVerdiNavn(o)):U(re(o));return{key:`${n}-${o}-${N}`,label:R,remove:()=>t.setVerdi((t.type||[]).filter(k=>k!==o))}})),W=Math.max(0,c.length-b),K=W>0;a.useEffect(()=>{i?d.track(x.Generell.åpne_filter_chip_panel):d.track(x.Generell.lukk_filter_chip_panel)},[i,d]),a.useLayoutEffect(()=>{if(!C.current||!h.current)return;const t=C.current.offsetWidth;if(!t)return;const n=h.current,o=Array.from(n.querySelectorAll("button[data-chip-measure]")),N=n.querySelector("button[data-clear-all]"),R=n.querySelector("div[data-control-wrapper]"),k=getComputedStyle(n),G=parseFloat(k.columnGap||k.gap||"0")||0,m=N?.offsetWidth||0,P=o.map(s=>s.offsetWidth),g=[];if(P.reduce((s,q,z)=>{const E=s+q+(z>0||m>0?G:0);return g.push(E),E},m),(g[g.length-1]||m)<=t){b!==c.length&&w(c.length),y!==0&&$(0);return}let _=0,v=0;for(let s=c.length;s>=0;s--){if(c.length-s===0){if((s===0?m:g[s-1])<=t){_=s,v=0;break}continue}const H=(R?.offsetWidth||0)+16+8,L=s===0?m:g[s-1];if(L+(L>0?G:0)+H<=t){_=s,v=H;break}}_!==b&&w(_),v!==y&&$(v)},[c,f,b,y]),a.useLayoutEffect(()=>{const t=V.current;if(t&&!p&&M(t.getBoundingClientRect().height),S===0&&h.current){const n=h.current.querySelector("button[data-collapse-measure]");if(n){const o=n.offsetWidth+8;F(o)}}},[p,S]),a.useEffect(()=>{let t;const n=()=>{clearTimeout(t),t=setTimeout(()=>w(0),150)};return window.addEventListener("resize",n),()=>{clearTimeout(t),window.removeEventListener("resize",n)}},[]);const O=()=>{B(!0),u&&clearTimeout(u);const t=setTimeout(()=>{B(!1)},1e3);J(t)};if(a.useEffect(()=>()=>{u&&clearTimeout(u)},[u]),c.length===0)return null;const Q=i?c:c.slice(0,b),Y=i?p?`${p*8}px`:"600px":p?`${p}px`:"40px",Z=i?(S||40)+16:0;return r.jsxs("div",{ref:C,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" w-full",children:[r.jsx(l,{id:"f20d71e6f40cafe0",dynamic:[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"],children:`.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar{width:16px;height:16px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-track{background:transparent;margin:2px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(203, 213, 225, 0.8)":"transparent"};border-radius:8px;border:4px solid transparent;background-clip:content-box;transition:background.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(203,213,225,.8);background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(148,163,184,.9)!important;background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-corner{background:transparent}.chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-width:thin;scrollbar-color:${e?"rgba(203, 213, 225, 0.8)":"transparent"} transparent;transition:scrollbar-color.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(203,213,225,.8)transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(75, 85, 99, 0.8)":"transparent"};background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(75,85,99,.8);background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(107,114,128,.9)!important;background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-color:${e?"rgba(75, 85, 99, 0.8)":"transparent"} transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(75,85,99,.8)transparent}`}),r.jsxs("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex justify-between relative",children:[r.jsx("div",{style:{maxHeight:Y,paddingRight:Z},onScroll:O,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" chips-scroll-container flex-1 min-w-0 transition-all duration-300 ease-in-out overflow-auto",children:r.jsxs(T,{ref:V,size:"small",className:"flex items-center gap-2 flex-wrap","aria-expanded":i,children:[f&&r.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:r.jsx(I,{...f,"data-clear-all":"true",className:"flex-shrink-0"})}),Q.map(t=>r.jsx(T.Removable,{onClick:t.remove,style:{whiteSpace:"nowrap",flexShrink:0},className:"flex-shrink-0",children:t.label},t.key)),!i&&W>0&&r.jsx(te,{onClick:()=>{j(!0),d.track(x.Generell.åpne_filter_chip_panel_tekst)},className:"cursor-pointer text-s whitespace-nowrap text-[var(--ax-text-accent-subtle)]",children:`+ ${W} filtre`})]})}),r.jsxs("div",{ref:h,"aria-hidden":"true",className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" invisible fixed left-[-9999px] flex items-center gap-2 flex-nowrap",children:[f&&r.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:r.jsx(I,{...f,"data-clear-all":!0,className:"flex-shrink-0"})}),c.map(t=>r.jsx(T.Removable,{"data-chip-measure":!0,onClick:n=>n.preventDefault(),className:"flex-shrink-0 whitespace-nowrap",children:t.label},`m-${t.key}`))]}),K&&!i&&r.jsxs("div",{style:{width:y},className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-y-0 right-0 flex items-center justify-end",children:[r.jsx("div",{style:{background:"linear-gradient(to right, rgba(0,0,0,0) 0%, var(--ax-surface-default) 55%)"},className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-0 pointer-events-none"}),r.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" relative flex items-center gap-2 pr-2 ",children:r.jsx(ae,{content:"Vis alle aktive filtre",children:r.jsx(A,{onClick:()=>{j(!0),d.track(x.Generell.åpne_filter_chip_panel)},size:"small",variant:"tertiary","aria-label":"Vis flere filtre",icon:r.jsx(ne,{})})})})]}),i&&r.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute top-0 right-0 pr-2 pt-0",children:r.jsx(A,{ref:X,size:"small",variant:"tertiary","aria-label":"Skjul filtre",onClick:()=>{j(!1),d.track(x.Generell.lukk_filter_chip_panel)},icon:r.jsx(se,{})})})]})]})};le.__docgenInfo={description:"",methods:[],displayName:"ValgteFiltre",props:{filtre:{defaultValue:{value:"[]",computed:!1},required:!1}}};export{le as V};
