import{a as J,W,aL as Y,o as R,c as Q,l as K,T as i,U as X,r as y,w as Z,j as e,S as ee,u as re,aM as j,e as h}from"./iframe-Dbv-ZY6m.js";import{u as S,a as g}from"./KandidaSokFilterContext-DAKGlb4Q.js";import{u as se}from"./KandidatSøkMarkerteContext-BpN3KUjh.js";import{K as te}from"./KandidatKort-BnY9IAPt.js";import{L as ne}from"./LagreIKandidatlisteButton-BsK288Gz.js";import{u as ae}from"./usePamGeografi-Ce4owbln.js";import"./kandidat.mock-B9kzIrMD.js";import{s as _,g as b,l as I}from"./fylkeOgKommuneMapping-CcekNe0U.js";import{L as ie}from"./LagreIRekrutteringstreffButton-B7nh99Gp.js";import{R as oe}from"./RekrutteringstreffFeatureToggle-D01vHnfl.js";import{S as B}from"./SideScroll-bkWuyuVO.js";import{S as le}from"./SkeletonKort-Bqffhkic.js";import{C as N,a as de}from"./Checkbox-CtOL91e4.js";import{P as me}from"./Pagination-Cb1Z38zc.js";import{V as ce}from"./ValgteKontorer-C-N8rl4N.js";import{b as P,A as M,c as L,K as O,F as C,S as G,a as U,U as D,P as w,I as q}from"./Utdanningsnivå-CGSxdf21.js";import{A as pe}from"./AlleFilterKomponent-BLeGO3Mk.js";import{V as ge}from"./ValgteFiltre-C73iGfF7.js";import{T}from"./TilgangskontrollForInnhold-CwIJDfym.js";const fe=R({kandidatnumre:K(i())}),ue=R({yrkeJobbonskerObj:K(R({styrkBeskrivelse:i().optional(),sokeTitler:K(i()).optional(),primaertJobbonske:X().optional(),styrkKode:i().optional()})),etternavn:i(),postnummer:i(),arenaKandidatnr:i(),kommuneNavn:i(),geografiJobbonsker:K(R({geografiKodeTekst:i(),geografiKode:i()})),innsatsgruppe:i(),fornavn:i(),fodselsnummer:i(),poststed:i()}),ke=R({kandidater:K(ue),navigering:fe,antallTotalt:Q()}),xe=(r,s=1,n="nyeste")=>`${W.internUrl}/kandidatsok/${r}?side=${s}&sortering=${n}`,je=(r,s)=>{const{data:n,isLoading:o}=ae(),l=!o,p=s.ønsketSted.flatMap(c=>{if(c.includes("(Kommune)")){const d=c.split("(Kommune)")[0].trim(),t=n?.find(m=>m.lokasjon.kommune?.toUpperCase()===d.toUpperCase());if(t){const m=_.get(b(t?.lokasjon.kommunenummer||"")),u=m?[...m.map(E=>I(E))]:[],a=`${d}.NO${t?.lokasjon.fylkesnummer}.${t?.lokasjon.kommunenummer}`;return[...u,a]}}if(c.includes("(Fylke)")){const d=c.split("(Fylke)")[0].trim(),t=n?.find(m=>m.lokasjon.fylke?.toUpperCase()===d.toUpperCase());if(t){const m=_.get(b(t?.lokasjon.fylkesnummer||"")),u=m?[...m.map(E=>I(E))]:[],a=`${d}.NO${t?.lokasjon.fylkesnummer}`;return[...u,a]}}return[]}),f={orgenhet:s.orgenhet,fritekst:s.fritekst,portefølje:s.portefølje,valgtKontor:s.valgtKontor,innsatsgruppe:s.innsatsgruppe,side:s.side,ønsketYrke:s.ønsketYrke,ønsketSted:p,borPåØnsketSted:s.borPåØnsketSted==="ja",kompetanse:s.kompetanse,førerkort:s.førerkort,prioritertMålgruppe:s.prioritertMålgruppe,hovedmål:s.hovedmål,utdanningsnivå:s.utdanningsnivå,arbeidserfaring:s.arbeidserfaring,ferskhet:s.ferskhet,språk:s.språk,sortering:s.sortering};return J(l?{url:xe(r,s.side,s.sortering),body:f}:null,c=>Y(ke)(c))},Ee=y.createContext(void 0),he=()=>{const r=y.useContext(Ee);if(!r)throw new Z({message:"useKandidatNavigering must be used within a KandidatNavigeringProvider"});return r},$=({type:r,stillingsId:s,rekrutteringstreffId:n,alleredeLagtTilTreff:o,alleredeLagtTilKandidatliste:l})=>{const p=S(),f=je(r,p),{setKandidatNavigering:c}=he(),d=y.useRef(null);y.useEffect(()=>{c(f.data?.navigering.kandidatnumre??[])},[f.data?.navigering,c]);const{markerteKandidater:t,setMarkertListe:m,fjernMarkerteKandidater:u}=se();return e.jsx(ee,{hooks:[f],skeleton:e.jsx("div",{className:"mt-14",children:e.jsx(le,{})}),children:a=>{const k=Math.ceil(a.antallTotalt/25),E=k>390?390:k,H=()=>{if(t&&t.length==a.kandidater.length)u();else if(a.kandidater){const v=a.kandidater.map(x=>x.arenaKandidatnr).filter(x=>x!=null&&x!=="");m(v)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:d,className:"flex items-center justify-between",children:[e.jsx("div",{className:"ml-5",children:e.jsx(N,{checked:t&&t.length>0&&t.length===a.kandidater.length,onClick:H,children:"Marker alle på siden"})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[!n&&e.jsx(ne,{stillingsId:s}),e.jsx(oe,{children:!s&&e.jsx(ie,{rekrutteringstreffId:n,kandidatsokKandidater:a.kandidater})})]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"flex flex-col gap-1 pt-2",children:a.kandidater?.map((v,x)=>e.jsx(te,{stillingsId:s,alleredeLagtTil:l??o,kandidat:v},v.arenaKandidatnr||x))}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:["Viser ",a.antallTotalt," treff"]}),k>1&&e.jsx(me,{className:"my-4 flex justify-center",size:"medium",page:p.side,onPageChange:p.setSide,count:E})]})]})]})}})};$.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkResultat",props:{type:{required:!0,tsType:{name:"KandidatSøkPortefølje"},description:""},stillingsId:{required:!1,tsType:{name:"string"},description:""},rekrutteringstreffId:{required:!1,tsType:{name:"string"},description:""},alleredeLagtTilTreff:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},alleredeLagtTilKandidatliste:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};var V=(function(r){return r.SkaffeArbeid="SKAFFE_ARBEID",r.BeholdeArbeid="BEHOLDE_ARBEID",r.ØkeDeltagelse="OKE_DELTAKELSE",r})({});function A(){const{hovedmål:r,setHovedmål:s}=S(),n=o=>{s(o)};return e.jsxs(de,{size:"small",legend:"Velg kandidatens mål",value:r,onChange:n,children:[e.jsx(N,{value:"SKAFFE_ARBEID",children:"Skaffe arbeid"}),e.jsx(N,{value:"BEHOLDE_ARBEID",children:"Beholde arbeid"}),e.jsx(N,{value:"OKE_DELTAKELSE",children:"Øke deltagelse eller mål om arbeid"})]})}A.__docgenInfo={description:"",methods:[],displayName:"Hovedmål"};function F(){return e.jsx("div",{className:"flex gap-4 ",children:e.jsx("div",{className:"block @[720px]:hidden",children:e.jsx("div",{className:"whitespace-nowrap",children:e.jsxs(pe,{children:[e.jsx(P,{}),e.jsx(M,{}),e.jsx(L,{}),e.jsx(O,{}),e.jsx(C,{}),e.jsx(G,{}),e.jsx(U,{})," ",e.jsx(A,{})," ",e.jsx(D,{}),e.jsx(w,{}),e.jsx(q,{})]})})})})}F.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkFilter"};function z(){const r=S(),s=Object.values(r).some(o=>Array.isArray(o)&&o.length>0),n=[{type:r.ønsketYrke,setVerdi:r.setØnsketYrke},{type:r.ønsketSted,setVerdi:r.setØnsketSted},{type:r.innsatsgruppe,setVerdi:r.setInnsatsgruppe},{type:r.hovedmål,setVerdi:r.setHovedmål,mapVerdiNavn:o=>Object.keys(V).find(l=>V[l]===o)||o},{type:r.kompetanse,setVerdi:r.setKompetanse},{type:r.førerkort,setVerdi:r.setFørerkort},{type:r.språk,setVerdi:r.setSpråk},{type:r.arbeidserfaring,setVerdi:r.setArbeidserfaring},{type:r.utdanningsnivå,setVerdi:r.setUtdanningsnivå},{type:r.prioritertMålgruppe,setVerdi:r.setPrioritertMålgruppe}];return r.fritekst&&n.unshift({type:[r.fritekst],setVerdi:()=>r.setFritekst("")}),e.jsx("div",{className:"my-2 w-full",children:e.jsx(ge,{filtre:n,tømFiltreProps:s?{fjernFritekst:()=>r.setFritekst("")}:void 0})})}z.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkChips"};const Te=({stillingsId:r,rekrutteringstreffId:s,alleredeLagtTilTreff:n,alleredeLagtTilKandidatliste:o})=>{const{portefølje:l,setPortefølje:p}=S(),{valgtNavKontor:f,brukerData:c}=re(),d="tab-ellipsis",t=()=>e.jsx(h,{variant:l===g.MINE_BRUKERE?"primary":"tertiary",onClick:()=>p(g.MINE_BRUKERE),size:"xsmall",className:d,title:"Mine brukere","aria-label":"Mine brukere",children:"Mine"}),m=()=>f?e.jsx(T,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET,j.AD_GRUPPE_REKRUTTERINGSBISTAND_JOBBSOKERRETTET],children:e.jsx(h,{variant:l===g.MITT_KONTOR?"primary":"tertiary",onClick:()=>p(g.MITT_KONTOR),size:"xsmall",className:d,title:"Mitt kontor","aria-label":"Mitt kontor",children:"Mitt kontor"})}):null,u=()=>c?.enheter&&c.enheter.length>1?e.jsx(T,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET,j.AD_GRUPPE_REKRUTTERINGSBISTAND_JOBBSOKERRETTET],children:e.jsx(h,{variant:l===g.MINE_KONTORER?"primary":"tertiary",onClick:()=>p(g.MINE_KONTORER),size:"xsmall",className:d,title:"Mine kontorer","aria-label":"Mine kontorer",children:"Mine kontorer"})}):null,a=()=>e.jsx(T,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:e.jsx(h,{variant:l===g.ALLE?"primary":"tertiary",onClick:()=>p(g.ALLE),size:"xsmall",className:d,title:"Alle kontorer","aria-label":"Alle kontorer",children:"Alle"})}),k=()=>e.jsx(T,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:e.jsx(h,{variant:l===g.VALGTE_KONTORER?"primary":"tertiary",onClick:()=>p(g.VALGTE_KONTORER),size:"xsmall",className:d,title:"Valgte kontorer","aria-label":"Valgte kontorer",children:"Velg kontor"})});return e.jsxs("div",{className:"@container",children:[e.jsxs("div",{className:"flex justify-between flex-col @3xl:flex-row @3xl:gap-0 gap-3 ",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(a,{}),e.jsx(t,{}),e.jsx(m,{}),e.jsx(u,{}),e.jsx(T,{skjulVarsel:!0,kreverEnAvRollene:[j.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:e.jsx(k,{})})]}),e.jsx(F,{})]}),l===g.VALGTE_KONTORER&&e.jsx(ce,{}),e.jsxs("div",{className:"@container/kandidatsøk flex",children:[e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx(z,{}),e.jsx($,{alleredeLagtTilTreff:n,alleredeLagtTilKandidatliste:o,type:l,stillingsId:r,rekrutteringstreffId:s})]}),e.jsxs("div",{className:"hidden @[720px]:block ml-4 pt-4  max-w-[200px]",children:[e.jsx(P,{}),e.jsx(B,{className:"mt-4",children:e.jsxs("div",{className:"flex flex-col gap-4 ",children:[e.jsx(M,{}),e.jsx(L,{}),e.jsx(O,{}),e.jsx(C,{}),e.jsx(G,{}),e.jsx(U,{}),e.jsx(A,{}),e.jsx(D,{}),e.jsx(w,{}),e.jsx(q,{})]})})]})]})]})};Te.__docgenInfo={description:"",methods:[],displayName:"KandidatSøkTabs",props:{stillingsId:{required:!1,tsType:{name:"string"},description:""},rekrutteringstreffId:{required:!1,tsType:{name:"string"},description:""},alleredeLagtTilTreff:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},alleredeLagtTilKandidatliste:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};export{Te as K};
