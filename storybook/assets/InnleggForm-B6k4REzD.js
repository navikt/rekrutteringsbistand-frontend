import{h2 as A,hA as K,h4 as R,r as a,j as e,L as S,B as L,aP as w}from"./iframe-DLM5HJzs.js";import{K as D}from"./KiAnalyse-BoGIv7yH.js";import{K as N}from"./KiAnalysePanel-DxIJ2CZh.js";import{u as P}from"./useAutosave-CpT-Mt2p.js";import{u as V}from"./useFormFeltMedKiValidering-VcK2tVnA.js";import{R as B}from"./RikTekstEditor-uxspkbUx.js";import{S as _}from"./Skeleton-B-5WjH8X.js";const i="rediger-innlegg-htmlcontent-form",l=({onUpdated:d})=>{const{rekrutteringstreffId:g}=A(),{data:m,isLoading:r}=K(g),{formState:u}=R(),t=m?.[0],c=t?t.htmlContent??null:void 0,{save:h}=P(),[f,p]=a.useState(Date.now()),{analyse:v,analyseError:y,validating:x,kiErrorBorder:k,harGodkjentKiFeil:j,showAnalysis:C,erRedigeringAvPublisertTreff:b,runValidationAndMaybeSave:F,onGodkjennKiFeil:E,control:I,setValue:o,kiLoggLoading:s}=V({feltType:"innlegg",fieldName:"htmlContent",savedValue:c,saveCallback:h,onUpdated:d,requireHasCheckedToShow:!0});return a.useEffect(()=>{const n=t?.htmlContent??"";o("htmlContent",n,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1}),p(Date.now())},[o,t?.htmlContent]),e.jsxs("section",{className:"space-y-3",children:[(r||s)&&e.jsx(_,{variant:"text"}),!r&&!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:i,children:t?"Endre innlegg":"Skriv nytt innlegg"}),e.jsx(L,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})]}),e.jsx("div",{className:`border rounded-lg ${k?"border-red-500":"border-gray-300"}`,onBlur:n=>{const T=n.currentTarget;setTimeout(async()=>{T.contains(document.activeElement)||u.isDirty&&await F()},0)},children:e.jsx(w,{name:"htmlContent",control:I,render:({field:n})=>e.jsx(B,{id:i,tekst:n.value??"",onChange:n.onChange},f)})}),e.jsx(D,{}),e.jsx(N,{validating:x,analyse:v,analyseError:y,harGodkjentKiFeil:j,showAnalysis:C,erRedigeringAvPublisertTreff:b,onGodkjennKiFeil:E,ariaLabel:"Analyse av innlegg"})]})]})};l.displayName="InnleggForm";l.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{l as I};
