import{j as n,cT as M,l as q,cU as T,r as k,u as E,cV as P,bc as L,p as B,o as U,cW as K,cX as O,cY as V,cm as h,cy as b,cZ as J}from"./iframe-DLRfPnIA.js";import{u as y,h as Y,v as w,S as W}from"./StillingsSøkNavigasjon-DZyLEc2x.js";import{P as X}from"./Pagination-CFE46gRN.js";import{a as F,s as I}from"./util-Cr9yaPzG.js";import{V as Z}from"./ValgteFiltre-DkemTY9r.js";import{S as $}from"./SidepanelTrigger-Bmc8ycur.js";import{B as G}from"./Box-7fTGBR83.js";import{S as z}from"./MagnifyingGlass-D48cV8yx.js";import{S as H}from"./Filter-D_BugbNU.js";import{C,a as R}from"./Checkbox-_sLyNdYY.js";import{S as Q}from"./Search-B7Ft64E0.js";import{R as ee,a as _}from"./Radio-ByEqdTUL.js";const te=({totaltAntallTreff:t})=>{const o=y(),i=ne(t,M);return i<=1?null:n.jsx(X,{size:"small",className:"my-4 flex justify-center",page:o.side,count:i,onPageChange:s=>o.setSide(s)})},ne=(t,o)=>{const i=Math.ceil(t/o),d=1e4/40-1;return Math.min(i,d)};te.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};function se(){const t=y(),o=q();function i(e){if(e.length===2){const l=o.data?.filter(a=>a.type===T.FYLKE).find(a=>a.lokasjon.fylkesnummer===e);return l?l.navn:""}else{const l=o.data?.filter(a=>a.type===T.KOMMUNE).find(a=>a.lokasjon.kommunenummer===e);return l?l.navn:""}}const s=[];t.fritekst&&t.fritekst.length>0&&s.push({type:[...t.fritekst],setVerdi:e=>t.setFritekstListe(e)}),t.statuser.length>0&&s.push({type:[...t.statuser],setVerdi:e=>t.setStatuser(e),mapVerdiNavn:e=>F(e)});const d=[],f=[];return t.inkludering.forEach(e=>{const l=Y.find(c=>c.hovedtag===e),a=t.inkluderingUnderkategori.filter(c=>l?.subtags.includes(c));a.length>0?f.push(...a):d.push(e)}),f.length>0&&s.push({type:[...f],setVerdi:e=>t.setInkluderingUnderkategori(e),mapVerdiNavn:e=>w[e]||e}),d.length>0&&s.push({type:[...d],setVerdi:e=>t.setInkludering(e),mapVerdiNavn:e=>w[e]||e}),t.publisert.length>0&&s.push({type:[...t.publisert],setVerdi:e=>t.setPublisert(e),mapVerdiNavn:e=>F(e)}),t.kategori.length>0&&s.push({type:[...t.kategori],setVerdi:e=>t.setKategori(e),mapVerdiNavn:e=>F(e)}),t.fylker.length>0&&s.push({type:[...t.fylker],setVerdi:e=>t.setFylker(e),mapVerdiNavn:e=>F(i(e))}),t.kommuner.length>0&&s.push({type:[...t.kommuner],setVerdi:e=>t.setKommuner(e),mapVerdiNavn:e=>F(i(e))}),n.jsx("div",{className:"mt-2",children:n.jsx(Z,{filtre:s,tømFiltreProps:{fjernFritekst:()=>t.setFritekstListe([])}})})}se.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips"};const re=({formidlinger:t})=>{const[o,i]=k.useState(!1),{harRolle:s}=E(),d=P(),f=k.useRef(null),e=L();s([B.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]);const l=()=>{i(!1),e.push("/stilling?brukStandardsok=true")};return k.useEffect(()=>{const a=c=>{f.current&&!f.current.contains(c.target)&&i(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),n.jsxs("div",{className:"@container flex flex-row items-center justify-between contain-layout",children:[n.jsx(W,{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"relative",ref:f,children:o&&d.data&&n.jsx(G.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(U,{variant:"tertiary",size:"small",icon:n.jsx(z,{}),onClick:l,className:"w-full justify-start",children:"Standardssøk"})})})}),n.jsx($,{icon:n.jsx(H,{}),children:"Filtrer"})]})]})};re.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};const ie=({geografi:t,hideLegend:o})=>{const i=y(),{fylker:s,setFylker:d,kommuner:f,setKommuner:e}=i,{brukerData:{ident:l},valgtNavKontor:a}=E(),c=K({filter:i,eierNavKontorEnhetId:a?.navKontor,navIdent:l,formidlinger:i.formidlinger}),p=c.data?.antall?.geografi?.fylker||[],S=c.data?.antall?.geografi?.kommuner||[],N=O(S),j=c.isLoading||c.isValidating,x=r=>j?"-":r?p.find(m=>String(m.key)===String(r))?.count??0:0,g=r=>j?"-":r?N.find(m=>V(m.key)===V(r))?.count??0:0,u=r=>x(r),v=t?.filter(r=>r.type===T.FYLKE)?.map(r=>({...r,kommuner:t?.filter(m=>m.type===T.KOMMUNE)?.filter(m=>r.lokasjon.fylkesnummer===m.lokasjon.fylkesnummer).sort((m,D)=>m.navn.localeCompare(D.navn))})).sort((r,m)=>r.navn.localeCompare(m.navn));return n.jsx(C,{size:"small",hideLegend:o,legend:"Område",value:s||[],onChange:d,children:v?.map(r=>n.jsxs(k.Fragment,{children:[n.jsxs(R,{value:r.lokasjon.fylkesnummer,children:[I(r.navn)," (",u(r.lokasjon.fylkesnummer),")"]}),r.lokasjon.fylkesnummer&&s.includes(r.lokasjon.fylkesnummer)&&r.kommuner&&r.kommuner.length>1&&n.jsx(C,{className:"ml-4",onChange:e,hideLegend:!0,legend:`Velg kommuner i ${I(r.navn)}`,value:f||[],children:r.kommuner.map(m=>n.jsxs(R,{value:m.lokasjon.kommunenummer,children:[I(m.navn)," (",g(m.lokasjon.kommunenummer),")"]},m.lokasjon.kommunenummer))})]},r.lokasjon.fylkesnummer))})};ie.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const A=t=>{switch(t){case h.Stilling:return"Stilling";case h.Jobbmesse:return"Jobbmesse";default:return""}};function ae({hideLegend:t}){const o=y(),{kategori:i,setKategori:s}=o,{brukerData:d,valgtNavKontor:f}=E(),e=K({filter:o,eierNavKontorEnhetId:f?.navKontor,navIdent:d?.ident,formidlinger:o.formidlinger}),l=e.data?.antall?.kategoriBuckets,a=e.isLoading||e.isValidating,c=p=>{if(a)return"-";if(l){if(p===h.Stilling)return l.stilling||0;if(p===h.Jobbmesse)return l.jobbmesse||0}return 0};return n.jsxs(C,{hideLegend:t,size:"small",legend:"Kategori",value:i,onChange:s,children:[n.jsxs(R,{value:h.Stilling,children:[A(h.Stilling)," (",c(h.Stilling),")"]}),n.jsxs(R,{value:h.Jobbmesse,children:[A(h.Jobbmesse)," (",c(h.Jobbmesse),")"]})]})}ae.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function oe({hideLegend:t}){const{harRolle:o}=E(),i=y(),{statuser:s,setStatuser:d,portefølje:f}=i,{brukerData:{ident:e},valgtNavKontor:l}=E(),a=K({filter:i,eierNavKontorEnhetId:l?.navKontor,navIdent:e,formidlinger:i.formidlinger}),c=k.useRef(0),p=a.data?.antall?.visningsStatusBuckets||[],S=a.isLoading||a.isValidating,N=u=>S?"-":p.find(v=>v.key===u)?.count??0,j=u=>{const v=s||[];v.includes(u)?d(v.filter(r=>r!==u)):d([...v,u])},x=o([B.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),g=[b.ApenForSokere,b.StengtForSokere,b.UtloptStengtForSokere,b.Fullfort,b.IkkePublisert];return k.useEffect(()=>{c.current<1&&!i.formidlinger&&!S&&(s?.length??0)===0&&(d([b.ApenForSokere]),c.current=c.current+1)},[S,s,d,i.formidlinger]),x?n.jsx(C,{legend:t?void 0:"Status",size:"small",children:n.jsx("div",{className:"flex flex-col gap-2",children:g.map(u=>{if(u===b.IkkePublisert&&f!==J.VIS_MINE)return null;const v=!!s?.includes(u),r=u===b.UtloptStengtForSokere?"Utløpt":u;return n.jsxs(R,{checked:v,onChange:()=>j(u),value:u,disabled:S,size:"small",children:[r," (",N(u),")"]},u)})})}):null}oe.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function le({alltidÅpen:t}){const{fritekst:o,setFritekstListe:i}=y(),[s,d]=k.useState(""),[f,e]=k.useState(!1),[l,a]=k.useState(!1),c=P(),p=k.useRef(null),S=k.useRef(null),N=L(),j=()=>{e(!1),a(!1),N.push("/stilling?brukStandardsok=true")},x=()=>{if(s.trim()){const g=[...o,s];i(g),d("")}e(!1),a(!1)};return k.useEffect(()=>{!t&&l&&S.current&&S.current.focus()},[t,l]),k.useEffect(()=>{const g=u=>{p.current&&!p.current.contains(u.target)&&e(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]),n.jsxs("div",{className:"relative",ref:p,children:[n.jsx(Q,{ref:S,onKeyDownCapture:g=>{g.key==="Enter"?(g.preventDefault(),x()):g.key==="Escape"&&(a(!1),d(""),e(!1))},onFocus:()=>e(!0),onBlur:()=>{setTimeout(()=>{s.trim()||a(!1),e(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:s,onChange:g=>d(g),onSearchClick:x}),f&&c.data&&l&&n.jsx(G.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(U,{variant:"tertiary",size:"small",icon:n.jsx(z,{}),onClick:j,className:"w-full justify-start",children:"Standardssøk"})})})]})}le.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};function de({hideLegend:t}){const o=y(),i=s=>{o.setSortering(s)};return n.jsxs(ee,{size:"small",hideLegend:t,legend:"Sorter",value:o.sortering,onChange:i,className:"pb-2",children:[n.jsx(_,{value:"publiseringsdato",children:"Publiseringsdato"}),n.jsx(_,{value:"utløpsdato",children:"Utløpsdato"}),n.jsx(_,{value:"mestRelevant",children:"Mest relevant"})]})}de.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};export{ie as F,ae as K,re as S,oe as a,le as b,se as c,de as d,te as e};
