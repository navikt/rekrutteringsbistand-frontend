import{h2 as E,hA as K,r as a,j as e,B as T,aP as A}from"./iframe-BAewwkeG.js";import{K as R}from"./KiAnalyseIntro-BttMKgsS.js";import{K as L}from"./KiAnalysePanel-CBUQpIK2.js";import{u as w}from"./useAutosave-JnKwMHHX.js";import{u as N}from"./useFormFeltMedKiValidering-BB_EQyXw.js";import{R as D}from"./RikTekstEditor-BCkAqNp0.js";import{S as P}from"./Skeleton-Bz0-tB7y.js";const S="rediger-innlegg-htmlcontent-form",i=({onUpdated:l})=>{const{rekrutteringstreffId:d}=E(),{data:g,isLoading:r}=K(d),t=g?.[0],m=t?t.htmlContent??null:void 0,{validerOgLagreInnlegg:u}=w(),[c,h]=a.useState(Date.now()),{analyse:f,analyseError:p,validating:v,kiErrorBorder:y,harGodkjentKiFeil:j,showAnalysis:k,erRedigeringAvPublisertTreff:x,validerMedKiOgLagreVedGodkjenning:C,onGodkjennKiFeil:I,control:F,setValue:o,kiLoggLoading:s}=N({feltType:"innlegg",fieldName:"htmlContent",savedValue:m,saveCallback:u,onUpdated:l,requireHasCheckedToShow:!0});return a.useEffect(()=>{const n=t?.htmlContent??"";o("htmlContent",n,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1}),h(Date.now())},[o,t?.htmlContent]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"space-y-3",children:[e.jsx(R,{title:"Introduksjon"}),(r||s)&&e.jsx(P,{variant:"text"}),!r&&!s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:e.jsx(T,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})}),e.jsx("div",{className:`border rounded-lg ${y?"border-red-500":"border-gray-300"}`,onBlur:n=>{const b=n.currentTarget;setTimeout(async()=>{b.contains(document.activeElement)||await C()},0)},children:e.jsx(A,{name:"htmlContent",control:F,render:({field:n})=>e.jsx(D,{id:S,tekst:n.value??"",onChange:n.onChange},c)})}),e.jsx(L,{validating:v,analyse:f,analyseError:p,harGodkjentKiFeil:j,showAnalysis:k,erRedigeringAvPublisertTreff:x,onGodkjennKiFeil:I,ariaLabel:"Analyse av innlegg"})]})]})})};i.displayName="InnleggForm";i.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{i as I};
