import{f as ae,r,j as t,B as re,e as S}from"./iframe-Ejs43Sks.js";import{_ as l}from"./style-DPKdGEd2.js";import{f as D}from"./FilterChip-Dfomuad6.js";import{T as M}from"./TømFiltre-DgqEJJGn.js";import{a as ne}from"./util-DHJPPEgd.js";import{U as y}from"./umamiEvents-D8PysN3T.js";import{C as V}from"./Chips-CNKnigG1.js";import{S as N}from"./ChevronDown-no_Jq8A9.js";const se=({tømFiltreProps:f,filtre:F=[]})=>{const p=ae(),[i,C]=r.useState(!1),[u,W]=r.useState(0),[d,J]=r.useState(null),[k,z]=r.useState(0),[R,X]=r.useState(0),[e,q]=r.useState(!1),[b,K]=r.useState(null),E=r.useRef(null),m=r.useRef(null),G=r.useRef(null),O=r.useRef(null),c=F.flatMap((a,n)=>(a.type||[]).map((o,T)=>{const _=a.mapVerdiNavn?D(a.mapVerdiNavn(o)):D(ne(o));return{key:`${n}-${o}-${T}`,label:_,remove:()=>a.setVerdi((a.type||[]).filter(j=>j!==o))}})),$=Math.max(0,c.length-u),Q=$>0;r.useEffect(()=>{i?p.track(y.Generell.åpne_filter_chip_panel):p.track(y.Generell.lukk_filter_chip_panel)},[i,p]),r.useLayoutEffect(()=>{if(!E.current||!m.current)return;const a=E.current.offsetWidth;if(!a)return;const n=m.current,o=Array.from(n.querySelectorAll("button[data-chip-measure]")),T=n.querySelector("button[data-clear-all]"),_=n.querySelector("div[data-control-wrapper]"),j=_?.querySelector("span[data-count-text]"),H=getComputedStyle(n),L=parseFloat(H.columnGap||H.gap||"0")||0,h=T?.offsetWidth||0,te=o.map(s=>s.offsetWidth),g=[];if(te.reduce((s,x,A)=>{const B=s+x+(A>0||h>0?L:0);return g.push(B),B},h),(g[g.length-1]||h)<=a){u!==c.length&&W(c.length),k!==0&&z(0);return}let v=0,w=0;for(let s=c.length;s>=0;s--){const x=c.length-s;if(x===0){if((s===0?h:g[s-1])<=a){v=s,w=0;break}continue}j&&(j.textContent=`+ ${x} filter${x!==1?"e":""}`);const I=(_?.offsetWidth||0)+16+8,U=s===0?h:g[s-1];if(U+(U>0?L:0)+I<=a){v=s,w=I;break}}v!==u&&W(v),w!==k&&z(w)},[c,f,u,k]),r.useLayoutEffect(()=>{const a=G.current;if(a&&!d&&J(a.getBoundingClientRect().height),R===0&&m.current){const n=m.current.querySelector("button[data-collapse-measure]");if(n){const o=n.offsetWidth+8;X(o)}}},[d,R]),r.useEffect(()=>{let a;const n=()=>{clearTimeout(a),a=setTimeout(()=>W(0),150)};return window.addEventListener("resize",n),()=>{clearTimeout(a),window.removeEventListener("resize",n)}},[]);const Y=()=>{q(!0),b&&clearTimeout(b);const a=setTimeout(()=>{q(!1)},1e3);K(a)};if(r.useEffect(()=>()=>{b&&clearTimeout(b)},[b]),c.length===0)return null;const Z=i?c:c.slice(0,u),P=i?d?`${d*8}px`:"600px":d?`${d}px`:"40px",ee=i?(R||40)+16:0;return t.jsxs("div",{ref:E,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" w-full",children:[t.jsx(l,{id:"f20d71e6f40cafe0",dynamic:[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"],children:`.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar{width:16px;height:16px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-track{background:transparent;margin:2px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(203, 213, 225, 0.8)":"transparent"};border-radius:8px;border:4px solid transparent;background-clip:content-box;transition:background.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(203,213,225,.8);background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(148,163,184,.9)!important;background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-corner{background:transparent}.chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-width:thin;scrollbar-color:${e?"rgba(203, 213, 225, 0.8)":"transparent"} transparent;transition:scrollbar-color.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(203,213,225,.8)transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(75, 85, 99, 0.8)":"transparent"};background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(75,85,99,.8);background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(107,114,128,.9)!important;background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-color:${e?"rgba(75, 85, 99, 0.8)":"transparent"} transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(75,85,99,.8)transparent}`}),t.jsxs("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex justify-between relative",children:[t.jsx("div",{style:{maxHeight:P,paddingRight:ee},onScroll:Y,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" chips-scroll-container flex-1 min-w-0 transition-all duration-300 ease-in-out overflow-auto",children:t.jsxs(V,{ref:G,size:"small",className:"flex items-center gap-2 flex-wrap","aria-expanded":i,children:[f&&t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:t.jsx(M,{...f,"data-clear-all":"true",className:"flex-shrink-0"})}),Z.map(a=>t.jsx(V.Removable,{onClick:a.remove,style:{whiteSpace:"nowrap",flexShrink:0},className:"flex-shrink-0",children:a.label},a.key)),!i&&$>0&&t.jsx(re,{onClick:()=>{C(!0),p.track(y.Generell.åpne_filter_chip_panel_tekst)},className:"cursor-pointer text-s whitespace-nowrap text-[var(--ax-text-accent-subtle)]",children:`+ ${$} filtre`})]})}),t.jsxs("div",{ref:m,"aria-hidden":"true",className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" invisible fixed left-[-9999px] flex items-center gap-2 flex-nowrap",children:[f&&t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:t.jsx(M,{...f,"data-clear-all":!0,className:"flex-shrink-0"})}),c.map(a=>t.jsx(V.Removable,{"data-chip-measure":!0,onClick:n=>n.preventDefault(),className:"flex-shrink-0 whitespace-nowrap",children:a.label},`m-${a.key}`)),t.jsxs("div",{"data-control-wrapper":!0,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex items-center gap-2",children:[t.jsx("span",{"data-count-text":!0,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" text-s whitespace-nowrap",children:"+ 0 filtre"}),t.jsx(S,{"data-expand-measure":!0,size:"small",variant:"tertiary",className:"flex-shrink-0",icon:t.jsx(N,{})}),t.jsx(S,{"data-collapse-measure":!0,size:"small",variant:"tertiary",className:"flex-shrink-0",icon:t.jsx(N,{className:"rotate-180"})})]})]}),Q&&!i&&t.jsxs("div",{style:{width:k},className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-y-0 right-0 flex items-center justify-end",children:[t.jsx("div",{style:{background:"linear-gradient(to right, rgba(0,0,0,0) 0%, var(--ax-surface-default) 55%)"},className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-0 pointer-events-none"}),t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" relative flex items-center gap-2 pr-2 ",children:t.jsx(S,{onClick:()=>{C(!0),p.track(y.Generell.åpne_filter_chip_panel)},size:"small",variant:"tertiary","aria-label":"Vis flere filtre",icon:t.jsx(N,{className:"transition-transform"})})})]}),i&&t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute top-0 right-0 pr-2 pt-0",children:t.jsx(S,{ref:O,size:"small",variant:"tertiary","aria-label":"Skjul filtre",onClick:()=>{C(!1),p.track(y.Generell.lukk_filter_chip_panel)},icon:t.jsx(N,{className:"rotate-180 transition-transform"})})})]})]})};se.__docgenInfo={description:"",methods:[],displayName:"ValgteFiltre",props:{filtre:{defaultValue:{value:"[]",computed:!1},required:!1}}};export{se as V};
