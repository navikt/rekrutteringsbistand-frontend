import{f as ae,r,j as t,B as re,e as S}from"./iframe-BELOvKNN.js";import{_ as l}from"./style-BMdGOvIA.js";import{f as D}from"./FilterChip-CrBDH8cy.js";import{T as M}from"./TømFiltre--3Dt2BAq.js";import{a as ne}from"./util-qK8gJWGj.js";import{U as k}from"./umamiEvents-D8PysN3T.js";import{C as B}from"./Chips-CT9d7hz9.js";import{S as V}from"./ChevronDown-CNBy5aG3.js";import{S as se}from"./ChevronUp-u_UwG-0F.js";const le=({tømFiltreProps:u,filtre:F=[]})=>{const p=ae(),[i,N]=r.useState(!1),[b,C]=r.useState(0),[d,J]=r.useState(null),[v,z]=r.useState(0),[W,X]=r.useState(0),[e,q]=r.useState(!1),[m,K]=r.useState(null),R=r.useRef(null),h=r.useRef(null),G=r.useRef(null),O=r.useRef(null),c=F.flatMap((a,n)=>(a.type||[]).map((o,$)=>{const f=a.mapVerdiNavn?D(a.mapVerdiNavn(o)):D(ne(o));return{key:`${n}-${o}-${$}`,label:f,remove:()=>a.setVerdi((a.type||[]).filter(_=>_!==o))}})),E=Math.max(0,c.length-b),Q=E>0;r.useEffect(()=>{i?p.track(k.Generell.åpne_filter_chip_panel):p.track(k.Generell.lukk_filter_chip_panel)},[i,p]),r.useLayoutEffect(()=>{if(!R.current||!h.current)return;const a=R.current.offsetWidth;if(!a)return;const n=h.current,o=Array.from(n.querySelectorAll("button[data-chip-measure]")),$=n.querySelector("button[data-clear-all]"),f=n.querySelector("div[data-control-wrapper]"),_=f?.querySelector("span[data-count-text]"),H=getComputedStyle(n),L=parseFloat(H.columnGap||H.gap||"0")||0,g=$?.offsetWidth||0,te=o.map(s=>s.offsetWidth),x=[];if(te.reduce((s,y,A)=>{const T=s+y+(A>0||g>0?L:0);return x.push(T),T},g),(x[x.length-1]||g)<=a){b!==c.length&&C(c.length),v!==0&&z(0);return}let j=0,w=0;for(let s=c.length;s>=0;s--){const y=c.length-s;if(y===0){if((s===0?g:x[s-1])<=a){j=s,w=0;break}continue}_&&(_.textContent=`+ ${y} filter${y!==1?"e":""}`),f&&f.offsetHeight;const U=(f?.offsetWidth||0)+16+8,I=s===0?g:x[s-1];if(I+(I>0?L:0)+U<=a){j=s,w=U;break}}j!==b&&C(j),w!==v&&z(w)},[c,u,b,v]),r.useLayoutEffect(()=>{const a=G.current;if(a&&!d&&J(a.getBoundingClientRect().height),W===0&&h.current){const n=h.current.querySelector("button[data-collapse-measure]");if(n){const o=n.offsetWidth+8;X(o)}}},[d,W]),r.useEffect(()=>{let a;const n=()=>{clearTimeout(a),a=setTimeout(()=>C(0),150)};return window.addEventListener("resize",n),()=>{clearTimeout(a),window.removeEventListener("resize",n)}},[]);const Y=()=>{q(!0),m&&clearTimeout(m);const a=setTimeout(()=>{q(!1)},1e3);K(a)};if(r.useEffect(()=>()=>{m&&clearTimeout(m)},[m]),c.length===0)return null;const Z=i?c:c.slice(0,b),P=i?d?`${d*8}px`:"600px":d?`${d}px`:"40px",ee=i?(W||40)+16:0;return t.jsxs("div",{ref:R,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" w-full",children:[t.jsx(l,{id:"f20d71e6f40cafe0",dynamic:[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"],children:`.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar{width:16px;height:16px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-track{background:transparent;margin:2px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(203, 213, 225, 0.8)":"transparent"};border-radius:8px;border:4px solid transparent;background-clip:content-box;transition:background.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(203,213,225,.8);background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(148,163,184,.9)!important;background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-corner{background:transparent}.chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-width:thin;scrollbar-color:${e?"rgba(203, 213, 225, 0.8)":"transparent"} transparent;transition:scrollbar-color.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(203,213,225,.8)transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(75, 85, 99, 0.8)":"transparent"};background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(75,85,99,.8);background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(107,114,128,.9)!important;background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-color:${e?"rgba(75, 85, 99, 0.8)":"transparent"} transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(75,85,99,.8)transparent}`}),t.jsxs("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex justify-between relative",children:[t.jsx("div",{style:{maxHeight:P,paddingRight:ee},onScroll:Y,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" chips-scroll-container flex-1 min-w-0 transition-all duration-300 ease-in-out overflow-auto",children:t.jsxs(B,{ref:G,size:"small",className:"flex items-center gap-2 flex-wrap","aria-expanded":i,children:[u&&t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:t.jsx(M,{...u,"data-clear-all":"true",className:"flex-shrink-0"})}),Z.map(a=>t.jsx(B.Removable,{onClick:a.remove,style:{whiteSpace:"nowrap",flexShrink:0},className:"flex-shrink-0",children:a.label},a.key)),!i&&E>0&&t.jsx(re,{onClick:()=>{N(!0),p.track(k.Generell.åpne_filter_chip_panel_tekst)},className:"cursor-pointer text-s whitespace-nowrap text-[var(--ax-text-accent-subtle)]",children:`+ ${E} filtre`})]})}),t.jsxs("div",{ref:h,"aria-hidden":"true",className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" invisible fixed left-[-9999px] flex items-center gap-2 flex-nowrap",children:[u&&t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:t.jsx(M,{...u,"data-clear-all":!0,className:"flex-shrink-0"})}),c.map(a=>t.jsx(B.Removable,{"data-chip-measure":!0,onClick:n=>n.preventDefault(),className:"flex-shrink-0 whitespace-nowrap",children:a.label},`m-${a.key}`)),t.jsxs("div",{"data-control-wrapper":!0,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex items-center gap-2",children:[t.jsx("span",{"data-count-text":!0,className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" text-s whitespace-nowrap",children:"+ 0 filtre"}),t.jsx(S,{"data-expand-measure":!0,size:"small",variant:"tertiary",className:"flex-shrink-0",icon:t.jsx(V,{})}),t.jsx(S,{"data-collapse-measure":!0,size:"small",variant:"tertiary",className:"flex-shrink-0",icon:t.jsx(se,{})})]})]}),Q&&!i&&t.jsxs("div",{style:{width:v},className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-y-0 right-0 flex items-center justify-end",children:[t.jsx("div",{style:{background:"linear-gradient(to right, rgba(0,0,0,0) 0%, var(--ax-surface-default) 55%)"},className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-0 pointer-events-none"}),t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" relative flex items-center gap-2 pr-2 ",children:t.jsx(S,{onClick:()=>{N(!0),p.track(k.Generell.åpne_filter_chip_panel)},size:"small",variant:"tertiary","aria-label":"Vis flere filtre",icon:t.jsx(V,{className:"transition-transform"})})})]}),i&&t.jsx("div",{className:l.dynamic([["f20d71e6f40cafe0",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute top-0 right-0 pr-2 pt-0",children:t.jsx(S,{ref:O,size:"small",variant:"tertiary","aria-label":"Skjul filtre",onClick:()=>{N(!1),p.track(k.Generell.lukk_filter_chip_panel)},icon:t.jsx(V,{className:"rotate-180 transition-transform"})})})]})]})};le.__docgenInfo={description:"",methods:[],displayName:"ValgteFiltre",props:{filtre:{defaultValue:{value:"[]",computed:!1},required:!1}}};export{le as V};
