import{j as n,cH as W,au as L,cI as E,u as I,cJ as R,cK as $,r as k,cL as V,S as Q,aE as h,cE as S,cM as X,cN as A,bb as P,e as B,R as Z}from"./iframe-BjHUBmX4.js";import{u as b,h as ee,v as w,S as te,I as ne}from"./StillingsSøkNavigasjon-DgNZhwxJ.js";import{P as se}from"./Pagination-CYR3VReJ.js";import{d as N,c as K}from"./util-oy-2ETrN.js";import{V as re}from"./ValgteFiltre-Bi1UZQ-N.js";import{a as C,C as F}from"./Checkbox-Cu7f4-zV.js";import{R as ae,a as _}from"./Radio-AHLsTPH6.js";import{S as ie}from"./Search-DMy5nTjP.js";import{B as G}from"./Box-CuZSUbSP.js";import{S as z}from"./MagnifyingGlass-CtzatqOg.js";import{M as oe}from"./MittStandardsøk-eFJirhrM.js";import{A as le}from"./AlleFilterKomponent-CZSVLadC.js";const de=({totaltAntallTreff:t})=>{const r=b(),a=ce(t,W);return a<=1?null:n.jsx(se,{size:"small",className:"my-4 flex justify-center",page:r.side,count:a,onPageChange:s=>r.setSide(s)})},ce=(t,r)=>{const a=Math.ceil(t/r),m=1e4/40-1;return Math.min(a,m)};de.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};function ue(){const t=b(),r=L();function a(e){if(e.length===2){const l=r.data?.filter(i=>i.type===E.FYLKE).find(i=>i.lokasjon.fylkesnummer===e);return l?l.navn:""}else{const l=r.data?.filter(i=>i.type===E.KOMMUNE).find(i=>i.lokasjon.kommunenummer===e);return l?l.navn:""}}const s=[];t.fritekst&&t.fritekst.length>0&&s.push({type:[...t.fritekst],setVerdi:e=>t.setFritekstListe(e)}),t.statuser.length>0&&s.push({type:[...t.statuser],setVerdi:e=>t.setStatuser(e),mapVerdiNavn:e=>N(e)});const m=[],g=[];return t.inkludering.forEach(e=>{const l=ee.find(u=>u.hovedtag===e),i=t.inkluderingUnderkategori.filter(u=>l?.subtags.includes(u));i.length>0?g.push(...i):m.push(e)}),g.length>0&&s.push({type:[...g],setVerdi:e=>t.setInkluderingUnderkategori(e),mapVerdiNavn:e=>w[e]||e}),m.length>0&&s.push({type:[...m],setVerdi:e=>t.setInkludering(e),mapVerdiNavn:e=>w[e]||e}),t.publisert.length>0&&s.push({type:[...t.publisert],setVerdi:e=>t.setPublisert(e),mapVerdiNavn:e=>N(e)}),t.kategori.length>0&&s.push({type:[...t.kategori],setVerdi:e=>t.setKategori(e),mapVerdiNavn:e=>N(e)}),t.fylker.length>0&&s.push({type:[...t.fylker],setVerdi:e=>t.setFylker(e),mapVerdiNavn:e=>N(a(e))}),t.kommuner.length>0&&s.push({type:[...t.kommuner],setVerdi:e=>t.setKommuner(e),mapVerdiNavn:e=>N(a(e))}),n.jsx("div",{className:"mt-2",children:n.jsx(re,{filtre:s,tømFiltreProps:{fjernFritekst:()=>t.setFritekstListe([])}})})}ue.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips"};const M=({geografi:t,hideLegend:r})=>{const a=b(),{fylker:s,setFylker:m,kommuner:g,setKommuner:e}=a,{brukerData:{ident:l},valgtNavKontor:i}=I(),u=R({filter:a,eierNavKontorEnhetId:i?.navKontor,navIdent:l,formidlinger:a.formidlinger}),p=u.data?.antall?.geografi?.fylker||[],v=u.data?.antall?.geografi?.kommuner||[],y=$(v),x=u.isLoading||u.isValidating,c=o=>x?"-":o?p.find(f=>String(f.key)===String(o))?.count??0:0,d=o=>x?"-":o?y.find(f=>V(f.key)===V(o))?.count??0:0,j=o=>c(o),H=t?.filter(o=>o.type===E.FYLKE)?.map(o=>({...o,kommuner:t?.filter(f=>f.type===E.KOMMUNE)?.filter(f=>o.lokasjon.fylkesnummer===f.lokasjon.fylkesnummer).sort((f,Y)=>f.navn.localeCompare(Y.navn))})).sort((o,f)=>o.navn.localeCompare(f.navn));return n.jsx(C,{size:"small",hideLegend:r,legend:"Område",value:s||[],onChange:m,children:H?.map(o=>n.jsxs(k.Fragment,{children:[n.jsxs(F,{value:o.lokasjon.fylkesnummer,children:[K(o.navn)," (",j(o.lokasjon.fylkesnummer),")"]}),o.lokasjon.fylkesnummer&&s.includes(o.lokasjon.fylkesnummer)&&o.kommuner&&o.kommuner.length>1&&n.jsx(C,{className:"ml-4",onChange:e,hideLegend:!0,legend:`Velg kommuner i ${K(o.navn)}`,value:g||[],children:o.kommuner.map(f=>n.jsxs(F,{value:f.lokasjon.kommunenummer,children:[K(f.navn)," (",d(f.lokasjon.kommunenummer),")"]},f.lokasjon.kommunenummer))})]},o.lokasjon.fylkesnummer))})};M.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function U({hideLegend:t}){const r=L();return n.jsx(Q,{hooks:[r],children:a=>n.jsx(M,{geografi:a,hideLegend:t})})}U.__docgenInfo={description:"",methods:[],displayName:"GeografiFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const T=t=>{switch(t){case h.Stilling:return"Stilling";case h.Jobbmesse:return"Jobbmesse";default:return""}};function q({hideLegend:t}){const r=b(),{kategori:a,setKategori:s}=r,{brukerData:m,valgtNavKontor:g}=I(),e=R({filter:r,eierNavKontorEnhetId:g?.navKontor,navIdent:m?.ident,formidlinger:r.formidlinger}),l=e.data?.antall?.kategoriBuckets,i=e.isLoading||e.isValidating,u=p=>{if(i)return"-";if(l){if(p===h.Stilling)return l.stilling||0;if(p===h.Jobbmesse)return l.jobbmesse||0}return 0};return n.jsxs(C,{hideLegend:t,size:"small",legend:"Kategori",value:a,onChange:s,children:[n.jsxs(F,{value:h.Stilling,children:[T(h.Stilling)," (",u(h.Stilling),")"]}),n.jsxs(F,{value:h.Jobbmesse,children:[T(h.Jobbmesse)," (",u(h.Jobbmesse),")"]})]})}q.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function D({hideLegend:t}){const r=b(),{statuser:a,setStatuser:s,portefølje:m}=r,{brukerData:{ident:g},valgtNavKontor:e}=I(),l=R({filter:r,eierNavKontorEnhetId:e?.navKontor,navIdent:g,formidlinger:r.formidlinger}),i=k.useRef(0),u=l.data?.antall?.visningsStatusBuckets||[],p=l.isLoading||l.isValidating,v=c=>p?"-":u.find(d=>d.key===c)?.count??0,y=c=>{const d=a||[];d.includes(c)?s(d.filter(j=>j!==c)):s([...d,c])},x=[S.ApenForSokere,S.StengtForSokere,S.UtloptStengtForSokere,S.Fullfort,S.IkkePublisert];return k.useEffect(()=>{i.current<1&&!r.formidlinger&&!p&&(a?.length??0)===0&&(s([S.ApenForSokere]),i.current=i.current+1)},[p,a,s,r.formidlinger]),n.jsx(C,{legend:t?void 0:"Status",size:"small",children:n.jsx("div",{className:"flex flex-col gap-2",children:x.map(c=>{if(c===S.IkkePublisert&&m!==X.VIS_MINE)return null;const d=!!a?.includes(c),j=c===S.UtloptStengtForSokere?"Utløpt":c;return n.jsxs(F,{checked:d,onChange:()=>y(c),value:c,disabled:p,size:"small",children:[j," (",v(c),")"]},c)})})})}D.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function J({hideLegend:t}){const r=b(),a=s=>{r.setSortering(s)};return n.jsxs(ae,{size:"small",hideLegend:t,legend:"Sorter",value:r.sortering,onChange:a,className:"pb-2",children:[n.jsx(_,{value:"publiseringsdato",children:"Publiseringsdato"}),n.jsx(_,{value:"utløpsdato",children:"Utløpsdato"}),n.jsx(_,{value:"mestRelevant",children:"Mest relevant"})]})}J.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function O({alltidÅpen:t}){const{fritekst:r,setFritekstListe:a}=b(),[s,m]=k.useState(""),[g,e]=k.useState(!1),[l,i]=k.useState(!1),u=A(),p=k.useRef(null),v=k.useRef(null),y=P(),x=()=>{e(!1),i(!1),y.push("/stilling?brukStandardsok=true")},c=()=>{if(s.trim()){const d=[...r,s];a(d),m("")}e(!1),i(!1)};return k.useEffect(()=>{!t&&l&&v.current&&v.current.focus()},[t,l]),k.useEffect(()=>{const d=j=>{p.current&&!p.current.contains(j.target)&&e(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]),n.jsxs("div",{className:"relative",ref:p,children:[n.jsx(ie,{ref:v,onKeyDownCapture:d=>{d.key==="Enter"?(d.preventDefault(),c()):d.key==="Escape"&&(i(!1),m(""),e(!1))},onFocus:()=>e(!0),onBlur:()=>{setTimeout(()=>{s.trim()||i(!1),e(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:s,onChange:d=>m(d),onSearchClick:c}),g&&u.data&&l&&n.jsx(G.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(B,{variant:"tertiary",size:"small",icon:n.jsx(z,{}),onClick:x,className:"w-full justify-start",children:"Standardssøk"})})})]})}O.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};const me=({formidlinger:t})=>{const[r,a]=k.useState(!1),{harRolle:s}=I(),m=A(),g=k.useRef(null),e=P(),l=s([Z.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),i=()=>{a(!1),e.push("/stilling?brukStandardsok=true")};return k.useEffect(()=>{const u=p=>{g.current&&!g.current.contains(p.target)&&a(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]),n.jsxs("div",{className:"@container flex flex-row items-center justify-between",children:[n.jsx(te,{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"relative",ref:g,children:r&&m.data&&n.jsx(G.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(B,{variant:"tertiary",size:"small",icon:n.jsx(z,{}),onClick:i,className:"w-full justify-start",children:"Standardssøk"})})})}),n.jsx("div",{className:"block @[720px]:hidden",children:n.jsx("div",{className:"whitespace-nowrap",children:n.jsxs(le,{children:[n.jsx(O,{alltidÅpen:!0}),n.jsx(oe,{}),n.jsx(J,{}),l&&!t&&n.jsx(D,{}),n.jsx(U,{}),!t&&n.jsx(q,{}),n.jsx(ne,{})]})})})]})]})};me.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};export{M as F,U as G,q as K,me as S,D as a,O as b,ue as c,J as d,de as e};
