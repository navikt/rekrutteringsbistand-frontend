import{c as h,j as t,r as s,ac as T,u as S,e as b,cd as F,h as I}from"./iframe-vr_vckGk.js";import{L as j}from"./LenkeKortMedIkon-CyoDELWp.js";import{U as g}from"./umamiEvents-D8PysN3T.js";import{l as w}from"./leggTilKandidat-C4407MYH.js";import{L as C}from"./LeggTilKandidater-BtSmRBAr.js";import{M as d}from"./Modal-xZlbM4lC.js";function M({stillingId:a}){const{trackAndNavigate:o}=h(),n=`/stilling/${a}/finn-kandidater`,l=()=>o(g.Stilling.finn_kandidater_knapp,n);return t.jsx(j,{tittel:"Finn og foreslÃ¥ jobbsÃ¸kere",beskrivelse:"Se alle som leter etter jobb nÃ¥, og finn riktig person til jobben",ikon:"ðŸ‘‰",onClick:l})}M.__docgenInfo={description:"",methods:[],displayName:"FinnKandidaterKnapp",props:{stillingId:{required:!0,tsType:{name:"string"},description:""}}};const N=({stillingsId:a,stillingsTittel:o})=>{const n=s.useRef(null),{track:l}=h(),{stillingsData:B,kandidatlisteInfo:c,refetchKandidatliste:K}=T(),{valgtNavKontor:y,visVarsel:p}=S(),[r,k]=s.useState([]),[v,x]=s.useState(0),[m,u]=s.useState(!1),L=()=>{x(i=>i+1),l(g.Stilling.Ã¥pne_legg_til_kandidat_modal),n.current?.showModal()},_=async()=>{u(!0);const i=r.filter(e=>e.aktÃ¸rId===null),f=r.map(e=>e.aktÃ¸rId).filter(e=>e!=null);if(c?.kandidatlisteId&&(f.length>0||i.length>0))try{await w(f,a);for(const e of i)await F(c.kandidatlisteId,{fnr:e.fÃ¸dselsnummer,fÃ¥ttJobb:!0,navKontor:y?.navKontor??"",stillingsId:a});l(g.Stilling.legg_til_kandidat,{antall:r.length}),p({tekst:"JobbsÃ¸kere ble lagt til i stillingen",type:"success"}),k([]),K?.(),n.current?.close()}catch(e){throw p({tekst:"Noe gikk galt ved lagring av jobbsÃ¸kere",type:"error"}),new I({message:"Veil ved legg til jobbsÃ¸kere",error:e})}u(!1)};return t.jsxs(s.Fragment,{children:[t.jsx(j,{tittel:"Legg til jobbsÃ¸kere",beskrivelse:"Vet du fÃ¸dselsnummeret til personen, kan du legge dem til med en gang.",onClick:L,ikon:"âž•",loading:m}),t.jsxs(d,{width:"600px",ref:n,header:{closeButton:!1,heading:`Legg til jobbsÃ¸kere til ${o??"stilling"}`},children:[t.jsx(d.Body,{children:t.jsx(C,{callBack:i=>{k(i)}},v)}),t.jsxs(d.Footer,{children:[t.jsx(b,{disabled:r.length===0,onClick:_,children:"Legg til jobbsÃ¸ker"}),t.jsx(b,{loading:m,type:"button",variant:"secondary",onClick:()=>n.current?.close(),children:"Avbryt"})]})]})]},a)};N.__docgenInfo={description:"",methods:[],displayName:"LeggTilKandidatTilStilling",props:{stillingsId:{required:!0,tsType:{name:"string"},description:""},stillingsTittel:{required:!0,tsType:{name:"string"},description:""}}};export{M as F,N as L};
