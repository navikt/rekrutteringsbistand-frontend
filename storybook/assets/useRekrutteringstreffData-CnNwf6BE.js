import{u as v}from"./useJobbsøkere-CDd0QHSB.js";import{u as k}from"./useRekrutteringstreff-Celp20pK.js";import{u as h}from"./RekrutteringstreffContext-X69YMvnU.js";import{J as p,b as c}from"./constants-p05mtcHt.js";import{r as o,gH as S,g as A,o as b,I as r,d as P}from"./iframe--aQMagBM.js";import{u as N}from"./index-DGK8N2bN.js";import{g as R}from"./rekrutteringstreff-BNtU3qMz.js";const m=e=>e.hendelser?.some(t=>t.hendelsestype===p.INVITER)??!1,I=e=>e.hendelser?.some(t=>t.hendelsestype===p.SVAR_JA_TIL_INVITASJON)??!1,D=e=>e.hendelser?.some(t=>t.hendelsestype===p.SVAR_NEI_TIL_INVITASJON)??!1,J=()=>{const{rekrutteringstreffId:e}=h(),{data:t}=k(e),{data:s=[]}=v(e),n=o.useMemo(()=>t?.tilTid?new Date(t.tilTid)<new Date:!1,[t?.tilTid]),l=o.useMemo(()=>s.filter(m).length,[s]),a=l>0,u=o.useMemo(()=>s.filter(I).length,[s]),f=o.useMemo(()=>s.filter(i=>m(i)&&!I(i)&&!D(i)).length,[s]),d=[a,n].filter(Boolean).length;return{harInvitert:a,antallInviterte:l,antallSvarJa:u,antallVenterSvar:f,antallInviterePunkterFullfort:d,totaltAntallInviterePunkter:2}},H=b({id:r(),treffId:r(),tittel:r(),opprettetAvPersonNavident:r(),opprettetAvPersonNavn:r().optional().nullable(),opprettetAvPersonBeskrivelse:r(),sendesTilJobbsokerTidspunkt:r().nullable(),htmlContent:r(),opprettetTidspunkt:r(),sistOppdatertTidspunkt:r()}),V=P(H),_=e=>`${S.internUrl}/${e}/innlegg`,w=e=>N(_(e),A(V)),O=()=>{const{rekrutteringstreffId:e}=h(),t=k(e),{data:s}=w(e),n=t.data,l=n?.hendelser,a=o.useMemo(()=>R(l),[l]),u=a===c.AVLYST,f=a===c.INVITERE||a===c.FULLFØRE,{harInvitert:d}=J(),g=o.useMemo(()=>n?.fraTid?new Date(n.fraTid)<new Date:!1,[n?.fraTid]),i=o.useMemo(()=>n?.tilTid?new Date(n.tilTid)<new Date:!1,[n?.tilTid]),T=s?.[0]?.htmlContent??null;return{rekrutteringstreffId:e,treff:n,hendelser:l,innlegg:s,activeStep:a,avlyst:u,harPublisert:f,harInvitert:d,fraTidspunktHarPassert:g,tilTidspunktHarPassert:i,innleggHtmlFraBackend:T,oppdaterData:()=>{t.mutate()},rekrutteringstreffHook:t}};export{H as I,w as a,J as b,O as u};
