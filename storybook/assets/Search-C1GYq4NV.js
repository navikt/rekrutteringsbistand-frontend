import{r as m,e as x,l as P,R as n,d as L,m as T,i as X,L as q,B as J,D as Q,G as U,k as W,aA as R}from"./iframe-DwwpuTFP.js";import{u as Y}from"./useFormField-B46YkHgM.js";import{S as D}from"./MagnifyingGlass-DMIY4pTz.js";const M=m.createContext(null);var Z=function(a,l){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&l.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)l.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t};const $=m.forwardRef((a,l)=>{var t,{className:e,children:r,disabled:v,onClick:d}=a,y=Z(a,["className","children","disabled","onClick"]);const{cn:h}=x(),f=P("Search"),u=m.useContext(M);if(u===null)return console.warn("<Search.Button> has to be wrapped in <Search />"),null;const{size:b,variant:s,handleClick:_}=u;return n.createElement(L,Object.assign({type:"submit"},y,{ref:l,size:b,variant:s==="secondary"?"secondary":"primary",className:h("navds-search__button-search",e),disabled:(t=u?.disabled)!==null&&t!==void 0?t:v,onClick:T(d,_),icon:n.createElement(D,Object.assign({},r?{"aria-hidden":!0}:{title:f("search")}))}),r)});var ee=function(a,l){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&l.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)l.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t};const ae=m.forwardRef((a,l)=>{const{inputProps:t,size:e="medium",inputDescriptionId:r,errorId:v,showErrorMsg:d,hasError:y}=Y(a,"searchfield"),{className:h,hideLabel:f=!0,label:u,description:b,value:s,clearButtonLabel:_,onClear:g,clearButton:F=!0,children:z,variant:p="primary",defaultValue:E,onChange:C,onSearchClick:S,htmlSize:O,"data-color":B}=a,V=ee(a,["className","hideLabel","label","description","value","clearButtonLabel","onClear","clearButton","children","variant","defaultValue","onChange","onSearchClick","htmlSize","data-color"]),{cn:i}=x(),N=m.useRef(null),G=X(N,l),[w,A]=m.useState(E??""),j=o=>{s===void 0&&A(o),C?.(o)},I=o=>{var c,k;g?.(o),j(""),(k=(c=N.current)===null||c===void 0?void 0:c.focus)===null||k===void 0||k.call(c)},H=()=>{S?.(`${s??w}`)},K=F&&!t.disabled&&(s??w);return n.createElement("div",{onKeyDown:o=>{var c;o.key==="Escape"&&(!((c=N.current)===null||c===void 0)&&c.value&&o.preventDefault(),I({trigger:"Escape",event:o}))},className:i(h,"navds-form-field",`navds-form-field--${e}`,"navds-search",{"navds-search--error":y,"navds-search--disabled":t.disabled,"navds-search--with-size":O}),"data-color":B},n.createElement(q,{htmlFor:t.id,size:e,className:i("navds-form-field__label",{"navds-sr-only":f})},u),!!b&&n.createElement(J,{className:i("navds-form-field__description",{"navds-sr-only":f}),id:r,size:e,as:"div"},b),n.createElement("div",{className:i("navds-search__wrapper")},n.createElement("div",{className:i("navds-search__wrapper-inner")},p==="simple"&&n.createElement(D,{"aria-hidden":!0,className:i("navds-search__search-icon")}),n.createElement("input",Object.assign({ref:G},Q(V,["error","errorId","size","readOnly"]),t,{value:s??w,onChange:o=>j(o.target.value),type:"search",className:i(h,"navds-search__input",`navds-search__input--${p}`,"navds-text-field__input","navds-body-short",`navds-body-short--${e}`)},O?{size:Number(O)}:{})),K&&n.createElement(re,{handleClear:I,size:e,clearButtonLabel:_})),n.createElement(M.Provider,{value:{size:e,disabled:t.disabled,variant:p,handleClick:H}},z||p!=="simple"&&n.createElement($,{"data-color":B}))),n.createElement("div",{className:i("navds-form-field__error"),id:v,"aria-relevant":"additions removals","aria-live":"polite"},d&&n.createElement(U,{size:e,showIcon:!0},a.error)))});function re({size:a,clearButtonLabel:l,handleClear:t}){const{cn:e}=x(),r=W(!1),v=P("Search");return r?.isDarkside?n.createElement(L,{className:e("navds-search__button-clear"),variant:"tertiary","data-color":"neutral",size:a==="medium"?"small":"xsmall",icon:n.createElement(R,{"aria-hidden":!0}),title:l||v("clear"),onClick:d=>t({trigger:"Click",event:d}),type:"button"}):n.createElement("button",{type:"button",onClick:d=>t({trigger:"Click",event:d}),className:e("navds-search__button-clear")},n.createElement("span",{className:e("navds-sr-only")},l||v("clear")),n.createElement(R,{"aria-hidden":!0}))}ae.Button=$;export{ae as S};
