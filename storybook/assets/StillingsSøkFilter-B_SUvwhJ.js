import{j as u,i as x,ic as v,o as b,c as k,T as s,fD as T,gI as C,U as L,l as E,ie as ct,ig as ht,a as ft,ih as pt,u as O,r as F,S as kt,h7 as Y,e as W,aM as St}from"./iframe-Cv24_U16.js";import{u as w,h as yt,v as q,S as bt,I as Et}from"./StillingsSøkNavigasjon-4KC4oOJ0.js";import{P as _t}from"./Pagination-CZPECZGF.js";import{u as U,G as I}from"./usePamGeografi-B4ka9gO2.js";import{a as R,d as P}from"./util-Cq_qb_RM.js";import{V as vt}from"./ValgteFiltre-BsEVp6fP.js";import"./mockStillingssøk-58Of0xpj.js";import{s as Ct,a as Nt,f as jt,b as xt,n as z}from"./fylkeOgKommuneMapping-CcekNe0U.js";import{a as B}from"./stillingssøk-typer-BUxO0bdC.js";import{a as M,C as K}from"./Checkbox-BXQP90Az.js";import{R as Ft,a as J}from"./Radio-8thOcNOM.js";import{u as H,M as Dt}from"./MittStandardsøk-CwaiZyuf.js";import{S as At}from"./Search-BrBFxciS.js";import{B as $}from"./Box-B2FY8M9C.js";import{S as X}from"./MagnifyingGlass-D81_YMoq.js";import{A as It}from"./AlleFilterKomponent-Cdyb3h_C.js";const V=20,Tt=(e,t)=>e*t-t;class Z{addFilter(t,n){if(typeof t=="string"&&n!==void 0)this.filterClauses.push({term:{[t]:n}});else{const i=t;Array.isArray(i)?this.filterClauses.push(...i):i&&this.filterClauses.push(i)}return this}addMust(t,n){if(typeof t=="string"&&n!==void 0)this.mustClauses.push({term:{[t]:n}});else{const i=t;Array.isArray(i)?this.mustClauses.push(...i):i&&this.mustClauses.push(i)}return this}addShould(t,n){if(typeof t=="string"&&n!==void 0)this.shouldClauses.push({term:{[t]:n}});else{const i=t;Array.isArray(i)?this.shouldClauses.push(...i):i&&this.shouldClauses.push(i)}return this}addMustNot(t,n){if(typeof t=="string"&&n!==void 0)this.mustNotClauses.push({term:{[t]:n}});else{const i=t;Array.isArray(i)?this.mustNotClauses.push(...i):i&&this.mustNotClauses.push(i)}return this}addExists(t){return this.filterClauses.push({exists:{field:t}}),this}addRange(t,n){return this.filterClauses.push({range:{[t]:n}}),this}addBoolFilter(t){return this.filterClauses.push({bool:t}),this}setMinimumShouldMatch(t){return this.minimumShouldMatch=t,this}addSimpleQueryString(t,n,i="and"){return t&&t.length>0&&this.shouldClauses.push({simple_query_string:{query:t,fields:n,default_operator:i}}),this}addFritekstSøk(t,n){if(!t||t.length<1)return this;const i=[];return n==="tekstfelter"?i.push("stilling.adtext_no^0.5","stilling.uuid","stilling.tittel","stilling.employer.name","stilling.properties.jobtitle","stilling.properties.arbeidsplassenoccupation","stilling.properties.keywords"):i.push("stilling.adtext_no^0.5","stilling.uuid","stilling.tittel","stilling.annonsenr","stilling.employer.name","stilling.employer.orgnr","stilling.properties.jobtitle","stilling.properties.arbeidsplassenoccupation","stilling.properties.keywords"),this.shouldClauses.push({simple_query_string:{query:t,fields:i,default_operator:"and"}}),this}setSorting(t){return this.sorting=t,this}setAggregations(t){return this.aggregations=t,this}setPostFilter(t){return this.postFilterClause=t,this}buildStandardAggregation(t,n,i,m){const d=this.buildFilters(),r=new Set(["stilling.administration.navIdent","stillingsinfo.eierNavident","stillingsinfo.eierNavKontorEnhetId"]),c=l=>{if(!l)return l;if(l.term&&typeof l.term=="object"){const o=Object.keys(l.term)[0];return r.has(o)?null:l}if(l.exists&&l.exists.field==="stillingsinfo")return null;if(l.bool&&typeof l.bool=="object"){const o=l.bool,h=["filter","must","should","must_not"],y={};return(()=>{if(!Array.isArray(o.must))return!1;const a=o.must.some(A=>A.term&&A.term["stilling.administration.status"]==="DONE"),p=o.must.some(A=>A.exists&&A.exists.field==="stilling.publishedByAdmin"),j=o.must.some(A=>A.range&&A.range["stilling.published"]),mt=Array.isArray(o.must_not)&&o.must_not.some(A=>A.term&&(A.term["stilling.status"]==="REJECTED"||A.term["stilling.status"]==="DELETED"));return a&&p&&j&&mt})()||(h.forEach(a=>{if(Array.isArray(o[a])){const p=o[a].map(j=>c(j)).filter(j=>!!j);p.length>0&&(y[a]=p)}}),o.minimum_should_match&&y.should&&(y.minimum_should_match=o.minimum_should_match),Object.keys(y).length===0)?null:{bool:y}}return l},f=l=>{if(!l||Object.keys(l).length===0)return l;const o={};return["filter","must","should","must_not"].forEach(h=>{if(Array.isArray(l[h])){const y=l[h].map(D=>c(D)).filter(D=>!!D);y.length>0&&(o[h]=y)}}),l.minimum_should_match&&o.should&&(o.minimum_should_match=l.minimum_should_match),o},g=m?.includePortfolioInCounts?d:f(d),S=l=>{if(!l||Object.keys(l).length===0)return l;const o={},h=y=>{if(!Array.isArray(y))return!1;let D=!1,a=!1,p=!1;for(const j of y)if(j?.term&&j.term["stilling.administration.status"]==="DONE")D=!0;else if(j?.exists?.field==="stilling.publishedByAdmin")a=!0;else if(j?.range&&j.range["stilling.published"])p=!0;else return!1;return D&&a&&p&&y.length===3};return["filter","must","should","must_not"].forEach(y=>{if(Array.isArray(l[y])){const D=l[y].map(a=>{if(a&&a.term&&a.term["stilling.status"]||a&&a.terms&&a.terms["stilling.status"])return null;if(a&&a.bool){const p=S(a.bool);return p&&Object.keys(p).length===1&&p.must&&h(p.must)||Object.keys(p).length===0?null:{bool:p}}return a}).filter(a=>!!a);D.length>0&&(o[y]=D)}}),l.minimum_should_match&&o.should&&(o.minimum_should_match=l.minimum_should_match),o},_=S(g),N=this.postFilterClause&&typeof this.postFilterClause=="object"&&JSON.stringify(this.postFilterClause).includes('"stilling.status"')?this.postFilterClause:null;return{globalAggregering:{global:{},aggs:{visningsstatus:{filter:{bool:{filter:[..._&&Object.keys(_).length>0?[{bool:_}]:[]]}},aggs:{koder:{filters:{filters:{"Ikke publisert":{bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Åpen for søkere":{bool:{must:[{term:{"stilling.status":"ACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Stengt for søkere":{bool:{must:[{term:{"stilling.status":"INACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Utløpt - Stengt for søkere":{bool:{must:[{term:{"stilling.status":"INACTIVE"}},{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},Fullført:{bool:{must:[{term:{"stilling.status":"STOPPED"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},Avbrutt:{bool:{must:[{term:{"stilling.status":"DELETED"}}]}}}}}}},kategori:{filters:{filters:{stilling:{bool:{filter:[...g&&Object.keys(g).length>0?[{bool:g}]:[],{bool:{must_not:[{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}},{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}}]}}]}},jobbmesse:{bool:{filter:[...g&&Object.keys(g).length>0?[{bool:g}]:[],{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}]}}}}},stillingskategori:{filter:{bool:{filter:[...g&&Object.keys(g).length>0?[{bool:g}]:[]]}},aggs:{koder:{terms:{field:"stillingsinfo.stillingskategori",size:20,order:{_key:"asc"}}}}},geografi:{filter:{bool:{filter:[...g&&Object.keys(g).length>0?[{bool:g}]:[],...N?[N]:[]]}},aggs:{nested_geografi:{nested:{path:"stilling.locations"},aggs:{fylker:{terms:{field:"stilling.locations.countyCode",size:50,order:{_key:"asc"}},aggs:{stillinger:{reverse_nested:{},aggs:{unique_count:{cardinality:{field:"stilling.uuid"}}}}}},kommuner:{terms:{field:"stilling.locations.municipalCode",size:200,order:{_key:"asc"}}},utenCountyCode:{filter:{bool:{should:[{bool:{must_not:[{exists:{field:"stilling.locations.countyCode"}}]}},{term:{"stilling.locations.countyCode":""}}],minimum_should_match:1}},aggs:{fylker:{terms:{field:"stilling.locations.county.keyword",size:20,order:{_key:"asc"}},aggs:{stillinger:{reverse_nested:{},aggs:{unique_count:{cardinality:{field:"stilling.uuid"}}}}}}}}}}}}}}}}setStandardAggregation(t,n,i,m){const d=i&&i.length>0?i.join(" "):void 0,r=this.buildStandardAggregation(t,n,d,m);return this.aggregations={...this.aggregations,...r},this}buildFilters(){const t={};return this.filterClauses.length>0&&(t.filter=this.filterClauses),this.mustClauses.length>0&&(t.must=this.mustClauses),this.shouldClauses.length>0&&(t.should=this.shouldClauses,this.minimumShouldMatch!==void 0?t.minimum_should_match=this.minimumShouldMatch:this.mustClauses.length===0&&this.filterClauses.length===0&&(t.minimum_should_match=1)),this.mustNotClauses.length>0&&(t.must_not=this.mustNotClauses),t}build(t=V,n=0){const i=this.buildFilters(),m={size:t,from:n,track_total_hits:!0};return Object.keys(i).length>0?m.query={bool:i}:m.query={match_all:{}},this.sorting&&this.sorting.length>0&&(m.sort=this.sorting.length===1?this.sorting[0]:this.sorting),Object.keys(this.aggregations).length>0&&(m.aggs=this.aggregations),this.postFilterClause&&(m.post_filter=this.postFilterClause),m}constructor(){this.filterClauses=[],this.mustClauses=[],this.shouldClauses=[],this.mustNotClauses=[],this.sorting=[],this.aggregations={},this.postFilterClause=null}}const wt=({totaltAntallTreff:e})=>{const t=w(),n=Rt(e,V);return n<=1?null:u.jsx(_t,{size:"small",className:"my-4 flex justify-center",page:t.side,count:n,onPageChange:i=>t.setSide(i)})},Rt=(e,t)=>{const n=Math.ceil(e/t),m=1e4/40-1;return Math.min(n,m)};wt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};function Lt(){const e=w(),t=U();function n(r){if(r.length===2){const c=t.data?.filter(f=>f.type===I.FYLKE).find(f=>f.lokasjon.fylkesnummer===r);return c?c.navn:""}else{const c=t.data?.filter(f=>f.type===I.KOMMUNE).find(f=>f.lokasjon.kommunenummer===r);return c?c.navn:""}}const i=[];e.fritekst&&e.fritekst.length>0&&i.push({type:[...e.fritekst],setVerdi:r=>e.setFritekstListe(r)}),e.statuser.length>0&&i.push({type:[...e.statuser],setVerdi:r=>e.setStatuser(r),mapVerdiNavn:r=>R(r)});const m=[],d=[];return e.inkludering.forEach(r=>{const c=yt.find(g=>g.hovedtag===r),f=e.inkluderingUnderkategori.filter(g=>c?.subtags.includes(g));f.length>0?d.push(...f):m.push(r)}),d.length>0&&i.push({type:[...d],setVerdi:r=>e.setInkluderingUnderkategori(r),mapVerdiNavn:r=>q[r]||r}),m.length>0&&i.push({type:[...m],setVerdi:r=>e.setInkludering(r),mapVerdiNavn:r=>q[r]||r}),e.publisert.length>0&&i.push({type:[...e.publisert],setVerdi:r=>e.setPublisert(r),mapVerdiNavn:r=>R(r)}),e.kategori.length>0&&i.push({type:[...e.kategori],setVerdi:r=>e.setKategori(r),mapVerdiNavn:r=>R(r)}),e.fylker.length>0&&i.push({type:[...e.fylker],setVerdi:r=>e.setFylker(r),mapVerdiNavn:r=>R(n(r))}),e.kommuner.length>0&&i.push({type:[...e.kommuner],setVerdi:r=>e.setKommuner(r),mapVerdiNavn:r=>R(n(r))}),u.jsx("div",{className:"mt-2",children:u.jsx(vt,{filtre:i,tømFiltreProps:{fjernFritekst:()=>e.setFritekstListe([])}})})}Lt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips"};function Bt(e,t){const n={...e||{}},i=t?.aggs||t?.aggregations||{},m={...n,aggs:i};return m.track_total_hits===void 0&&(m.track_total_hits=!0),m}const tt=(e,t)=>{const n=e.filter.fritekst,i=n.some(c=>/^R?\d+$/.test(c)),m=["innen","på","av","og","for","med","som","mv.","o.l."],d=n.map(c=>`(+${c.split(" ").filter(g=>g.length>1&&!m.includes(g.toLowerCase())).map(g=>g.trim()).join(" +")})`).join(" | ");let r;i||(r="tekstfelter"),d&&d.length>0&&t.addFritekstSøk(d,r).setMinimumShouldMatch(n.length?"1":"0")},et=(e,t)=>{if(e.geografiData&&e.filter.fylker?.length>0||e.filter.kommuner?.length>0){const n=e.geografiData?.filter(l=>l.type===I.FYLKE).filter(l=>l.lokasjon.fylkesnummer&&e.filter?.fylker.includes(l.lokasjon.fylkesnummer))??[],i=e.geografiData?.filter(l=>l.type===I.KOMMUNE).filter(l=>l.lokasjon.kommunenummer&&e.filter?.kommuner.includes(l.lokasjon.kommunenummer))??[],m=n.filter(l=>l.type===I.FYLKE&&l.lokasjon.fylkesnummer&&!i.some(o=>o.lokasjon.fylkesnummer===l.lokasjon.fylkesnummer)).flatMap(l=>e.geografiData?.filter(o=>o.lokasjon.fylkesnummer===l.lokasjon.fylkesnummer&&o.type===I.KOMMUNE)??[]),r=[...n.filter(l=>l.lokasjon.fylkesnummer&&!i.some(o=>o.lokasjon.fylkesnummer===l.lokasjon.fylkesnummer)),...i,...m],c=r.filter(l=>l.type===I.FYLKE);if(r.filter(l=>l.type===I.FYLKE).length===0&&r.filter(l=>l.type===I.KOMMUNE).length===0)return;const g=r.filter(l=>l.type===I.KOMMUNE).flatMap(l=>{const o=l.lokasjon.kommunenummer&&Ct.get(l.lokasjon.kommunenummer)?.map(h=>h.nummer);return[l.lokasjon.kommunenummer,...o||[]]}),S=new Set([...c].flatMap(l=>{const o=Nt.get(jt(l.navn))?.map(h=>h.navn.toUpperCase())||[];return[l.navn,...o]})),_=S.size===0?[]:[{terms:{"stilling.locations.county.keyword":Array.from(S).map(l=>l.toUpperCase())}}],N=g.length===0?[]:[{terms:{"stilling.locations.municipalCode":g}}];t.addFilter({nested:{path:"stilling.locations",query:{bool:{should:[..._,...N],minimum_should_match:1}}}})}},st=(e,t)=>{e.filter.inkludering&&e.filter.inkludering.length>0&&t.addFilter({terms:{"stilling.properties.tags":e.filter.inkludering}})},it=(e,t)=>{const n=e.filter.kategori;n.includes(x.Jobbmesse)&&t.addBoolFilter({should:[{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}],minimum_should_match:1}),n.includes(x.Stilling)&&!n.includes(x.Jobbmesse)&&t.addBoolFilter({must_not:[{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}},{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}]})},nt=(e,t)=>{e.formidlinger?t.addMust("stillingsinfo.stillingskategori","FORMIDLING"):t.addBoolFilter({must_not:[{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}},{term:{"stillingsinfo.stillingskategori":"FORMIDLING"}}]}),e.filter.portefølje===B.INTERN?(t.addFilter({exists:{field:"stillingsinfo"}}),t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}]})):e.filter.portefølje===B.VIS_MINE?e.navIdent&&(t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}),t.addBoolFilter({should:[{term:{"stilling.administration.navIdent":e.navIdent}},{term:{"stillingsinfo.eierNavident":e.navIdent}}],minimum_should_match:1})):e.filter.portefølje===B.MITT_KONTOR?(e.eierNavKontorEnhetId&&t.addFilter({term:{"stillingsinfo.eierNavKontorEnhetId":e.eierNavKontorEnhetId}}),t.addBoolFilter({must_not:[{bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}}]}},{term:{"stilling.status":"DELETED"}}]})):e.filter.portefølje===B.ARBEIDSPLASSEN_NO&&(t.addFilter({term:{"stilling.privacy":"SHOW_ALL"}}),t.addBoolFilter({must_not:[{term:{"stilling.source":"DIR"}}]}),e.filter.utenOppdrag?t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}]}):t.addFilter({exists:{field:"stillingsinfo"}}))},Kt=(e,t)=>{const n=e.filter.sortering,i={publisert:[{"stilling.published":{order:"desc"}}],utløpsdato:[{"stilling.expires":{order:"asc"}}],relevans:[]},d=i[n||"publisert"]||i.publisert;d&&d.length>0&&t.setSorting(d)},Mt=()=>[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],Vt=e=>{e.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:Mt()})},lt=(e,t)=>{const n=e.filter.statuser,i=n.length===0,m=n.length===Object.values(v).length;if(e.navIdent||Vt(t),i||m)return;const d=[];n.includes(v.ApenForSokere)&&d.push({bool:{must:[{term:{"stilling.status":"ACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),n.includes(v.Fullfort)&&d.push({bool:{must:[{term:{"stilling.status":"STOPPED"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),n.includes(v.UtloptStengtForSokere)&&d.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}},{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),n.includes(v.StengtForSokere)&&d.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),n.includes(v.IkkePublisert)&&d.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),n.includes(v.Slettet)&&d.push({term:{"stilling.status":"DELETED"}}),d.length>0&&t.setPostFilter({bool:{should:d,minimum_should_match:1}})};function Ot(e){const t=new Z;nt(e,t),tt(e,t),lt(e,t),it(e,t),et(e,t),Kt(e,t),(e.filter.inkludering.length>0||e.filter.inkluderingUnderkategori.length>0)&&t.addFilter(st(e,t));const n=Tt(e.filter.side,V);return t.build(V,n)}function Pt(e){const t=new Z;return nt(e,t),tt(e,t),lt(e,t),it(e,t),et(e,t),(e.filter.inkludering.length>0||e.filter.inkluderingUnderkategori.length>0)&&t.addFilter(st(e,t)),t.setStandardAggregation(e.navIdent,e.eierNavKontorEnhetId,e.filter.fritekst,{formidlinger:e.formidlinger,utenOppdrag:e.filter.utenOppdrag,includePortfolioInCounts:!0}),t.build(0,0)}const Jt=b({label:s(),score:k()}),Ut=b({konseptId:k(),label:s(),styrk08:s()}),Gt=b({adtext:s().nullish(),sourceurl:s().nullish(),applicationdue:s().nullish(),applicationemail:s().nullish(),applicationmail:s().nullish(),applicationlabel:C([s(),k()]).nullish(),applicationurl:s().nullish(),employer:s().nullish(),employerdescription:C([s(),k()]).nullish(),employerhomepage:s().nullish(),engagementtype:s().nullish(),extent:s().nullish(),occupation:s().nullish(),positioncount:k().nullish(),salary:k().nullish(),starttime:s().nullish(),role:s().nullish(),sector:s().nullish(),location:s().nullish(),externalref:C([s(),k()]).nullish(),jobtitle:s().nullish(),keywords:s().nullish().nullable(),sourcecreated:s().nullish(),sourceupdated:s().nullish(),logomain:s().nullish(),logolisting:s().nullish(),author:s().nullish(),address:C([s(),k()]).nullish(),industry:s().nullish(),nace2:T().nullish(),searchtags:E(Jt).nullish(),searchtagsai:E(s()).nullish(),classification_styrk08_score:k().nullish(),classification_input_source:s().nullish(),classification_styrk08_code:C([k(),s()]).nullish(),classification_esco_code:s().nullish(),categories:E(T()).nullish(),euresflagg:C([s(),L()]).nullish(),hasInterestform:C([s(),L(),k()]).nullish(),remote:s().nullish(),workLanguage:C([s(),E(s())]).nullish(),finnSource:s().nullish(),adtextFormat:s().nullish(),tags:E(s()).nullish(),ontologyJobtitle:Ut.nullish(),workschedule:C([s(),E(s())]).nullish(),workhours:C([s(),E(s())]).nullish(),workday:C([s(),E(s())]).nullish(),facebookpage:s().nullish(),contactperson:s().nullish(),contactpersontitle:s().nullish(),contactpersonemail:s().nullish(),contactpersonphone:s().nullish(),linkedinpage:s().nullish(),jobpercentage:C([s(),k()]).nullish(),jobpercentagerange:s().nullish(),jobarrangement:s().nullish(),twitteraddress:s().nullish(),admintags:s().nullish(),arbeidsplassenoccupation:s().nullish(),needDriversLicense:L().nullish(),experience:s().nullish(),copyOfExistingAd:s().nullish(),under18:s().nullish(),education:E(s()).nullish(),certificate:s().nullish(),expertise:s().nullish(),practice:s().nullish(),hardrequirements:T().nullish(),softrequirements:T().nullish(),personalattributes:T().nullish(),_approvedby:s().nullish(),_noorgnr:C([s(),L()]).nullish(),_providerid:C([s(),k()]).nullish(),_versionid:k().nullish(),_score:T().nullish(),_scoretotal:k().nullish()}),qt=b({name:s(),role:s(),title:s(),email:s(),phone:s()}),zt=b({status:s(),remarks:E(s()),comments:s(),reportee:s(),navIdent:s()}),Qt=b({name:s(),publicName:s(),orgnr:s().nullable(),parentOrgnr:s().nullable(),orgform:s()}),Yt=b({styrkCode:s(),name:s()}),Wt=b({tittel:s(),uuid:s(),annonsenr:s().nullable(),status:s(),privacy:s(),published:s().nullable(),publishedByAdmin:s().nullable(),expires:s().nullable(),created:s(),updated:s(),employer:Qt.optional().nullable(),categories:E(Yt),source:s(),medium:s(),businessName:s().nullable(),locations:E(ct),reference:s(),administration:zt.optional(),properties:Gt.optional(),contacts:E(qt)}),Ht=b({stilling:Wt,stillingsinfo:ht.optional().nullable()}),$t=b({total:k(),successful:k(),skipped:k(),failed:k()}),Xt=b({value:k(),relation:s()}),Zt=b({_index:s(),_type:s(),_id:s(),_score:T(),_source:Ht,sort:E(k())}),te=b({total:Xt,max_score:T(),hits:E(Zt)}),ee=b({took:k(),timed_out:L(),_shards:$t,hits:te}),se=ee.pick({hits:!0}),ie=b({visningsStatusBuckets:E(b({key:s(),count:k()})).optional(),kategoriBuckets:b({stilling:k().optional(),jobbmesse:k().optional()}).optional(),geografi:b({fylker:E(b({key:s(),count:k()})).optional(),kommuner:E(b({key:s(),count:k()})).optional()}).optional()}),ne=b({hits:se.shape.hits,antall:ie,tookTreff:k().optional().nullable(),tookAggs:k().optional().nullable()}),le=`${pt.internUrl}`,G=({filter:e,eierNavKontorEnhetId:t,navIdent:n,formidlinger:i,finnStillingerForKandidat:m})=>{const d=U(),r=Ot({filter:e,eierNavKontorEnhetId:t,navIdent:n,geografiData:d.data,formidlinger:i}),c=Pt({filter:{...e,side:1},eierNavKontorEnhetId:t,navIdent:n,geografiData:d.data,formidlinger:i}),f=Bt(r,c);return ft(d.isLoading?null:{url:le,body:f},async S=>{const _=await fetch(S.url,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(S.body)});if(!_.ok)throw new Error("Feil ved stillingssøk");const N=await _.json(),l=ne.safeParse(N);return l.success?l.data:N})},rt=({geografi:e,hideLegend:t})=>{const n=w(),{fylker:i,setFylker:m,kommuner:d,setKommuner:r}=n,{brukerData:{ident:c},valgtNavKontor:f}=O(),g=G({filter:n,eierNavKontorEnhetId:f?.navKontor,navIdent:c,formidlinger:n.formidlinger}),S=g.data?.antall?.geografi?.fylker||[],_=g.data?.antall?.geografi?.kommuner||[],N=xt(_),l=g.isLoading||g.isValidating,o=a=>l?"-":a?S.find(p=>String(p.key)===String(a))?.count??0:0,h=a=>l?"-":a?N.find(p=>z(p.key)===z(a))?.count??0:0,y=a=>o(a),D=e?.filter(a=>a.type===I.FYLKE)?.map(a=>({...a,kommuner:e?.filter(p=>p.type===I.KOMMUNE)?.filter(p=>a.lokasjon.fylkesnummer===p.lokasjon.fylkesnummer).sort((p,j)=>p.navn.localeCompare(j.navn))})).sort((a,p)=>a.navn.localeCompare(p.navn));return u.jsx(M,{size:"small",hideLegend:t,legend:"Område",value:i||[],onChange:m,children:D?.map(a=>u.jsxs(F.Fragment,{children:[u.jsxs(K,{value:a.lokasjon.fylkesnummer,children:[P(a.navn)," (",y(a.lokasjon.fylkesnummer),")"]}),a.lokasjon.fylkesnummer&&i.includes(a.lokasjon.fylkesnummer)&&a.kommuner&&a.kommuner.length>1&&u.jsx(M,{className:"ml-4",onChange:r,hideLegend:!0,legend:`Velg kommuner i ${P(a.navn)}`,value:d||[],children:a.kommuner.map(p=>u.jsxs(K,{value:p.lokasjon.kommunenummer,children:[P(p.navn)," (",h(p.lokasjon.kommunenummer),")"]},p.lokasjon.kommunenummer))})]},a.lokasjon.fylkesnummer))})};rt.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function ot({hideLegend:e}){const t=U();return u.jsx(kt,{hooks:[t],children:n=>u.jsx(rt,{geografi:n,hideLegend:e})})}ot.__docgenInfo={description:"",methods:[],displayName:"GeografiFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const Q=e=>{switch(e){case x.Stilling:return"Stilling";case x.Jobbmesse:return"Jobbmesse";default:return""}};function at({hideLegend:e}){const t=w(),{kategori:n,setKategori:i}=t,{brukerData:m,valgtNavKontor:d}=O(),r=G({filter:t,eierNavKontorEnhetId:d?.navKontor,navIdent:m?.ident,formidlinger:t.formidlinger}),c=r.data?.antall?.kategoriBuckets,f=r.isLoading||r.isValidating,g=S=>{if(f)return"-";if(c){if(S===x.Stilling)return c.stilling||0;if(S===x.Jobbmesse)return c.jobbmesse||0}return 0};return u.jsxs(M,{hideLegend:e,size:"small",legend:"Kategori",value:n,onChange:i,children:[u.jsxs(K,{value:x.Stilling,children:[Q(x.Stilling)," (",g(x.Stilling),")"]}),u.jsxs(K,{value:x.Jobbmesse,children:[Q(x.Jobbmesse)," (",g(x.Jobbmesse),")"]})]})}at.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function ut({hideLegend:e}){const t=w(),{statuser:n,setStatuser:i,portefølje:m}=t,{brukerData:{ident:d},valgtNavKontor:r}=O(),c=G({filter:t,eierNavKontorEnhetId:r?.navKontor,navIdent:d,formidlinger:t.formidlinger}),f=F.useRef(0),g=c.data?.antall?.visningsStatusBuckets||[],S=c.isLoading||c.isValidating,_=o=>S?"-":g.find(h=>h.key===o)?.count??0,N=o=>{const h=n||[];h.includes(o)?i(h.filter(y=>y!==o)):i([...h,o])},l=[v.ApenForSokere,v.StengtForSokere,v.UtloptStengtForSokere,v.Fullfort,v.IkkePublisert];return F.useEffect(()=>{f.current<1&&!t.formidlinger&&!S&&(n?.length??0)===0&&(i([v.ApenForSokere]),f.current=f.current+1)},[S,n,i,t.formidlinger]),u.jsx(M,{legend:e?void 0:"Status",size:"small",children:u.jsx("div",{className:"flex flex-col gap-2",children:l.map(o=>{if(o===v.IkkePublisert&&m!==B.VIS_MINE)return null;const h=!!n?.includes(o),y=o===v.UtloptStengtForSokere?"Utløpt":o;return u.jsxs(K,{checked:h,onChange:()=>N(o),value:o,disabled:S,size:"small",children:[y," (",_(o),")"]},o)})})})}ut.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function dt({hideLegend:e}){const t=w(),n=i=>{t.setSortering(i)};return u.jsxs(Ft,{size:"small",hideLegend:e,legend:"Sorter",value:t.sortering,onChange:n,className:"pb-2",children:[u.jsx(J,{value:"publiseringsdato",children:"Publiseringsdato"}),u.jsx(J,{value:"utløpsdato",children:"Utløpsdato"}),u.jsx(J,{value:"mestRelevant",children:"Mest relevant"})]})}dt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function gt({alltidÅpen:e}){const{fritekst:t,setFritekstListe:n}=w(),[i,m]=F.useState(""),[d,r]=F.useState(!1),[c,f]=F.useState(!1),g=H(),S=F.useRef(null),_=F.useRef(null),N=Y(),l=()=>{r(!1),f(!1),N.push("/stilling?brukStandardsok=true")},o=()=>{if(i.trim()){const h=[...t,i];n(h),m("")}r(!1),f(!1)};return F.useEffect(()=>{!e&&c&&_.current&&_.current.focus()},[e,c]),F.useEffect(()=>{const h=y=>{S.current&&!S.current.contains(y.target)&&r(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]),u.jsxs("div",{className:"relative",ref:S,children:[u.jsx(At,{ref:_,onKeyDownCapture:h=>{h.key==="Enter"?(h.preventDefault(),o()):h.key==="Escape"&&(f(!1),m(""),r(!1))},onFocus:()=>r(!0),onBlur:()=>{setTimeout(()=>{i.trim()||f(!1),r(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:i,onChange:h=>m(h),onSearchClick:o}),d&&g.data&&c&&u.jsx($.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:u.jsx("div",{className:"p-2",children:u.jsx(W,{variant:"tertiary",size:"small",icon:u.jsx(X,{}),onClick:l,className:"w-full justify-start",children:"Standardssøk"})})})]})}gt.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};const re=({formidlinger:e})=>{const[t,n]=F.useState(!1),{harRolle:i}=O(),m=H(),d=F.useRef(null),r=Y(),c=i([St.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),f=()=>{n(!1),r.push("/stilling?brukStandardsok=true")};return F.useEffect(()=>{const g=S=>{d.current&&!d.current.contains(S.target)&&n(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]),u.jsxs("div",{className:"@container flex flex-row items-center justify-between",children:[u.jsx(bt,{}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"relative",ref:d,children:t&&m.data&&u.jsx($.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:u.jsx("div",{className:"p-2",children:u.jsx(W,{variant:"tertiary",size:"small",icon:u.jsx(X,{}),onClick:f,className:"w-full justify-start",children:"Standardssøk"})})})}),u.jsx("div",{className:"block @[720px]:hidden",children:u.jsx("div",{className:"whitespace-nowrap",children:u.jsxs(It,{children:[u.jsx(gt,{alltidÅpen:!0}),u.jsx(Dt,{}),u.jsx(dt,{}),c&&!e&&u.jsx(ut,{}),u.jsx(ot,{}),!e&&u.jsx(at,{}),u.jsx(Et,{})]})})})]})]})};re.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};export{rt as F,ot as G,at as K,re as S,ut as a,gt as b,Lt as c,dt as d,wt as e};
