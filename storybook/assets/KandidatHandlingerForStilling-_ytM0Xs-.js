import{cG as K,U as h,r as m,j as s,d as T,u as S,aI as N,cE as x,A as _}from"./iframe-ft6w6Wdm.js";import{u as b}from"./KandidatlisteContext-B1I5LHQm.js";import{D as E}from"./DelMedArbeidsgiver-CvNqkvqr.js";import{D as M}from"./DelMedKandidatModal-awvil6vy.js";import{E as j,a as C}from"./EndreArkivertStatusModal-TJ2IMsUd.js";import{S as I,F as w}from"./FjernFåttJobbenKnapp-LAufp_nk.js";import{K as k,S as D}from"./KandidatHendelseTagVisning-DEOmc8sw.js";import{a as U}from"./KandidatHendelseTag-BzevYHoG.js";import{R as V}from"./RegistrerFåttJobbenKnapp-Cq1Yn8m9.js";import{S as R}from"./SendSmsModal-DpthHqlp.js";import{V as $}from"./VelgInternStatus-CZ8EPYx6.js";import{A as o}from"./Accordion-pGD-n_s9.js";const B=(e,r)=>`${h.internUrl}/veileder/kandidatlister/${e}/kandidater/${r}/utfall`,J=async(e,r,a,t)=>await K(B(a,t),{utfall:e,navKontor:r}),q=async(e,r,a)=>await K(`${h.internUrl}/veileder/kandidat/arbeidsgiverliste/${e}/${r}`,{navKontor:a}),A=({kandidatnummer:e,navKontor:r})=>{const[a,t]=m.useState(!1),{reFetchKandidatliste:n,kandidatlisteId:i}=b(),l=async()=>{t(!0),await q(i,e,r).finally(()=>{t(!1),n()})};return s.jsx(T,{loading:a,icon:s.jsx(I,{}),variant:"tertiary",size:"small",className:"self-center",onClick:l,children:"Fjern CV fra arbeidsgiver"})};A.__docgenInfo={description:"",methods:[],displayName:"FjernDelingMedArbeidsgiver",props:{kandidatnummer:{required:!0,tsType:{name:"string"},description:""},navKontor:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};const y=({kandidatHendelser:e})=>{const a=[...e.cvHendelser??[],...e.utfallsendringer??[],...e.varsler??[]].filter(t=>t!==void 0).sort((t,n)=>(n.dato?.getTime()||0)-(t.dato?.getTime()||0));return s.jsx("div",{className:"flex flex-col gap-4",children:a.map((t,n)=>s.jsx(k,{kandidatHendelse:t},n))})};y.__docgenInfo={description:"",methods:[],displayName:"KandidatHendelser",props:{kandidatHendelser:{required:!0,tsType:{name:"KandidatHendelser"},description:""}}};const L=({kandidat:e})=>{const{valgtNavKontor:r}=S(),{stillingsData:a,kandidatlisteInfo:t}=N(),{reFetchKandidatliste:n,lukketKandidatliste:i,kandidatlisteId:l}=b(),[g,u]=m.useState(!1),c=m.useRef(null),f=e.kandidatHendelser.utfallsendringer?.some(d=>"sendtTilArbeidsgiversKandidatliste"in d.raw&&d.raw.sendtTilArbeidsgiversKandidatliste),F=e.utfall===x.FATT_JOBBEN,p=e.kandidatHendelser.utfallsendringer?.some(d=>d.tekst===U.CV_slettet_hos_arbeidsgiver),v=async d=>{u(!0);try{await J(d,r?.navKontor??"",l,e.kandidatnr),n()}catch(H){new _({message:"Feil ved endring av utfall",error:H})}u(!1)};return s.jsxs("div",{className:"@container flex flex-col gap-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2",children:["Kanditatliste for ",a.stilling.title]}),e.arkivert?s.jsx(D,{kandidat:e}):s.jsx(k,{sidebar:!0,kandidatHendelse:e.kandidatHendelser.sisteHendelse})]}),s.jsx("div",{children:t&&s.jsx($,{lukketKandidatliste:t.kandidatlisteStatus==="LUKKET",kandidatnr:e.kandidatnr,status:e.status})})]}),!e.arkivert&&!F&&!f&&!p&&s.jsxs("div",{className:"grid grid-cols-1 gap-2 @md:grid-cols-2",children:[s.jsx(M,{markerteKandidater:[e],fjernAllMarkering:()=>{},sidebar:!0}),s.jsx(E,{markerteKandidater:[e],sidebar:!0})]}),e.arkivert?s.jsx("div",{className:"flex flex-1 justify-end",children:s.jsx(j,{lukketKandidatliste:i,slettet:e.arkivert,modalRef:c})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 gap-2 @md:grid-cols-2",children:[s.jsx(R,{markerteKandidater:[e],fjernAllMarkering:()=>{}}),e.utfall!==x.FATT_JOBBEN?s.jsx(V,{loading:g,endreUtfallForKandidat:v,lukketKandidatliste:i}):s.jsx(w,{loading:g,endreUtfallForKandidat:v,lukketKandidatliste:i}),!p&&f&&s.jsx(A,{kandidatnummer:e.kandidatnr,navKontor:r?.navKontor??null})]}),s.jsx("div",{className:"flex flex-1 justify-end",children:s.jsx(j,{lukketKandidatliste:i,slettet:e.arkivert,modalRef:c})})]}),s.jsx(C,{modalRef:c,kandidat:e,kandidatlisteId:l}),s.jsx(o,{children:s.jsxs(o.Item,{children:[s.jsx(o.Header,{children:"Vis alle hendelser og varsler"}),s.jsx(o.Content,{children:s.jsx(y,{kandidatHendelser:e.kandidatHendelser})})]})})]})};L.__docgenInfo={description:"",methods:[],displayName:"KandidatHandlingerForStilling",props:{kandidat:{required:!0,tsType:{name:"KandidatVisningProps"},description:""}}};export{L as K};
