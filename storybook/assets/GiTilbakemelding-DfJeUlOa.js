import{r,dF as p,j as e,au as v,d as j,a7 as b,B as f}from"./iframe-8sML1qxS.js";import{S as g}from"./PersonChat-CLOXZH5Z.js";import{P as h}from"./Popover-DuKik7fa.js";const S=()=>{const n=r.useRef(null),[s,l]=r.useState(!1),[x,i]=r.useState(null),[d,u]=r.useState("idle"),{open:c}=p();return r.useEffect(()=>{},[]),r.useEffect(()=>{if(!s||!n.current)return;const t=n.current,a=()=>t.shadowRoot&&t.shadowRoot.childElementCount>0?(u("loaded"),!0):!1;if(a())return;const o=new MutationObserver(()=>{a()&&o.disconnect()});o.observe(t,{childList:!0,subtree:!0}),t.shadowRoot&&o.observe(t.shadowRoot,{childList:!0,subtree:!0});const k=window.setTimeout(()=>{u(m=>m==="loaded"?m:"error")},4e3);return()=>{o.disconnect(),window.clearTimeout(k)}},[s]),e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"small",onClick:t=>{if(s){l(!1),i(null);return}i(t.currentTarget),u(a=>a==="loaded"?"loaded":"loading"),l(!0)},"aria-expanded":s,variant:"tertiary-neutral",icon:e.jsx(g,{}),className:c?"w-full justify-start text-left":"",children:c&&"Gi tilbakemelding"}),s&&v.createPortal(e.jsx(h,{open:s,onClose:()=>{l(!1),i(null)},anchorEl:x,children:e.jsxs(h.Content,{className:"w-[360px]",children:[d==="loading"&&e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(b,{size:"xsmall",title:"Laster"}),e.jsx(f,{children:"Laster tilbakemeldingsskjema…"})]}),d==="error"&&e.jsx(f,{className:"text-red-600",children:"Vi klarte ikke å laste tilbakemeldingsskjemaet. Prøv igjen senere."}),e.jsx("skyra-survey",{ref:n,className:"mt-2 h-full w-full",slug:"arbeids-og-velferdsetaten-nav/oversikt",hidden:d==="error",consent:"true"})]})}),document.body)]})};S.__docgenInfo={description:"",methods:[],displayName:"GiTilbakemelding"};export{S as G};
