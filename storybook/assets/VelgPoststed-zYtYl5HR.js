import{b0 as F,aJ as q,d2 as z,r as u,j as t,E as L,o as w,aj as N,l as B,cU as b,bF as D,C as T,B as O}from"./iframe-CTO0EUng.js";import{B as $}from"./Box-Dpt4cmlj.js";import{T as h}from"./TextField-BApCDa3N.js";import{S as I}from"./Plus-CMPa-tvJ.js";import{a as k}from"./util-CIAlv6iK.js";import{C as K}from"./ComboboxProvider-BBtBC4Tl.js";function M(){const{control:g,register:m,getValues:d,formState:{errors:l}}=F(),f=q(),{fields:c,append:r,remove:x}=z({control:g,name:"stilling.contactList"}),i=u.useRef(!1);return u.useEffect(()=>{if(!i.current){if(c.length===0){const n=f?.stillingsData?.stilling?.contactList??[];n.length>0?n.forEach(a=>r({name:a.name??"",title:a.title??"",email:a.email??"",phone:a.phone??""})):r({name:"",title:"",email:"",phone:""})}i.current=!0}},[]),t.jsxs("div",{className:"flex flex-col gap-4",children:[c.map((n,a)=>{const o=`stilling.contactList.${a}`,e=l?.stilling?.contactList?.[a]??{};return t.jsxs($.New,{background:"neutral-moderate",padding:"3",borderRadius:"large",className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"py-1 flex justify-between items-start",children:[t.jsxs(L,{className:"font-semibold",children:["Kontakt ",a+1]}),t.jsx(w,{size:"small",type:"button",variant:"tertiary",icon:t.jsx(N,{}),disabled:c.length===1,onClick:()=>x(a),title:"fjern",children:"Fjern"})]}),t.jsx(h,{label:"Navn",...m(`${o}.name`),error:e?.name?.message}),t.jsx(h,{label:"Tittel",...m(`${o}.title`),error:e?.title?.message}),t.jsx(L,{children:"Velg hvordan de kan nÃ¥s (minst en)"}),t.jsx(h,{label:"E-post",type:"email",...m(`${o}.email`,{validate:p=>{const y=d(`${o}.phone`);return!p&&!y?"Fyll inn e-post eller telefon":!0}}),error:e?.email?.message}),t.jsx(h,{label:"Telefonnummer",type:"tel",...m(`${o}.phone`,{validate:p=>{const y=d(`${o}.email`);return!p&&!y?"Fyll inn telefon eller e-post":!0}}),error:e?.phone?.message})]},n.id)}),t.jsx("div",{children:t.jsx(w,{type:"button",variant:"tertiary",icon:t.jsx(I,{}),size:"small",onClick:()=>r({name:"",title:"",email:"",phone:""}),children:"Legg til kontaktperson"})})]})}M.__docgenInfo={description:"",methods:[],displayName:"LeggTilKontaktperson"};const G=({lokasjoner:g,leggTilLokasjon:m,fjernLokasjonId:d})=>{const l=B(),[f,c]=u.useState([]),[r,x]=u.useState(""),[i,n]=u.useState(!1),a=g;u.useEffect(()=>{r.length>1&&c([...l.data?.filter(e=>e.type===b.KOMMUNE).filter(e=>e.navn.toLowerCase().includes(r.toLocaleLowerCase())).map(e=>`${k(e.navn)} (kommune)`)??[],...l.data?.filter(e=>e.type===b.FYLKE).filter(e=>e.navn.toLowerCase().includes(r.toLocaleLowerCase())).map(e=>`${k(e.navn)} (fylke)`)??[],...l.data?.filter(e=>e.type===b.LAND)?.filter(e=>e.navn.toLowerCase().includes(r.toLocaleLowerCase())).map(e=>`${k(e.navn)} (land)`)??[]])},[l.data,r]);const o=(e,p)=>{const y=e.match(/\(([^)]+)\)$/),v=y?y[1]:"",S=e.replace(/\s*\([^)]*\)$/,"").trim(),s=l.data?.filter(j=>j.type.toLowerCase()===v.toLowerCase()).find(j=>j.navn.toLowerCase()===S.toLowerCase());if(p&&s)m({address:s.lokasjon.adresse,postalCode:null,city:s.lokasjon.poststed,county:s.lokasjon.fylke,municipal:s.lokasjon.kommune,municipalCode:s.lokasjon.kommunenummer,country:s.lokasjon.land});else{const j=a.find(C=>{const P=s?.lokasjon.kommune&&C.municipal===s.lokasjon.kommune,V=s?.lokasjon.fylke&&C.county===s.lokasjon.fylke,E=s?.lokasjon.land&&C.country===s.lokasjon.land;return v.toLowerCase()==="kommune"?P:v.toLowerCase()==="fylke"?V:v.toLowerCase()==="land"?E:!1});j?.id&&d(j.id)}};return t.jsx(K,{isListOpen:i,disabled:l.isLoading,toggleListButton:!1,selectedOptions:a.map(e=>e.municipal?`${k(e.municipal)} (kommune)`:e.county?`${k(e.county)} (fylke)`:e.country?`${k(e.country)} (land)`:""),onChange:e=>{n(e.length>0),x(e)},onToggleSelected:(e,p)=>{o(e,p)},label:"",description:"Du kan velge flere kommuner, fylker eller land",options:f,isMultiSelect:!0})};G.__docgenInfo={description:"",methods:[],displayName:"VelgKommuneFylkeEllerLand",props:{lokasjoner:{required:!0,tsType:{name:"Array",elements:[{name:"GeografiDTOmedId"}],raw:"GeografiDTOmedId[]"},description:""},leggTilLokasjon:{required:!0,tsType:{name:"signature",type:"function",raw:"(lokasjon: GeografiDTO) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"LocationSchema"}],raw:"z.infer<typeof LocationSchema>"},name:"lokasjon"}],return:{name:"void"}}},description:""},fjernLokasjonId:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const _=({control:g,lokasjonsFelt:m,index:d,fjern:l,oppdaterPoststed:f,postSted:c})=>{const[r,x]=u.useState(""),i=D(r);return u.useEffect(()=>{if(!i.isLoading){const n=i.data?.korrigertNavnBy;i.data&&n&&n!==c&&f(i.data)}},[i,c,f,d]),t.jsx($.New,{background:"neutral-moderate",padding:"3",borderRadius:"large",children:t.jsxs("div",{children:[t.jsxs("div",{className:"py-3 flex justify-between",children:[t.jsxs(L,{children:["Adresse ",d+1]}),t.jsx("div",{children:t.jsx(w,{size:"small",type:"button",variant:"tertiary",icon:t.jsx(N,{}),onClick:()=>l(),title:"fjern",children:"Fjern"})})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(T,{name:`${m}.${d}.address`,control:g,render:({field:n})=>t.jsx(h,{label:"Gateadresse",...n,value:n.value||""})}),t.jsxs("div",{className:"flex flex-row gap-4 justify-baseline",children:[t.jsx("div",{className:"w-32",children:t.jsx(T,{name:`${m}.${d}.postalCode`,control:g,render:({field:n})=>t.jsx(h,{label:"Postnummer",type:"number",maxLength:4,...n,value:n.value||"",onChange:a=>{x(a.target.value);const o=a.target.value.replace(/\D/g,"");o.length<=4&&n.onChange(o)}})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(O,{weight:"semibold",children:"Poststed"}),t.jsx("div",{className:"mt-4",children:t.jsx(L,{children:c})})]})]})]})]})})};_.__docgenInfo={description:"",methods:[],displayName:"VelgPoststed",props:{control:{required:!0,tsType:{name:"Control",elements:[{name:"any"}],raw:"Control<any>"},description:""},lokasjonsFelt:{required:!0,tsType:{name:"string"},description:""},index:{required:!0,tsType:{name:"number"},description:""},fjern:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},oppdaterPoststed:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: PamPostdataDTO) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"PostdataSchema"}],raw:"z.infer<typeof PostdataSchema>"},name:"value"}],return:{name:"void"}}},description:""},postSted:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};export{M as L,_ as V,G as a};
