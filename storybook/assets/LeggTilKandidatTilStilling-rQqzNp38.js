import{j as t,r as s,O as _,aL as T,u as S,d as b,cs as F,A as I}from"./iframe-Cb_tEQhr.js";import{L as h}from"./LenkeKortMedIkon-SqTFn4Wd.js";import{U as d}from"./umamiEvents-CYDHrNFb.js";import{l as w}from"./leggTilKandidat-DbPQJ4Yi.js";import{L as M}from"./LeggTilKandidater-BA2d39ND.js";import{M as o}from"./Modal-CxDUfJGc.js";function C({stillingId:i}){const r=`/stilling/${i}/finn-kandidater`;return t.jsx(h,{tittel:"Finn og foreslÃ¥ jobbsÃ¸kere",beskrivelse:"Se alle som leter etter jobb nÃ¥, og finn riktig person til jobben",ikon:"ðŸ‘‰",href:r,"data-umami-event":d.Stilling.finn_kandidater_knapp})}C.__docgenInfo={description:"",methods:[],displayName:"FinnKandidaterKnapp",props:{stillingId:{required:!0,tsType:{name:"string"},description:""}}};const B=({stillingsId:i,stillingsTittel:r})=>{const a=s.useRef(null),{track:g}=_(),{kandidatlisteInfo:c,refetchKandidatliste:j}=T(),{valgtNavKontor:K,visVarsel:p}=S(),[l,m]=s.useState([]),[y,v]=s.useState(0),[k,u]=s.useState(!1),x=()=>{v(n=>n+1),g(d.Stilling.Ã¥pne_legg_til_kandidat_modal),a.current?.showModal()},L=async()=>{u(!0);const n=l.filter(e=>e.aktÃ¸rId===null),f=l.map(e=>e.aktÃ¸rId).filter(e=>e!=null);if(c?.kandidatlisteId&&(f.length>0||n.length>0))try{await w(f,i);for(const e of n)await F(c.kandidatlisteId,{fnr:e.fÃ¸dselsnummer,fÃ¥ttJobb:!0,navKontor:K?.navKontor??"",stillingsId:i});g(d.Stilling.legg_til_kandidat,{antall:l.length}),p({tekst:"JobbsÃ¸kere ble lagt til i stillingen",type:"success"}),m([]),j?.(),a.current?.close()}catch(e){throw p({tekst:"Noe gikk galt ved lagring av jobbsÃ¸kere",type:"error"}),new I({message:"Veil ved legg til jobbsÃ¸kere",error:e})}u(!1)};return t.jsxs(s.Fragment,{children:[t.jsx(h,{tittel:"Legg til jobbsÃ¸kere",beskrivelse:"Vet du fÃ¸dselsnummeret til personen, kan du legge dem til med en gang.",onClick:x,ikon:"âž•",loading:k}),t.jsxs(o,{width:"600px",ref:a,header:{closeButton:!1,heading:`Legg til jobbsÃ¸kere til ${r??"stilling"}`},children:[t.jsx(o.Body,{children:t.jsx(M,{callBack:n=>{m(n)}},y)}),t.jsxs(o.Footer,{children:[t.jsx(b,{disabled:l.length===0,onClick:L,children:"Legg til jobbsÃ¸ker"}),t.jsx(b,{loading:k,type:"button",variant:"secondary",onClick:()=>a.current?.close(),children:"Avbryt"})]})]})]},i)};B.__docgenInfo={description:"",methods:[],displayName:"LeggTilKandidatTilStilling",props:{stillingsId:{required:!0,tsType:{name:"string"},description:""},stillingsTittel:{required:!0,tsType:{name:"string"},description:""}}};export{C as F,B as L};
