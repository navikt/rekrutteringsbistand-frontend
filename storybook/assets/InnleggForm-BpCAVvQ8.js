import{h2 as T,hA as A,h4 as R,r as a,j as e,L as K,B as L,aP as w}from"./iframe-05oBaVfn.js";import{K as D}from"./KiAnalyse-CKwiXs4p.js";import{K as N}from"./KiAnalysePanel-CjenEIWc.js";import{u as P}from"./useAutosave-DHkNhXEh.js";import{u as V}from"./useFormFeltMedKiValidering-DVEEz6dr.js";import{R as B}from"./RikTekstEditor-CNhkI7RQ.js";import{S as _}from"./Skeleton-DU4yx8Oy.js";const i="rediger-innlegg-htmlcontent-form",l=({onUpdated:d})=>{const{rekrutteringstreffId:g}=T(),{data:m,isLoading:r}=A(g),{formState:c}=R(),n=m?.[0],u=n?n.htmlContent??null:void 0,{save:f}=P(),[h,p]=a.useState(Date.now()),{analyse:v,analyseError:y,validating:x,kiErrorBorder:k,forceSave:C,showAnalysis:j,erRedigeringAvPublisertTreff:b,runValidationAndMaybeSave:E,onForceSave:F,control:I,setValue:o,kiLoggLoading:s}=V({feltType:"innlegg",fieldName:"htmlContent",savedValue:u,saveCallback:f,onUpdated:d,requireHasCheckedToShow:!0});return a.useEffect(()=>{const t=n?.htmlContent??"";o("htmlContent",t,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1}),p(Date.now())},[o,n?.htmlContent]),e.jsxs("section",{className:"space-y-3",children:[(r||s)&&e.jsx(_,{variant:"text"}),!r&&!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:i,children:n?"Endre innlegg":"Skriv nytt innlegg"}),e.jsx(L,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})]}),e.jsx("div",{className:`border rounded-lg ${k?"border-red-500":"border-gray-300"}`,onBlur:t=>{const S=t.currentTarget;setTimeout(async()=>{S.contains(document.activeElement)||c.isDirty&&await E()},0)},children:e.jsx(w,{name:"htmlContent",control:I,render:({field:t})=>e.jsx(B,{id:i,tekst:t.value??"",onChange:t.onChange},h)})}),e.jsx(D,{}),e.jsx(N,{validating:x,analyse:v,analyseError:y,forceSave:C,showAnalysis:j,erRedigeringAvPublisertTreff:b,onForceSave:F,ariaLabel:"Analyse av innlegg"})]})]})};l.displayName="InnleggForm";l.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{l as I};
