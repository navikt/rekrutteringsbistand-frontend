import{r as p,q as j,j as e,o as a,C as h,v,w as m,x as b}from"./iframe-DLRfPnIA.js";import{R as w}from"./RikTekstEditor-FnXM-pQG.js";import{S as k}from"./Pencil-CRlHzljX.js";import{M as s}from"./Modal-dGxTQDz5.js";import{T as E}from"./TextField-DTuggito.js";function S({eksisterendeNyhet:t,refetch:u}){const n=p.useRef(null),[i,l]=p.useState(!1),{control:d,handleSubmit:x,reset:c,formState:{errors:y}}=j({defaultValues:t||{tittel:"",innhold:""}}),f=async r=>{if(t){const o={...t,...r};l(!0);try{await v(o)}catch(g){throw new m({message:"Noe gikk galt ved oppdatering av nyhet",error:g})}}else try{await b(r)}catch(o){throw new m({message:"Noe gikk galt ved oppretting av nyhet",error:o})}u(),l(!1),n.current?.close(),c()};return e.jsxs("div",{children:[t?e.jsx(a,{onClick:()=>n.current?.showModal(),variant:"tertiary",icon:e.jsx(k,{}),children:"Endre"}):e.jsx(a,{size:"small",onClick:()=>n.current?.showModal(),children:t?"Oppdater nyhet":"Opprett nyhet"}),e.jsx(s,{className:"w-full",ref:n,header:{heading:t?"Oppdater nyhet":"Opprett ny nyhet"},children:e.jsxs("form",{onSubmit:x(f),children:[e.jsx(s.Body,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(h,{name:"tittel",control:d,rules:{required:"Tittel er pÃ¥krevd"},render:({field:r})=>e.jsx(E,{...r,label:"Tittel",error:y.tittel?.message})}),e.jsxs("div",{children:[e.jsx("label",{className:"navds-label mb-2 block",children:"Innhold"}),e.jsx(h,{name:"innhold",control:d,render:({field:r})=>e.jsx(w,{utviklerExtensions:!0,id:"oppdater-nyhet",tekst:r.value??"",onChange:r.onChange})})]})]})}),e.jsxs(s.Footer,{children:[e.jsx(a,{loading:i,type:"submit",children:"Oppdater nyhet"}),e.jsx(a,{loading:i,type:"button",variant:"secondary",onClick:()=>{c(),n.current?.close()},children:"Avbryt"})]})]})})]})}S.__docgenInfo={description:"",methods:[],displayName:"EndreNyhetModal",props:{eksisterendeNyhet:{required:!1,tsType:{name:"z.infer",elements:[{name:"nyheterSchema"}],raw:"z.infer<typeof nyheterSchema>"},description:""},refetch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{S as E};
