import{r as o,l as I,m as h,aq as x,u as y,bn as K,cJ as d,j as e,d as r,H as z,B as O,x as _,cR as N,cS as E,cE as C,J as F,cA as w,i as R,S as P}from"./iframe-BYISswbs.js";import{B as L}from"./Box-DW-VY5Ou.js";import{S as B}from"./EyeSlash-BwayUw2P.js";import{S as D}from"./CircleSlash-B342U9jj.js";import{M as v}from"./Modal-BXSPKmam.js";import{C as A}from"./Checkbox-jZTBCxw8.js";import{S as M}from"./Pencil-q73ghBtx.js";import{F as V}from"./FullførStillingModal-TV5LruJB.js";import{S as G}from"./Tasklist-DM7ztcPq.js";import{s as H}from"./PersonbrukerTekst-mzNtqZ86.js";var T=function(t,n){var l={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(l[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)n.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(l[s[i]]=t[s[i]]);return l};const W=o.forwardRef((t,n)=>{var{title:l,titleId:s}=t,i=T(t,["title","titleId"]);let a=I();return a=l?s||"title-"+a:void 0,h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:n,"aria-labelledby":a},i),l?h.createElement("title",{id:a},l):null,h.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 6.25a.75.75 0 0 0-.75.75v10c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V7a.75.75 0 0 0-.75-.75zm.75 10v-8.5h1.5v8.5zm6.25-10a.75.75 0 0 0-.75.75v10c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V7a.75.75 0 0 0-.75-.75zm.75 10v-8.5h1.5v8.5z",clipRule:"evenodd"}))});var $=function(t,n){var l={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(l[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)n.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(l[s[i]]=t[s[i]]);return l};const J=o.forwardRef((t,n)=>{var{title:l,titleId:s}=t,i=$(t,["title","titleId"]);let a=I();return a=l?s||"title-"+a:void 0,h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:n,"aria-labelledby":a},i),l?h.createElement("title",{id:a},l):null,h.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.62 6.354a.75.75 0 0 1 .744-.01l9 5a.75.75 0 0 1 0 1.312l-9 5A.75.75 0 0 1 8.25 17V7a.75.75 0 0 1 .37-.646m1.13 1.92v7.451L16.456 12z",clipRule:"evenodd"}))});function q(){const{stillingsData:t,refetch:n}=x(),{valgtNavKontor:l,brukerData:s}=y(),i=K(),[a,c]=o.useState(!1),[p,u]=o.useState(!1),[g,k]=o.useState(!1),b=async(S,j)=>{c(!0);try{const m=await N({...t,stilling:{...t.stilling,status:S,privacy:p?"SHOW_ALL":"INTERNAL_NOT_SHOWN",administration:{...t.stilling.administration,status:j}}},{eierNavident:s.ident,eierNavn:s.navn,eierNavKontorEnhetId:l?.navKontor});m.stilling.uuid&&(n?.(),i.push(`/stilling/${m.stilling.uuid}`))}finally{c(!1)}},f=t.stilling.status;return f===d.Aktiv?e.jsx(e.Fragment,{children:e.jsx(r,{loading:a,icon:e.jsx(W,{}),size:"small",className:"mt-4 w-full",onClick:()=>b(d.Inaktiv,E.Pending),children:"Pause søkerforslag"})}):f===d.Inaktiv?e.jsxs(e.Fragment,{children:[e.jsxs(L.New,{background:"brand-beige-moderate",borderRadius:"large",className:"my-4 p-4",children:[e.jsx(z,{level:"2",size:"xsmall",className:"mb-2",children:"Du mottar ikke søkerforslag"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(O,{size:"small",children:"Oppdraget er skjult. Folk kan fortsatt finne oppdraget ved å filtrerer det inn."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(O,{size:"small",children:"Andre kan ikke foreslå jobbsøkere."})]})]})]}),e.jsxs(e.Fragment,{children:[e.jsx(r,{loading:a,icon:e.jsx(J,{}),size:"small",className:"mt-4 w-full",onClick:()=>k(!0),children:"Åpne søkerforslag"}),e.jsxs(v,{open:g,onClose:()=>k(!1),header:{heading:"Åpne søkerforslag",size:"small",closeButton:!1},width:"small",children:[(t?.stilling?.properties?.applicationurl!=null||t?.stilling?.properties?.applicationemail!=null)&&e.jsx(v.Body,{children:e.jsx(_,{children:e.jsx(A,{checked:p,onChange:S=>u(S.target.checked),children:"Publiser stillingsoppdraget offentlig på arbeidsplassen.no også"})})}),e.jsxs(v.Footer,{children:[e.jsx(r,{type:"button",onClick:()=>b(d.Aktiv,E.Done),children:"Åpne søkerforslag"}),e.jsx(r,{type:"button",variant:"secondary",onClick:()=>k(!1),children:"Avbryt"})]})]})]})]}):null}q.__docgenInfo={description:"",methods:[],displayName:"EndreSøkeforslag"};function U(){const{stillingsData:t,erEier:n,kandidatlisteInfo:l}=x(),s=K();return n?e.jsx(r,{disabled:l?.kandidatlisteStatus==="LUKKET",variant:"secondary",size:"small",className:"h-5 w-full",icon:e.jsx(M,{}),onClick:()=>{t.stillingsinfo?.stillingskategori===C.Formidling?s.push(`/etterregistrering/${t.stilling.uuid}/rediger`):s.push(`/stilling/${t.stilling.uuid}/rediger`)},children:"Rediger"}):null}U.__docgenInfo={description:"",methods:[],displayName:"RedigerStillingKnapp"};function Q(){const[t,n]=o.useState(!1),{stillingsData:l,erEier:s}=x(),i=F(l,s);return e.jsxs(e.Fragment,{children:[e.jsx(r,{onClick:()=>n(!0),disabled:i.data?.status===w.Lukket&&l.stilling.status===d.Stoppet||!i.data?.kandidatlisteId,variant:"secondary",size:"small",className:"h-5 w-full",icon:e.jsx(G,{}),children:"Fullfør"}),t&&e.jsx(V,{setVisModal:()=>n(!1)})]})}Q.__docgenInfo={description:"",methods:[],displayName:"FullførStillingKnapp"};function X(){const[t,n]=o.useState(!1),{stillingsData:l,refetch:s,kandidatlisteInfo:i}=x(),{brukerData:a,valgtNavKontor:c,visVarsel:p}=y(),u=async()=>{n(!0);try{await Promise.all([N({...l,stilling:{...l.stilling,status:d.Stoppet}},{eierNavident:a.ident,eierNavn:a.navn,eierNavKontorEnhetId:c?.navKontor})]),p({type:"success",tekst:"Stillingoppdrag stoppet."}),s?.()}catch(g){p({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new R({message:"Klarte ikke å stoppe oppdrag via stopp knapp",error:g})}n(!1)};return i?.kandidatlisteStatus===w.Lukket&&l.stilling.status!==d.Stoppet?e.jsx(r,{loading:t,size:"small",className:"w-full",onClick:u,children:"Set som avsluttet"}):null}X.__docgenInfo={description:"",methods:[],displayName:"StoppStillingKnapp"};function Y(){const{stillingsData:t,refetch:n,erEier:l}=x(),{valgtNavKontor:s,brukerData:i,visVarsel:a}=y(),c=F(t,l),[p,u]=o.useState(!1),[g,k]=o.useState(!1),[b,f]=o.useState(!1),S=async j=>{u(!0);try{await H(j,w.Åpen),await N({...t,stilling:{...t.stilling,status:d.Aktiv,privacy:g?"SHOW_ALL":"INTERNAL_NOT_SHOWN"}},{eierNavident:i.ident,eierNavn:i.navn,eierNavKontorEnhetId:s?.navKontor}),a({type:"success",tekst:"Oppdraget gjenåpnet."}),n?.(),c.mutate()}catch(m){a({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new R({message:"Klarte ikke å gjenåpne oppdrag",error:m})}u(!1)};return e.jsx(P,{hooks:[c],children:j=>e.jsxs(e.Fragment,{children:[e.jsx(r,{loading:p,size:"small",className:"w-full",onClick:()=>f(!0),children:"Gjenåpne"}),e.jsxs(v,{open:b,onClose:()=>f(!1),header:{heading:"Gjenåpne stillingsoppdrag",size:"small",closeButton:!1},width:"small",children:[t?.stillingsinfo?.stillingskategori!==C.Formidling&&(t?.stilling?.properties?.applicationurl!=null||t?.stilling?.properties?.applicationemail!=null)&&e.jsx(v.Body,{children:e.jsx(_,{children:e.jsx(A,{checked:g,onChange:m=>k(m.target.checked),children:"Publiser stillingsoppdraget offentlig på arbeidsplassen.no også"})})}),e.jsxs(v.Footer,{children:[e.jsx(r,{type:"button",onClick:()=>S(j.kandidatlisteId),children:"Gjenåpne"}),e.jsx(r,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Avbryt"})]})]})]})})}Y.__docgenInfo={description:"",methods:[],displayName:"GjenåpneStillingKnapp"};export{q as E,Q as F,Y as G,U as R,X as S};
