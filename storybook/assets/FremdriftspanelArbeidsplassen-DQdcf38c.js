import{r as d,m as R,h as z,u as K,j as e,S as F,e as m,x as B,h_ as D,w as C,av as H,A as P,H as c,B as i,aL as V}from"./iframe-DLBscwX4.js";import{K as w}from"./schema.zod-DOoLLlZf.js";import{s as I,P as L}from"./PersonbrukerTekst-DsXzgF79.js";import{u as M}from"./useKandidatlisteForEier-CFGHpzCA.js";import{K as A}from"./KandidatTyper-CkRsvxsW.js";import{M as g}from"./Modal-Dt_mbh-2.js";import{B as N}from"./Box-p_5R4LhJ.js";import{V as v,H as b}from"./VStack-C-r64OhW.js";import{C as J}from"./Checkbox-KsGX2Lvj.js";import{S as E}from"./PlusCircle-DbZs5Kee.js";import{S as U}from"./PersonChat-BZVf0erA.js";import{S as G}from"./FileText-BBqkV51h.js";import{T as $}from"./TilgangskontrollForInnhold-xs4pih4k.js";import{f as W}from"./util-dwlesY8K.js";import{S as q}from"./Handshake-Da-m44n6.js";import{S as Q}from"./CircleSlash-BQSrLRYl.js";import{S as X}from"./ArrowForward-CiQueKc-.js";import{S as Y}from"./Briefcase-AImPiIj3.js";var Z=function(s,a){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&a.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(s);l<r.length;l++)a.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(s,r[l])&&(t[r[l]]=s[r[l]]);return t};const ee=d.forwardRef((s,a)=>{var{title:t,titleId:r}=s,l=Z(s,["title","titleId"]);let n=R();return n=t?r||"title-"+n:void 0,d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":n},l),t?d.createElement("title",{id:n},t):null,d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.286 11.483a.75.75 0 0 1 .099-.33l4.5-7.795a2.75 2.75 0 0 1 4.763 2.75l-4.5 7.795a.75.75 0 0 1-.236.25l-3.732 2.465a.75.75 0 0 1-1.162-.671zm1.486.266-.167 2.79L14.937 13l3.028-5.243-2.165-1.25zm6.577-6.39-.634 1.097-2.165-1.25.634-1.098a1.25 1.25 0 1 1 2.165 1.25M12.5 4.75H5.75v15.5h11.5V15.5a.75.75 0 0 1 1.5 0v5c0 .69-.56 1.25-1.25 1.25h-12c-.69 0-1.25-.56-1.25-1.25v-16c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 1 0 1.5",clipRule:"evenodd"}))});var se=function(s,a){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&a.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(s);l<r.length;l++)a.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(s,r[l])&&(t[r[l]]=s[r[l]]);return t};const re=d.forwardRef((s,a)=>{var{title:t,titleId:r}=s,l=se(s,["title","titleId"]);let n=R();return n=t?r||"title-"+n:void 0,d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":n},l),t?d.createElement("title",{id:n},t):null,d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.75 4.02a.766.766 0 0 0-.927-.75l-.366.08a30.8 30.8 0 0 1-12.914 0l-.367-.08a.766.766 0 0 0-.926.75V13a7.75 7.75 0 0 0 15.5 0zm-14 .903c4.127.814 8.373.814 12.5 0V13a6.25 6.25 0 1 1-12.5 0zm4 4.577a2.25 2.25 0 1 1 4.5 0v.75h.25c.69 0 1.25.56 1.25 1.25V15a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v-3.5c0-.69.56-1.25 1.25-1.25h.25zm3 0v.75h-1.5V9.5a.75.75 0 0 1 1.5 0m-3 2.25v2.5h4.5v-2.5z",clipRule:"evenodd"}))});function _(){const{stillingsData:s,refetch:a,erEier:t}=z(),{visVarsel:r}=K(),[l,n]=d.useState(!1),f=M(s,t),[O,x]=d.useState(!1),p=async(o,u)=>{n(!0);try{await I(o,u),r({type:"success",tekst:"Du har nå fullført oppdraget."}),f.mutate(),a&&a()}catch(k){r({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new C({message:"Klarte ikke å fullføre oppdrag",error:k})}n(!1)};return e.jsx(F,{hooks:[f],children:o=>{const k=(o?.kandidater?.filter(j=>!j.arkivert)??[]).filter(j=>j.utfall===A.FATT_JOBBEN).length+(o?.formidlingerAvUsynligKandidat?.filter(j=>j.utfall===A.FATT_JOBBEN)?.length||0),y=o?.antallStillinger,S=k,h=S===0;return o.status===w.Lukket?e.jsx(m,{size:"small",loading:l,onClick:()=>I(o.kandidatlisteId,w.Åpen),children:"Gjenåpne oppdraget"}):e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"small",loading:l,onClick:()=>x(!0),children:"Fullfør oppdraget"}),e.jsxs(g,{width:600,open:O,onClose:()=>x(!1),header:{heading:"Fullfør oppdraget"},children:[e.jsxs(g.Body,{children:[e.jsx(B,{className:"mb-3",children:h?"Ingen stillinger er besatt":`${S} av ${y} 
                            ${y===1?"stilling":"stillinger"} er
                            besatt.`}),e.jsxs(N.New,{borderRadius:"large",background:"neutral-soft",className:"p-5",children:[e.jsx(B,{className:" font-bold",children:"Dette skjer når du fullfører"}),!h&&e.jsx(L,{})]})]}),e.jsxs(g.Footer,{children:[e.jsx(m,{type:"button",disabled:l||o.status===w.Lukket&&s.stilling.status===D.Stoppet,onClick:()=>o.kandidatlisteId&&p(o.kandidatlisteId,w.Lukket),children:"Fullfør"}),e.jsx(m,{type:"button",variant:"secondary",onClick:()=>x(!1),children:"Avbryt"})]})]})]})}})}_.__docgenInfo={description:"",methods:[],displayName:"HarKandidatlisteVisning"};const le="/api/stilling/opprett-stillingsinfo",te=async s=>(await H(le,s)).json();function T(){const{stillingsData:s,refetch:a}=z(),{brukerData:t,valgtNavKontor:r}=K(),[l,n]=d.useState(!1),[f,O]=d.useState(!1),[x,p]=d.useState(!1),o=s.stilling.employer?.name||"Ukjent bedrift",u=s.stilling.employer?.orgnr,k=s.stilling.title,y=s.stilling.uuid,S=async()=>{n(!0);try{await te({eierNavKontorEnhetId:r?.navKontor??"Ukjent Nav kontor",stillingsid:y,eierNavident:t.ident,eierNavn:t.navn})}catch(h){new C({message:"Feil under opprettelse av stillingsinfo",error:h})}finally{a?.(),n(!1),p(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"primary",size:"small",className:"my-2 h-5 w-full",onClick:()=>p(!0),children:"Bruk til rekrutteringsoppdrag"}),e.jsxs(g,{open:x,onClose:()=>p(!1),header:{heading:"Bruk annonsen til rekrutteringsoppdrag",closeButton:!0},width:"medium",children:[u?e.jsx(g.Body,{children:e.jsxs(v,{gap:"6",children:[e.jsx(i,{children:"Samarbeider du med en arbeidsgiver om å rekruttere, kan du bruke annonsen fra arbeidsplassen.no til det så slipper du å lage en ny annonsе."}),e.jsx(N.New,{background:"neutral-softA",className:" p-4 rounded-lg",children:e.jsxs(v,{gap:"2",children:[e.jsx(c,{size:"medium",level:"3",children:k}),e.jsx(c,{size:"small",level:"3",children:o}),e.jsxs(i,{size:"small",children:["Org.nr. ",u]})]})}),e.jsxs(v,{gap:"4",children:[e.jsx(c,{size:"small",level:"3",children:"Har du avtalt med arbeidsgiveren å bruke annonsen til rekruttering?"}),e.jsx(J,{checked:f,onChange:h=>O(h.target.checked),children:"Ja, vi har avtalt å bruke annonsen."})]}),e.jsxs(v,{gap:"4",children:[e.jsx(c,{size:"small",level:"3",children:"Hva som skjer"}),e.jsxs(v,{gap:"3",children:[e.jsxs(b,{gap:"3",align:"start",className:"items-start",children:[e.jsx(re,{className:"mt-1 flex-shrink-0"}),e.jsx(i,{className:"flex-1",children:"Du settes som eier av annonsen."})]}),e.jsxs(b,{gap:"3",align:"start",className:"items-start",children:[e.jsx(E,{className:"mt-1 flex-shrink-0"}),e.jsx(i,{className:"flex-1",children:"Nav-ansatte kan foreslå jobbsøkere til stillingen."})]}),e.jsxs(b,{gap:"3",align:"start",className:"items-start",children:[e.jsx(U,{className:"mt-1  flex-shrink-0"}),e.jsx(i,{className:"flex-1",children:"Du kan be jobbsøkere om samtykke til å dele CVen deres med arbeidsgiveren."})]}),e.jsxs(b,{gap:"3",align:"start",className:"items-start",children:[e.jsx(G,{className:"mt-1 flex-shrink-0"}),e.jsx(i,{className:"flex-1",children:"Arbeidsgiveren får en oversikt over oppdraget og foreslåtte jobbsøkere på arbeidsgivers min-side (nav.no)."})]})]})]})]})}):e.jsx(g.Body,{children:e.jsxs(P,{variant:"error",children:[e.jsx(c,{spacing:!0,size:"small",level:"3",children:"Annonsen kan dessverre ikke brukes til oppdrag"}),e.jsx(i,{className:"mb-4",children:"For å kunne bruke annonsen til rekrutteringsoppdrag trenger den :"}),e.jsx("ul",{className:"list-disc list-inside mb-4",children:e.jsx("li",{children:"et gyldig organisasjonsnummer."})}),e.jsx(i,{children:"Har du et oppdrag med arbeidsgiveren kan du opprette en stillingsoppdrag selv her i Rekrutteringsbistand."})]})}),u?e.jsx(g.Footer,{children:e.jsxs(b,{gap:"4",children:[e.jsx(m,{variant:"secondary",onClick:()=>p(!1),children:"Avbryt"}),e.jsx(m,{loading:l,variant:"primary",onClick:S,disabled:!f,children:"Fullfør"})]})}):e.jsx(g.Footer,{children:e.jsx(m,{variant:"secondary",onClick:()=>p(!1),children:"Lukk"})})]})]})}T.__docgenInfo={description:"",methods:[],displayName:"OpprettStillingsoppdrag"};function ae(){const{stillingsData:s}=z(),a=s.stilling.employer?.orgnr,t=s.stillingsinfo!==null,r=e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs(N.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(c,{size:"xsmall",level:"3",className:"mb-4",children:"Bruk til rekrutteringsoppdrag"}),e.jsxs("div",{className:"flex gap-4 flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(i,{size:"small",children:"Du kan bruke annonsen til rekrutteringsoppdrag hvis du har avtalt det med arbeidsgiveren."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(i,{size:"small",children:"Ved å bruke til oppdrag vil den fungere som interne annonser."})]})]})]})]}),l=e.jsxs(N.New,{background:"brand-beige-moderate",borderRadius:"large",padding:"3",children:[e.jsx(c,{size:"xsmall",level:"3",className:"mb-4",children:"Annonsen mangler et gyldig organisasjonsnummer."}),e.jsxs("div",{className:"flex gap-4 flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(i,{size:"small",children:"Det gjør at den kan ikke brukes til rekrutteringsoppdrag."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(i,{size:"small",children:"Har du et oppdrag med arbeidsgiveren kan du opprette et stillingsoppdrag selv her i Rekrutteringsbistand."})]})]})]});return e.jsxs($,{skjulVarsel:!0,kreverEnAvRollene:[V.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET],children:[e.jsx(c,{size:"small",level:"2",children:"Hentet fra arbeidsplassen.no"}),e.jsxs(i,{size:"small",textColor:"subtle",children:["den ",W({dato:s.stilling.published})]}),e.jsxs("div",{className:"flex flex-col gap-6 mt-6",children:[t?e.jsx(_,{}):a?r:l,e.jsxs(N.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(c,{size:"xsmall",level:"3",className:"mb-4",children:"Bruk til deling"}),e.jsxs("div",{className:"flex gap-4 flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(i,{size:"small",children:"Du kan dele stillingen med folk i aktivitetsplanen via systemet, eller ved å kopiere delingslenken."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(i,{size:"small",children:"Personen søker selv, eller med litt hjelp."})]})]})]})]})]})}ae.__docgenInfo={description:"",methods:[],displayName:"FremdriftspanelArbeidsplassen"};export{ae as F,_ as H,T as O};
