import{r as o,dw as w,j as s,aG as p,d as x}from"./iframe-BieBZBrC.js";import{S as b}from"./PersonChat-CMLExyWJ.js";import{P as m}from"./Popover-C_C8US79.js";const v=()=>{const e=o.useRef(null),[t,n]=o.useState(!1),[h,c]=o.useState(null),[u,d]=o.useState(!1),{open:f}=w();return o.useEffect(()=>{if(!e.current||!t){const r=window.setTimeout(()=>d(!1),0);return()=>window.clearTimeout(r)}const a=()=>{const r=e.current;return!!(r&&r.shadowRoot&&r.shadowRoot.childElementCount>0)},i=setTimeout(()=>{!a()&&t&&n(!1),d(!0)},250),l=new MutationObserver(()=>{u&&!a()&&t&&(n(!1),window.location.reload())});return e.current&&(l.observe(e.current,{childList:!0,subtree:!0,attributes:!0}),e.current.shadowRoot&&l.observe(e.current.shadowRoot,{childList:!0,subtree:!0})),()=>{clearTimeout(i),l.disconnect()}},[t,u]),s.jsxs(s.Fragment,{children:[s.jsx(x,{size:"small",onClick:a=>{c(a.currentTarget),n(i=>!i)},"aria-expanded":t,variant:"tertiary-neutral",icon:s.jsx(b,{}),className:f?"w-full text-left justify-start":"",children:f&&"Gi tilbakemelding"}),t&&p.createPortal(s.jsx(m,{open:t,onClose:()=>{n(!1),c(null)},anchorEl:h,children:s.jsx(m.Content,{className:"w-[360px]",children:s.jsx("skyra-survey",{ref:e,className:"w-full h-full",slug:"arbeids-og-velferdsetaten-nav/oversikt"})})}),document.body)]})};v.__docgenInfo={description:"",methods:[],displayName:"GiTilbakemelding"};export{v as G};
