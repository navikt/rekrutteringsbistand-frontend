import{be as E,bP as K,r as i,j as e,B as R,C as w}from"./iframe-BieBZBrC.js";import{u as A}from"./useAutosave-bRigfo09.js";import{K as L}from"./KiAnalyseIntro-BH8lyqib.js";import{K as N}from"./KiAnalysePanel-C445qfWP.js";import{u as P}from"./useFormFeltMedKiValidering-D0ewQzvW.js";import{R as V}from"./RikTekstEditor-CuBEHSpg.js";import{S as B}from"./Skeleton-C7szZK9Z.js";const S="rediger-innlegg-htmlcontent-form",l=({onUpdated:d})=>{const{rekrutteringstreffId:g}=E(),{data:m,isLoading:o}=K(g),n=m?.[0],u=n?n.htmlContent??null:void 0,{autosave:c}=A(),[f,h]=i.useState(0),{analyse:p,analyseError:v,validating:y,kiErrorBorder:j,harGodkjentKiFeil:x,showAnalysis:k,erRedigeringAvPublisertTreff:C,validerMedKiOgLagreVedGodkjenning:b,onGodkjennKiFeil:I,control:F,setValue:s,kiLoggLoading:a}=P({feltType:"innlegg",fieldName:"htmlContent",savedValue:u,saveCallback:c,onUpdated:d});return i.useEffect(()=>{const t=n?.htmlContent??"";s("htmlContent",t,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1});const r=window.setTimeout(()=>{h(T=>T+1)},0);return()=>window.clearTimeout(r)},[s,n?.htmlContent]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"space-y-3",children:[e.jsx(L,{title:"Introduksjon"}),(o||a)&&e.jsx(B,{variant:"text"}),!o&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:e.jsx(R,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})}),e.jsx("div",{className:`border rounded-lg ${j?"border-red-500":"border-gray-300"}`,onBlur:t=>{const r=t.currentTarget;setTimeout(async()=>{r.contains(document.activeElement)||await b()},0)},children:e.jsx(w,{name:"htmlContent",control:F,render:({field:t})=>e.jsx(V,{id:S,tekst:t.value??"",onChange:t.onChange},f)})}),e.jsx(N,{validating:y,analyse:p,analyseError:v,harGodkjentKiFeil:x,showAnalysis:k,erRedigeringAvPublisertTreff:C,onGodkjennKiFeil:I,ariaLabel:"Analyse av innlegg"})]})]})})};l.displayName="InnleggForm";l.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{l as I};
