import{cH as F,V as h,r as c,j as e,d as M,u as N,av as _,cF as j,D as C}from"./iframe-nRhSYCvZ.js";import{F as E}from"./FullførStillingModal-CH1qjGwS.js";import{u as b}from"./KandidatlisteContext-uYh8gWUZ.js";import{D as V}from"./DelMedArbeidsgiver-DfxkGs7_.js";import{D as w}from"./DelMedKandidatModal-U9Pocy3v.js";import{E as K,a as D}from"./EndreArkivertStatusModal-CjlUbWqH.js";import{S as I,F as R}from"./FjernFåttJobbenKnapp-CEcmm-SP.js";import{K as k,S as U}from"./KandidatHendelseTagVisning-BqQ0YC5E.js";import{a as $}from"./KandidatHendelseTag-BE_yv2X7.js";import{R as B}from"./RegistrerFåttJobbenKnapp-wZfdatlA.js";import{S as J}from"./SendSmsModal-CIBKTsHV.js";import{V as q}from"./VelgInternStatus-rGzpwRCz.js";import{A as o}from"./Accordion-08DUDllZ.js";const L=(s,r)=>`${h.internUrl}/veileder/kandidatlister/${s}/kandidater/${r}/utfall`,O=async(s,r,a,t)=>await F(L(a,t),{utfall:s,navKontor:r}),P=async(s,r,a)=>await F(`${h.internUrl}/veileder/kandidat/arbeidsgiverliste/${s}/${r}`,{navKontor:a}),S=({kandidatnummer:s,navKontor:r})=>{const[a,t]=c.useState(!1),{reFetchKandidatliste:i,kandidatlisteId:n}=b(),d=async()=>{t(!0),await P(n,s,r).finally(()=>{t(!1),i()})};return e.jsx(M,{loading:a,icon:e.jsx(I,{}),variant:"tertiary",size:"small",className:"self-center",onClick:d,children:"Fjern CV fra arbeidsgiver"})};S.__docgenInfo={description:"",methods:[],displayName:"FjernDelingMedArbeidsgiver",props:{kandidatnummer:{required:!0,tsType:{name:"string"},description:""},navKontor:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};const H=({kandidatHendelser:s})=>{const a=[...s.cvHendelser??[],...s.utfallsendringer??[],...s.varsler??[]].filter(t=>t!==void 0).sort((t,i)=>(i.dato?.getTime()||0)-(t.dato?.getTime()||0));return e.jsx("div",{className:"flex flex-col gap-4",children:a.map((t,i)=>e.jsx(k,{kandidatHendelse:t},i))})};H.__docgenInfo={description:"",methods:[],displayName:"KandidatHendelser",props:{kandidatHendelser:{required:!0,tsType:{name:"KandidatHendelser"},description:""}}};const z=({kandidat:s})=>{const{valgtNavKontor:r}=N(),{stillingsData:a,kandidatlisteInfo:t}=_(),{reFetchKandidatliste:i,lukketKandidatliste:n,kandidatlisteId:d}=b(),[f,g]=c.useState(!1),m=c.useRef(null),[y,u]=c.useState(!1),p=s.kandidatHendelser.utfallsendringer?.some(l=>"sendtTilArbeidsgiversKandidatliste"in l.raw&&l.raw.sendtTilArbeidsgiversKandidatliste),A=s.utfall===j.FATT_JOBBEN,v=s.kandidatHendelser.utfallsendringer?.some(l=>l.tekst===$.CV_slettet_hos_arbeidsgiver),x=async l=>{g(!0);try{await O(l,r?.navKontor??"",d,s.kandidatnr),i()}catch(T){new C({message:"Feil ved endring av utfall",error:T})}g(!1)};return e.jsxs("div",{className:"@container flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2",children:["Kanditatliste for ",a.stilling.title]}),s.arkivert?e.jsx(U,{kandidat:s}):e.jsx(k,{sidebar:!0,kandidatHendelse:s.kandidatHendelser.sisteHendelse})]}),e.jsx("div",{children:t&&e.jsx(q,{lukketKandidatliste:t.kandidatlisteStatus==="LUKKET",kandidatnr:s.kandidatnr,status:s.status})})]}),!s.arkivert&&!A&&!p&&!v&&e.jsxs("div",{className:"grid grid-cols-1 gap-2 @md:grid-cols-2",children:[e.jsx(w,{markerteKandidater:[s],fjernAllMarkering:()=>{},sidebar:!0}),e.jsx(V,{markerteKandidater:[s],sidebar:!0})]}),s.arkivert?e.jsx("div",{className:"flex flex-1 justify-end",children:e.jsx(K,{lukketKandidatliste:n,slettet:s.arkivert,modalRef:m})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2 @md:grid-cols-2",children:[e.jsx(J,{markerteKandidater:[s],fjernAllMarkering:()=>{}}),s.utfall!==j.FATT_JOBBEN?e.jsx(B,{loading:f,endreUtfallForKandidat:x,lukketKandidatliste:n,visFullførStillingModal:u}):e.jsx(R,{loading:f,endreUtfallForKandidat:x,lukketKandidatliste:n}),!v&&p&&e.jsx(S,{kandidatnummer:s.kandidatnr,navKontor:r?.navKontor??null})]}),e.jsx("div",{className:"flex flex-1 justify-end",children:e.jsx(K,{lukketKandidatliste:n,slettet:s.arkivert,modalRef:m})})]}),e.jsx(D,{modalRef:m,kandidat:s,kandidatlisteId:d}),y&&e.jsx(E,{setVisModal:()=>u(!1)}),e.jsx(o,{children:e.jsxs(o.Item,{children:[e.jsx(o.Header,{children:"Vis alle hendelser og varsler"}),e.jsx(o.Content,{children:e.jsx(H,{kandidatHendelser:s.kandidatHendelser})})]})})]})};z.__docgenInfo={description:"",methods:[],displayName:"KandidatHandlingerForStilling",props:{kandidat:{required:!0,tsType:{name:"KandidatVisningProps"},description:""}}};export{z as K};
