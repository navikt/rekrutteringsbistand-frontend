import{r as c,l as F,m as y,G as le,j as n,B as se,d as z}from"./iframe-8sML1qxS.js";import{_ as f}from"./style-CCzhIJbR.js";import{f as A}from"./FilterChip-C0zZSntm.js";import{T as H}from"./TømFiltre-B908UAAy.js";import{d as ce}from"./util-B1cpXv4o.js";import{U as C}from"./umamiEvents-4lZbqD_K.js";import{C as B}from"./Chips-DG1m-SZ4.js";import{T as U}from"./Tooltip-1QmCSai9.js";var ie=function(r,d){var l={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&d.indexOf(t)<0&&(l[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(r);s<t.length;s++)d.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(r,t[s])&&(l[t[s]]=r[t[s]]);return l};const oe=c.forwardRef((r,d)=>{var{title:l,titleId:t}=r,s=ie(r,["title","titleId"]);let i=F();return i=l?t||"title-"+i:void 0,y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:d,"aria-labelledby":i},s),l?y.createElement("title",{id:i},l):null,y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.03 9.28-3.5 3.5a.75.75 0 0 1-1.06 0l-3.5-3.5a.75.75 0 1 1 1.06-1.06L12 13.44l2.97-2.97a.75.75 0 1 1 1.06 1.06",clipRule:"evenodd"}))});var de=function(r,d){var l={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&d.indexOf(t)<0&&(l[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(r);s<t.length;s++)d.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(r,t[s])&&(l[t[s]]=r[t[s]]);return l};const pe=c.forwardRef((r,d)=>{var{title:l,titleId:t}=r,s=de(r,["title","titleId"]);let i=F();return i=l?t||"title-"+i:void 0,y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:d,"aria-labelledby":i},s),l?y.createElement("title",{id:i},l):null,y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.03 10.22-3.5-3.5a.75.75 0 0 0-1.06 0l-3.5 3.5a.75.75 0 1 0 1.06 1.06L12 10.56l2.97 2.97a.75.75 0 1 0 1.06-1.06",clipRule:"evenodd"}))}),fe=({tømFiltreProps:r,filtre:d=[]})=>{const l=le(),[t,s]=c.useState(!1),[i,$]=c.useState(0),[h,P]=c.useState(null),[g,D]=c.useState(0),[W,J]=c.useState(0),[e,V]=c.useState(!1),[v,X]=c.useState(null),R=c.useRef(null),x=c.useRef(null),G=c.useRef(null),K=c.useRef(null),b=d.flatMap((a,o)=>(a.type||[]).map((u,N)=>{const I=a.mapVerdiNavn?A(a.mapVerdiNavn(u)):A(ce(u));return{key:`${o}-${u}-${N}`,label:I,remove:()=>a.setVerdi((a.type||[]).filter(E=>E!==u))}})),O=Math.max(0,b.length-i),Q=O>0;c.useEffect(()=>{t?l.track(C.Generell.åpne_filter_chip_panel):l.track(C.Generell.lukk_filter_chip_panel)},[t,l]),c.useLayoutEffect(()=>{if(!R.current||!x.current)return;const a=R.current.offsetWidth;if(!a)return;const o=x.current,u=Array.from(o.querySelectorAll("button[data-chip-measure]")),N=o.querySelector("button[data-clear-all]"),I=o.querySelector("div[data-control-wrapper]"),E=getComputedStyle(o),L=parseFloat(E.columnGap||E.gap||"0")||0,k=N?.offsetWidth||0,re=u.map(m=>m.offsetWidth),w=[];re.reduce((m,S,p)=>{const T=m+S+(p>0||k>0?L:0);return w.push(T),T},k);const ae=w[w.length-1]||k;let _=i,j=g;if(ae<=a)_=b.length,j=0;else{let m=i,S=g;for(let p=b.length;p>=0;p--){if(b.length-p===0){if((p===0?k:w[p-1])<=a){m=p,S=0;break}continue}const q=(I?.offsetWidth||0)+16+8,M=p===0?k:w[p-1];if(M+(M>0?L:0)+q<=a){m=p,S=q;break}}_=m,j=S}if(_===i&&j===g)return;const ne=window.requestAnimationFrame(()=>{_!==i&&$(_),j!==g&&D(j)});return()=>window.cancelAnimationFrame(ne)},[b,r,i,g,R,x]),c.useLayoutEffect(()=>{const a=G.current;if(a&&!h&&P(a.getBoundingClientRect().height),W===0&&x.current){const o=x.current.querySelector("button[data-collapse-measure]");if(o){const u=o.offsetWidth+8;J(u)}}},[h,W]),c.useEffect(()=>{let a;const o=()=>{clearTimeout(a),a=setTimeout(()=>$(0),150)};return window.addEventListener("resize",o),()=>{clearTimeout(a),window.removeEventListener("resize",o)}},[]);const Y=()=>{V(!0),v&&clearTimeout(v);const a=setTimeout(()=>{V(!1)},1e3);X(a)};if(c.useEffect(()=>()=>{v&&clearTimeout(v)},[v]),b.length===0)return null;const Z=t?b:b.slice(0,i),ee=t?h?`${h*8}px`:"600px":h?`${h}px`:"40px",te=t?(W||40)+16:0;return n.jsxs("div",{ref:R,className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" w-full",children:[n.jsx(f,{id:"dce7bc301f824f5a",dynamic:[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"],children:`.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar{width:16px;height:16px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-track{background:transparent;margin:2px}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(203, 213, 225, 0.8)":"transparent"};border-radius:8px;border:4px solid transparent;background-clip:content-box;transition:background.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(203,213,225,.8);background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(148,163,184,.9)!important;background-clip:content-box}.chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-corner{background:transparent}.chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-width:thin;scrollbar-color:${e?"rgba(203, 213, 225, 0.8)":"transparent"} transparent;transition:scrollbar-color.3s ease}.chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(203,213,225,.8)transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb{background:${e?"rgba(75, 85, 99, 0.8)":"transparent"};background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover::-webkit-scrollbar-thumb{background:rgba(75,85,99,.8);background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector::-webkit-scrollbar-thumb:hover{background:rgba(107,114,128,.9)!important;background-clip:content-box}.dark .chips-scroll-container.__jsx-style-dynamic-selector{scrollbar-color:${e?"rgba(75, 85, 99, 0.8)":"transparent"} transparent}.dark .chips-scroll-container.__jsx-style-dynamic-selector:hover{scrollbar-color:rgba(75,85,99,.8)transparent}`}),n.jsxs("div",{className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" relative flex justify-between",children:[n.jsx("div",{style:{maxHeight:ee,paddingRight:te},onScroll:Y,className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" chips-scroll-container min-w-0 flex-1 overflow-auto transition-all duration-300 ease-in-out",children:n.jsxs(B,{ref:G,size:"small",className:"flex flex-wrap items-center gap-2","aria-expanded":t,children:[r&&n.jsx("div",{className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:n.jsx(H,{...r,"data-clear-all":"true",className:"flex-shrink-0"})}),Z.map(a=>n.jsx(B.Removable,{onClick:a.remove,style:{whiteSpace:"nowrap",flexShrink:0},className:"flex-shrink-0",children:a.label},a.key)),!t&&O>0&&n.jsx(se,{onClick:()=>{s(!0),l.track(C.Generell.åpne_filter_chip_panel_tekst)},className:"text-s cursor-pointer whitespace-nowrap text-[var(--ax-text-accent-subtle)]",children:`+ ${O} filtre`})]})}),n.jsxs("div",{ref:x,"aria-hidden":"true",className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" invisible fixed left-[-9999px] flex flex-nowrap items-center gap-2",children:[r&&n.jsx("div",{className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" flex-shrink-0",children:n.jsx(H,{...r,"data-clear-all":!0,className:"flex-shrink-0"})}),b.map(a=>n.jsx(B.Removable,{"data-chip-measure":!0,onClick:o=>o.preventDefault(),className:"flex-shrink-0 whitespace-nowrap",children:a.label},`m-${a.key}`))]}),Q&&!t&&n.jsxs("div",{style:{width:g},className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute inset-y-0 right-0 flex items-center justify-end",children:[n.jsx("div",{style:{background:"linear-gradient(to right, rgba(0,0,0,0) 0%, var(--ax-surface-default) 55%)"},className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" pointer-events-none absolute inset-0"}),n.jsx("div",{className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" relative flex items-center gap-2 pr-2",children:n.jsx(U,{content:"Vis alle aktive filtre",children:n.jsx(z,{onClick:()=>{s(!0),l.track(C.Generell.åpne_filter_chip_panel)},size:"small",variant:"tertiary","aria-label":"Vis flere filtre",icon:n.jsx(oe,{})})})})]}),t&&n.jsx("div",{className:f.dynamic([["dce7bc301f824f5a",[e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(203, 213, 225, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent",e?"rgba(75, 85, 99, 0.8)":"transparent"]]])+" absolute top-0 right-0 pt-0 pr-2",children:n.jsx(U,{content:"Skjul aktive filtre",children:n.jsx(z,{ref:K,size:"small",variant:"tertiary","aria-label":"Skjul filtre",onClick:()=>{s(!1),l.track(C.Generell.lukk_filter_chip_panel)},icon:n.jsx(pe,{})})})})]})]})};fe.__docgenInfo={description:"",methods:[],displayName:"ValgteFiltre",props:{filtre:{defaultValue:{value:"[]",computed:!1},required:!1}}};export{fe as V};
