import{r as v,h as x,q as R,i as n,b as L,s as Q,Q as T,t as X,B as A,l as J,E as U,m as W,P}from"./iframe-CHkTVuiI.js";import{u as Y}from"./useFormField-D38t1t5q.js";import{S as M}from"./MagnifyingGlass-s_lUdSlL.js";const $=v.createContext(null);var Z=function(a,l){var r={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&l.indexOf(e)<0&&(r[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(a);t<e.length;t++)l.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(a,e[t])&&(r[e[t]]=a[e[t]]);return r};const D=v.forwardRef((a,l)=>{var r,{className:e,children:t,disabled:m,onClick:d}=a,y=Z(a,["className","children","disabled","onClick"]);const{cn:h}=x(),f=R("Search"),u=v.useContext($);if(u===null)return console.warn("<Search.Button> has to be wrapped in <Search />"),null;const{size:b,variant:s,handleClick:_}=u;return n.createElement(L,Object.assign({type:"submit"},y,{ref:l,size:b,variant:s==="secondary"?"secondary":"primary",className:h("navds-search__button-search",e),disabled:(r=u?.disabled)!==null&&r!==void 0?r:m,onClick:Q(d,_),icon:n.createElement(M,Object.assign({},t?{"aria-hidden":!0}:{title:f("search")}))}),t)});var ee=function(a,l){var r={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&l.indexOf(e)<0&&(r[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(a);t<e.length;t++)l.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(a,e[t])&&(r[e[t]]=a[e[t]]);return r};const ae=v.forwardRef((a,l)=>{const{inputProps:r,size:e="medium",inputDescriptionId:t,errorId:m,showErrorMsg:d,hasError:y}=Y(a,"searchfield"),{className:h,hideLabel:f=!0,label:u,description:b,value:s,clearButtonLabel:_,onClear:E,clearButton:F=!0,children:z,variant:p="primary",defaultValue:g,onChange:C,onSearchClick:S,htmlSize:O,"data-color":B}=a,V=ee(a,["className","hideLabel","label","description","value","clearButtonLabel","onClear","clearButton","children","variant","defaultValue","onChange","onSearchClick","htmlSize","data-color"]),{cn:c}=x(),N=v.useRef(null),q=T(N,l),[w,G]=v.useState(g??""),j=o=>{s===void 0&&G(o),C?.(o)},I=o=>{var i,k;E?.(o),j(""),(k=(i=N.current)===null||i===void 0?void 0:i.focus)===null||k===void 0||k.call(i)},H=()=>{S?.(`${s??w}`)},K=F&&!r.disabled&&(s??w);return n.createElement("div",{onKeyDown:o=>{var i;o.key==="Escape"&&(!((i=N.current)===null||i===void 0)&&i.value&&o.preventDefault(),I({trigger:"Escape",event:o}))},className:c(h,"navds-form-field",`navds-form-field--${e}`,"navds-search",{"navds-search--error":y,"navds-search--disabled":r.disabled,"navds-search--with-size":O}),"data-color":B},n.createElement(X,{htmlFor:r.id,size:e,className:c("navds-form-field__label",{"navds-sr-only":f})},u),!!b&&n.createElement(A,{className:c("navds-form-field__description",{"navds-sr-only":f}),id:t,size:e,as:"div"},b),n.createElement("div",{className:c("navds-search__wrapper")},n.createElement("div",{className:c("navds-search__wrapper-inner")},p==="simple"&&n.createElement(M,{"aria-hidden":!0,className:c("navds-search__search-icon")}),n.createElement("input",Object.assign({ref:q},J(V,["error","errorId","size","readOnly"]),r,{value:s??w,onChange:o=>j(o.target.value),type:"search",className:c(h,"navds-search__input",`navds-search__input--${p}`,"navds-text-field__input","navds-body-short",`navds-body-short--${e}`)},O?{size:Number(O)}:{})),K&&n.createElement(re,{handleClear:I,size:e,clearButtonLabel:_})),n.createElement($.Provider,{value:{size:e,disabled:r.disabled,variant:p,handleClick:H}},z||p!=="simple"&&n.createElement(D,{"data-color":B}))),n.createElement("div",{className:c("navds-form-field__error"),id:m,"aria-relevant":"additions removals","aria-live":"polite"},d&&n.createElement(U,{size:e,showIcon:!0},a.error)))});function re({size:a,clearButtonLabel:l,handleClear:r}){const{cn:e}=x(),t=W(!1),m=R("Search");return t?n.createElement(L,{className:e("navds-search__button-clear"),variant:"tertiary","data-color":"neutral",size:a==="medium"?"small":"xsmall",icon:n.createElement(P,{"aria-hidden":!0}),title:l||m("clear"),onClick:d=>r({trigger:"Click",event:d}),type:"button"}):n.createElement("button",{type:"button",onClick:d=>r({trigger:"Click",event:d}),className:e("navds-search__button-clear")},n.createElement("span",{className:e("navds-sr-only")},l||m("clear")),n.createElement(P,{"aria-hidden":!0}))}ae.Button=D;export{ae as S};
