import{j as a,i as N,ic as v,o as y,c as p,T as e,fD as R,gI as C,U as B,l as E,ie as ht,ig as ft,a as pt,ih as kt,u as J,r as F,S as St,h7 as W,e as H,aL as bt}from"./iframe-taO6KEVb.js";import{u as w,h as yt,v as z,S as Et,I as _t}from"./StillingsSøkNavigasjon-D4EyfzgF.js";import{P as vt}from"./Pagination-5yq8cyun.js";import{L as Ct,u as $}from"./LagreStandardsøk-CA81F7O0.js";import{u as G,G as T}from"./usePamGeografi-DbsTW9Vh.js";import{a as L,d as V}from"./util-BZkNEq1o.js";import{F as jt}from"./FilterChip-B-SLRIPE.js";import{T as xt}from"./TømFiltre-CSVllToh.js";import{C as I}from"./Chips-Coy2QI2d.js";import"./mockStillingssøk-C1-tbuUA.js";import{s as Nt,a as Ft,f as Dt,b as At,n as Q}from"./fylkeOgKommuneMapping-CcekNe0U.js";import{a as K}from"./stillingssøk-typer-BUxO0bdC.js";import{a as O,C as M}from"./Checkbox--kGgbBAp.js";import{R as Tt,a as U}from"./Radio-o2O2N0WM.js";import{S as It}from"./Search-bJ5Fd86q.js";import{B as X}from"./Box-Ci_giH6h.js";import{S as Z}from"./MagnifyingGlass-CVgR6zWC.js";import{M as Rt}from"./MittStandardsøk-BgPrzJS6.js";import{A as wt}from"./AlleFilterKomponent-BrqpTwAD.js";const P=20,Lt=(s,t)=>s*t-t;class tt{addFilter(t,i){if(typeof t=="string"&&i!==void 0)this.filterClauses.push({term:{[t]:i}});else{const l=t;Array.isArray(l)?this.filterClauses.push(...l):l&&this.filterClauses.push(l)}return this}addMust(t,i){if(typeof t=="string"&&i!==void 0)this.mustClauses.push({term:{[t]:i}});else{const l=t;Array.isArray(l)?this.mustClauses.push(...l):l&&this.mustClauses.push(l)}return this}addShould(t,i){if(typeof t=="string"&&i!==void 0)this.shouldClauses.push({term:{[t]:i}});else{const l=t;Array.isArray(l)?this.shouldClauses.push(...l):l&&this.shouldClauses.push(l)}return this}addMustNot(t,i){if(typeof t=="string"&&i!==void 0)this.mustNotClauses.push({term:{[t]:i}});else{const l=t;Array.isArray(l)?this.mustNotClauses.push(...l):l&&this.mustNotClauses.push(l)}return this}addExists(t){return this.filterClauses.push({exists:{field:t}}),this}addRange(t,i){return this.filterClauses.push({range:{[t]:i}}),this}addBoolFilter(t){return this.filterClauses.push({bool:t}),this}setMinimumShouldMatch(t){return this.minimumShouldMatch=t,this}addSimpleQueryString(t,i,l="and"){return t&&t.length>0&&this.shouldClauses.push({simple_query_string:{query:t,fields:i,default_operator:l}}),this}addFritekstSøk(t,i){if(!t||t.length<1)return this;const l=[];return i==="tekstfelter"?l.push("stilling.adtext_no^0.5","stilling.uuid","stilling.tittel","stilling.employer.name","stilling.properties.jobtitle","stilling.properties.arbeidsplassenoccupation","stilling.properties.keywords"):l.push("stilling.adtext_no^0.5","stilling.uuid","stilling.tittel","stilling.annonsenr","stilling.employer.name","stilling.employer.orgnr","stilling.properties.jobtitle","stilling.properties.arbeidsplassenoccupation","stilling.properties.keywords"),this.shouldClauses.push({simple_query_string:{query:t,fields:l,default_operator:"and"}}),this}setSorting(t){return this.sorting=t,this}setAggregations(t){return this.aggregations=t,this}setPostFilter(t){return this.postFilterClause=t,this}buildStandardAggregation(t,i,l,r){const o=this.buildFilters(),d=new Set(["stilling.administration.navIdent","stillingsinfo.eierNavident","stillingsinfo.eierNavKontorEnhetId"]),f=n=>{if(!n)return n;if(n.term&&typeof n.term=="object"){const u=Object.keys(n.term)[0];return d.has(u)?null:n}if(n.exists&&n.exists.field==="stillingsinfo")return null;if(n.bool&&typeof n.bool=="object"){const u=n.bool,c=["filter","must","should","must_not"],b={};return(()=>{if(!Array.isArray(u.must))return!1;const g=u.must.some(A=>A.term&&A.term["stilling.administration.status"]==="DONE"),h=u.must.some(A=>A.exists&&A.exists.field==="stilling.publishedByAdmin"),x=u.must.some(A=>A.range&&A.range["stilling.published"]),ct=Array.isArray(u.must_not)&&u.must_not.some(A=>A.term&&(A.term["stilling.status"]==="REJECTED"||A.term["stilling.status"]==="DELETED"));return g&&h&&x&&ct})()||(c.forEach(g=>{if(Array.isArray(u[g])){const h=u[g].map(x=>f(x)).filter(x=>!!x);h.length>0&&(b[g]=h)}}),u.minimum_should_match&&b.should&&(b.minimum_should_match=u.minimum_should_match),Object.keys(b).length===0)?null:{bool:b}}return n},k=n=>{if(!n||Object.keys(n).length===0)return n;const u={};return["filter","must","should","must_not"].forEach(c=>{if(Array.isArray(n[c])){const b=n[c].map(D=>f(D)).filter(D=>!!D);b.length>0&&(u[c]=b)}}),n.minimum_should_match&&u.should&&(u.minimum_should_match=n.minimum_should_match),u},m=r?.includePortfolioInCounts?o:k(o),S=n=>{if(!n||Object.keys(n).length===0)return n;const u={},c=b=>{if(!Array.isArray(b))return!1;let D=!1,g=!1,h=!1;for(const x of b)if(x?.term&&x.term["stilling.administration.status"]==="DONE")D=!0;else if(x?.exists?.field==="stilling.publishedByAdmin")g=!0;else if(x?.range&&x.range["stilling.published"])h=!0;else return!1;return D&&g&&h&&b.length===3};return["filter","must","should","must_not"].forEach(b=>{if(Array.isArray(n[b])){const D=n[b].map(g=>{if(g&&g.term&&g.term["stilling.status"]||g&&g.terms&&g.terms["stilling.status"])return null;if(g&&g.bool){const h=S(g.bool);return h&&Object.keys(h).length===1&&h.must&&c(h.must)||Object.keys(h).length===0?null:{bool:h}}return g}).filter(g=>!!g);D.length>0&&(u[b]=D)}}),n.minimum_should_match&&u.should&&(u.minimum_should_match=n.minimum_should_match),u},_=S(m),j=this.postFilterClause&&typeof this.postFilterClause=="object"&&JSON.stringify(this.postFilterClause).includes('"stilling.status"')?this.postFilterClause:null;return{globalAggregering:{global:{},aggs:{visningsstatus:{filter:{bool:{filter:[..._&&Object.keys(_).length>0?[{bool:_}]:[]]}},aggs:{koder:{filters:{filters:{"Ikke publisert":{bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Åpen for søkere":{bool:{must:[{term:{"stilling.status":"ACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Stengt for søkere":{bool:{must:[{term:{"stilling.status":"INACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},"Utløpt - Stengt for søkere":{bool:{must:[{term:{"stilling.status":"INACTIVE"}},{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},Fullført:{bool:{must:[{term:{"stilling.status":"STOPPED"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}},Avbrutt:{bool:{must:[{term:{"stilling.status":"DELETED"}}]}}}}}}},kategori:{filters:{filters:{stilling:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[],{bool:{must_not:[{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}},{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}}]}}]}},jobbmesse:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[],{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}]}}}}},stillingskategori:{filter:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[]]}},aggs:{koder:{terms:{field:"stillingsinfo.stillingskategori",size:20,order:{_key:"asc"}}}}},geografi:{filter:{bool:{filter:[...m&&Object.keys(m).length>0?[{bool:m}]:[],...j?[j]:[]]}},aggs:{nested_geografi:{nested:{path:"stilling.locations"},aggs:{fylker:{terms:{field:"stilling.locations.countyCode",size:50,order:{_key:"asc"}},aggs:{stillinger:{reverse_nested:{},aggs:{unique_count:{cardinality:{field:"stilling.uuid"}}}}}},kommuner:{terms:{field:"stilling.locations.municipalCode",size:200,order:{_key:"asc"}}},utenCountyCode:{filter:{bool:{should:[{bool:{must_not:[{exists:{field:"stilling.locations.countyCode"}}]}},{term:{"stilling.locations.countyCode":""}}],minimum_should_match:1}},aggs:{fylker:{terms:{field:"stilling.locations.county.keyword",size:20,order:{_key:"asc"}},aggs:{stillinger:{reverse_nested:{},aggs:{unique_count:{cardinality:{field:"stilling.uuid"}}}}}}}}}}}}}}}}setStandardAggregation(t,i,l,r){const o=l&&l.length>0?l.join(" "):void 0,d=this.buildStandardAggregation(t,i,o,r);return this.aggregations={...this.aggregations,...d},this}buildFilters(){const t={};return this.filterClauses.length>0&&(t.filter=this.filterClauses),this.mustClauses.length>0&&(t.must=this.mustClauses),this.shouldClauses.length>0&&(t.should=this.shouldClauses,this.minimumShouldMatch!==void 0?t.minimum_should_match=this.minimumShouldMatch:this.mustClauses.length===0&&this.filterClauses.length===0&&(t.minimum_should_match=1)),this.mustNotClauses.length>0&&(t.must_not=this.mustNotClauses),t}build(t=P,i=0){const l=this.buildFilters(),r={size:t,from:i,track_total_hits:!0};return Object.keys(l).length>0?r.query={bool:l}:r.query={match_all:{}},this.sorting&&this.sorting.length>0&&(r.sort=this.sorting.length===1?this.sorting[0]:this.sorting),Object.keys(this.aggregations).length>0&&(r.aggs=this.aggregations),this.postFilterClause&&(r.post_filter=this.postFilterClause),r}constructor(){this.filterClauses=[],this.mustClauses=[],this.shouldClauses=[],this.mustNotClauses=[],this.sorting=[],this.aggregations={},this.postFilterClause=null}}const Bt=({totaltAntallTreff:s})=>{const t=w(),i=Kt(s,P);return i<=1?null:a.jsx(vt,{size:"small",className:"my-4 flex justify-center",page:t.side,count:i,onPageChange:l=>t.setSide(l)})},Kt=(s,t)=>{const i=Math.ceil(s/t),r=1e4/40-1;return Math.min(i,r)};Bt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};const Mt=({skjulLagreStandard:s})=>{const t=w(),i=G();function l(r){if(r.length===2){const o=i.data?.filter(d=>d.type===T.FYLKE).find(d=>d.lokasjon.fylkesnummer===r);return o?o.navn:""}else{const o=i.data?.filter(d=>d.type===T.KOMMUNE).find(d=>d.lokasjon.kommunenummer===r);return o?o.navn:""}}return a.jsx("div",{className:"relative w-full mt-3",children:a.jsx(I,{size:"small",children:a.jsxs("div",{className:"flex flex-row flex-wrap gap-2  pb-2",children:[Object.values(t).some(r=>Array.isArray(r)&&r.length>0)&&a.jsx(xt,{fjernFritekst:()=>t.setFritekstListe([])}),t.fritekst&&a.jsx(jt,{type:t.fritekst,setVerdi:t.setFritekstListe}),t.statuser.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setStatuser(t.statuser.filter(d=>d!==r)),children:L(r)},o)),t.inkludering.map((r,o)=>{const d=yt.find(k=>k.hovedtag===r),f=t.inkluderingUnderkategori.filter(k=>d?.subtags.includes(k));return f.length>0?f.map((k,m)=>a.jsx(I.Removable,{onClick:()=>t.setInkluderingUnderkategori(t.inkludering.filter(S=>S!==r)),children:z[k]},m)):a.jsx(I.Removable,{onClick:()=>t.setInkludering(t.inkludering.filter(k=>k!==r)),children:z[r]},o)}),t.publisert.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setPublisert(t.publisert.filter(d=>d!==r)),children:L(r)},o)),t.kategori.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setKategori(t.kategori.filter(d=>d!==r)),children:L(r)},o)),t.fylker.map((r,o)=>a.jsx(I.Removable,{onClick:()=>{t.setFylker(t.fylker.filter(d=>d!==r))},children:L(l(r))},o)),t.kommuner.map((r,o)=>a.jsx(I.Removable,{onClick:()=>t.setKommuner(t.kommuner.filter(d=>d!==r)),children:L(l(r))},o)),!s&&a.jsx(Ct,{})]})})})};Mt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips",props:{skjulLagreStandard:{required:!0,tsType:{name:"boolean"},description:""}}};function Ot(s,t){const i={...s||{}},l=t?.aggs||t?.aggregations||{},r={...i,aggs:l};return r.track_total_hits===void 0&&(r.track_total_hits=!0),r}const et=(s,t)=>{const i=s.filter.fritekst,l=i.some(f=>/^R?\d+$/.test(f)),r=["innen","på","av","og","for","med","som","mv.","o.l."],o=i.map(f=>`(+${f.split(" ").filter(m=>m.length>1&&!r.includes(m.toLowerCase())).map(m=>m.trim()).join(" +")})`).join(" | ");let d;l||(d="tekstfelter"),o&&o.length>0&&t.addFritekstSøk(o,d).setMinimumShouldMatch(i.length?"1":"0")},st=(s,t)=>{if(s.geografiData&&s.filter.fylker?.length>0||s.filter.kommuner?.length>0){const i=s.geografiData?.filter(n=>n.type===T.FYLKE).filter(n=>n.lokasjon.fylkesnummer&&s.filter?.fylker.includes(n.lokasjon.fylkesnummer))??[],l=s.geografiData?.filter(n=>n.type===T.KOMMUNE).filter(n=>n.lokasjon.kommunenummer&&s.filter?.kommuner.includes(n.lokasjon.kommunenummer))??[],r=i.filter(n=>n.type===T.FYLKE&&n.lokasjon.fylkesnummer&&!l.some(u=>u.lokasjon.fylkesnummer===n.lokasjon.fylkesnummer)).flatMap(n=>s.geografiData?.filter(u=>u.lokasjon.fylkesnummer===n.lokasjon.fylkesnummer&&u.type===T.KOMMUNE)??[]),d=[...i.filter(n=>n.lokasjon.fylkesnummer&&!l.some(u=>u.lokasjon.fylkesnummer===n.lokasjon.fylkesnummer)),...l,...r],f=d.filter(n=>n.type===T.FYLKE);if(d.filter(n=>n.type===T.FYLKE).length===0&&d.filter(n=>n.type===T.KOMMUNE).length===0)return;const m=d.filter(n=>n.type===T.KOMMUNE).flatMap(n=>{const u=n.lokasjon.kommunenummer&&Nt.get(n.lokasjon.kommunenummer)?.map(c=>c.nummer);return[n.lokasjon.kommunenummer,...u||[]]}),S=new Set([...f].flatMap(n=>{const u=Ft.get(Dt(n.navn))?.map(c=>c.navn.toUpperCase())||[];return[n.navn,...u]})),_=S.size===0?[]:[{terms:{"stilling.locations.county.keyword":Array.from(S).map(n=>n.toUpperCase())}}],j=m.length===0?[]:[{terms:{"stilling.locations.municipalCode":m}}];t.addFilter({nested:{path:"stilling.locations",query:{bool:{should:[..._,...j],minimum_should_match:1}}}})}},it=(s,t)=>{s.filter.inkludering&&s.filter.inkludering.length>0&&t.addFilter({terms:{"stilling.properties.tags":s.filter.inkludering}})},lt=(s,t)=>{const i=s.filter.kategori;i.includes(N.Jobbmesse)&&t.addBoolFilter({should:[{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}],minimum_should_match:1}),i.includes(N.Stilling)&&!i.includes(N.Jobbmesse)&&t.addBoolFilter({must_not:[{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}},{term:{"stillingsinfo.stillingskategori":"JOBBMESSE"}}]})},nt=(s,t)=>{s.formidlinger?t.addMust("stillingsinfo.stillingskategori","FORMIDLING"):t.addBoolFilter({must_not:[{term:{"stillingsinfo.stillingskategori":"ARBEIDSTRENING"}},{term:{"stillingsinfo.stillingskategori":"FORMIDLING"}}]}),s.filter.portefølje===K.INTERN?(t.addFilter({exists:{field:"stillingsinfo"}}),t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}]})):s.filter.portefølje===K.VIS_MINE?s.navIdent&&(t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}),t.addBoolFilter({should:[{term:{"stilling.administration.navIdent":s.navIdent}},{term:{"stillingsinfo.eierNavident":s.navIdent}}],minimum_should_match:1})):s.filter.portefølje===K.MITT_KONTOR?(s.eierNavKontorEnhetId&&t.addFilter({term:{"stillingsinfo.eierNavKontorEnhetId":s.eierNavKontorEnhetId}}),t.addBoolFilter({must_not:[{bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}}]}},{term:{"stilling.status":"DELETED"}}]})):s.filter.portefølje===K.ARBEIDSPLASSEN_NO&&(t.addFilter({term:{"stilling.privacy":"SHOW_ALL"}}),t.addBoolFilter({must_not:[{term:{"stilling.source":"DIR"}}]}),s.filter.utenOppdrag?t.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}]}):t.addFilter({exists:{field:"stillingsinfo"}}))},Pt=(s,t)=>{const i=s.filter.sortering,l={publisert:[{"stilling.published":{order:"desc"}}],utløpsdato:[{"stilling.expires":{order:"asc"}}],relevans:[]},o=l[i||"publisert"]||l.publisert;o&&o.length>0&&t.setSorting(o)},Jt=()=>[{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],Vt=s=>{s.addBoolFilter({must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}],must:Jt()})},rt=(s,t)=>{const i=s.filter.statuser,l=i.length===0,r=i.length===Object.values(v).length;if(s.navIdent||Vt(t),l||r)return;const o=[];i.includes(v.ApenForSokere)&&o.push({bool:{must:[{term:{"stilling.status":"ACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),i.includes(v.Fullfort)&&o.push({bool:{must:[{term:{"stilling.status":"STOPPED"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),i.includes(v.UtloptStengtForSokere)&&o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}},{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),i.includes(v.StengtForSokere)&&o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}},{term:{"stilling.administration.status":"DONE"}},{exists:{field:"stilling.publishedByAdmin"}},{range:{"stilling.published":{lte:"now/d"}}}],must_not:[{range:{"stilling.expires":{lt:"now/d"}}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),i.includes(v.IkkePublisert)&&o.push({bool:{must:[{term:{"stilling.status":"INACTIVE"}}],must_not:[{exists:{field:"stilling.publishedByAdmin"}},{term:{"stilling.status":"REJECTED"}},{term:{"stilling.status":"DELETED"}}]}}),i.includes(v.Slettet)&&o.push({term:{"stilling.status":"DELETED"}}),o.length>0&&t.setPostFilter({bool:{should:o,minimum_should_match:1}})};function Ut(s){const t=new tt;nt(s,t),et(s,t),rt(s,t),lt(s,t),st(s,t),Pt(s,t),(s.filter.inkludering.length>0||s.filter.inkluderingUnderkategori.length>0)&&t.addFilter(it(s,t));const i=Lt(s.filter.side,P);return t.build(P,i)}function Gt(s){const t=new tt;return nt(s,t),et(s,t),rt(s,t),lt(s,t),st(s,t),(s.filter.inkludering.length>0||s.filter.inkluderingUnderkategori.length>0)&&t.addFilter(it(s,t)),t.setStandardAggregation(s.navIdent,s.eierNavKontorEnhetId,s.filter.fritekst,{formidlinger:s.formidlinger,utenOppdrag:s.filter.utenOppdrag,includePortfolioInCounts:!0}),t.build(0,0)}const qt=y({label:e(),score:p()}),zt=y({konseptId:p(),label:e(),styrk08:e()}),Qt=y({adtext:e().nullish(),sourceurl:e().nullish(),applicationdue:e().nullish(),applicationemail:e().nullish(),applicationmail:e().nullish(),applicationlabel:C([e(),p()]).nullish(),applicationurl:e().nullish(),employer:e().nullish(),employerdescription:C([e(),p()]).nullish(),employerhomepage:e().nullish(),engagementtype:e().nullish(),extent:e().nullish(),occupation:e().nullish(),positioncount:p().nullish(),salary:p().nullish(),starttime:e().nullish(),role:e().nullish(),sector:e().nullish(),location:e().nullish(),externalref:C([e(),p()]).nullish(),jobtitle:e().nullish(),keywords:e().nullish().nullable(),sourcecreated:e().nullish(),sourceupdated:e().nullish(),logomain:e().nullish(),logolisting:e().nullish(),author:e().nullish(),address:C([e(),p()]).nullish(),industry:e().nullish(),nace2:R().nullish(),searchtags:E(qt).nullish(),searchtagsai:E(e()).nullish(),classification_styrk08_score:p().nullish(),classification_input_source:e().nullish(),classification_styrk08_code:C([p(),e()]).nullish(),classification_esco_code:e().nullish(),categories:E(R()).nullish(),euresflagg:C([e(),B()]).nullish(),hasInterestform:C([e(),B(),p()]).nullish(),remote:e().nullish(),workLanguage:C([e(),E(e())]).nullish(),finnSource:e().nullish(),adtextFormat:e().nullish(),tags:E(e()).nullish(),ontologyJobtitle:zt.nullish(),workschedule:C([e(),E(e())]).nullish(),workhours:C([e(),E(e())]).nullish(),workday:C([e(),E(e())]).nullish(),facebookpage:e().nullish(),contactperson:e().nullish(),contactpersontitle:e().nullish(),contactpersonemail:e().nullish(),contactpersonphone:e().nullish(),linkedinpage:e().nullish(),jobpercentage:C([e(),p()]).nullish(),jobpercentagerange:e().nullish(),jobarrangement:e().nullish(),twitteraddress:e().nullish(),admintags:e().nullish(),arbeidsplassenoccupation:e().nullish(),needDriversLicense:B().nullish(),experience:e().nullish(),copyOfExistingAd:e().nullish(),under18:e().nullish(),education:E(e()).nullish(),certificate:e().nullish(),expertise:e().nullish(),practice:e().nullish(),hardrequirements:R().nullish(),softrequirements:R().nullish(),personalattributes:R().nullish(),_approvedby:e().nullish(),_noorgnr:C([e(),B()]).nullish(),_providerid:C([e(),p()]).nullish(),_versionid:p().nullish(),_score:R().nullish(),_scoretotal:p().nullish()}),Yt=y({name:e(),role:e(),title:e(),email:e(),phone:e()}),Wt=y({status:e(),remarks:E(e()),comments:e(),reportee:e(),navIdent:e()}),Ht=y({name:e(),publicName:e(),orgnr:e().nullable(),parentOrgnr:e().nullable(),orgform:e()}),$t=y({styrkCode:e(),name:e()}),Xt=y({tittel:e(),uuid:e(),annonsenr:e().nullable(),status:e(),privacy:e(),published:e().nullable(),publishedByAdmin:e().nullable(),expires:e().nullable(),created:e(),updated:e(),employer:Ht.optional().nullable(),categories:E($t),source:e(),medium:e(),businessName:e().nullable(),locations:E(ht),reference:e(),administration:Wt.optional(),properties:Qt.optional(),contacts:E(Yt)}),Zt=y({stilling:Xt,stillingsinfo:ft.optional().nullable()}),te=y({total:p(),successful:p(),skipped:p(),failed:p()}),ee=y({value:p(),relation:e()}),se=y({_index:e(),_type:e(),_id:e(),_score:R(),_source:Zt,sort:E(p())}),ie=y({total:ee,max_score:R(),hits:E(se)}),le=y({took:p(),timed_out:B(),_shards:te,hits:ie}),ne=le.pick({hits:!0}),re=y({visningsStatusBuckets:E(y({key:e(),count:p()})).optional(),kategoriBuckets:y({stilling:p().optional(),jobbmesse:p().optional()}).optional(),geografi:y({fylker:E(y({key:e(),count:p()})).optional(),kommuner:E(y({key:e(),count:p()})).optional()}).optional()}),oe=y({hits:ne.shape.hits,antall:re,tookTreff:p().optional().nullable(),tookAggs:p().optional().nullable()}),ae=`${kt.internUrl}`,q=({filter:s,eierNavKontorEnhetId:t,navIdent:i,formidlinger:l,finnStillingerForKandidat:r})=>{const o=G(),d=Ut({filter:s,eierNavKontorEnhetId:t,navIdent:i,geografiData:o.data,formidlinger:l}),f=Gt({filter:{...s,side:1},eierNavKontorEnhetId:t,navIdent:i,geografiData:o.data,formidlinger:l}),k=Ot(d,f);return pt(o.isLoading?null:{url:ae,body:k},async S=>{const _=await fetch(S.url,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(S.body)});if(!_.ok)throw new Error("Feil ved stillingssøk");const j=await _.json(),n=oe.safeParse(j);return n.success?n.data:j})},ot=({geografi:s,hideLegend:t})=>{const i=w(),{fylker:l,setFylker:r,kommuner:o,setKommuner:d}=i,{brukerData:{ident:f},valgtNavKontor:k}=J(),m=q({filter:i,eierNavKontorEnhetId:k?.navKontor,navIdent:f,formidlinger:i.formidlinger}),S=m.data?.antall?.geografi?.fylker||[],_=m.data?.antall?.geografi?.kommuner||[],j=At(_),n=m.isLoading||m.isValidating,u=g=>n?"-":g?S.find(h=>String(h.key)===String(g))?.count??0:0,c=g=>n?"-":g?j.find(h=>Q(h.key)===Q(g))?.count??0:0,b=g=>u(g),D=s?.filter(g=>g.type===T.FYLKE)?.map(g=>({...g,kommuner:s?.filter(h=>h.type===T.KOMMUNE)?.filter(h=>g.lokasjon.fylkesnummer===h.lokasjon.fylkesnummer).sort((h,x)=>h.navn.localeCompare(x.navn))})).sort((g,h)=>g.navn.localeCompare(h.navn));return a.jsx(O,{size:"small",hideLegend:t,legend:"Område",value:l||[],onChange:r,children:D?.map(g=>a.jsxs(F.Fragment,{children:[a.jsxs(M,{value:g.lokasjon.fylkesnummer,children:[V(g.navn)," (",b(g.lokasjon.fylkesnummer),")"]}),g.lokasjon.fylkesnummer&&l.includes(g.lokasjon.fylkesnummer)&&g.kommuner&&g.kommuner.length>1&&a.jsx(O,{className:"ml-4",onChange:d,hideLegend:!0,legend:`Velg kommuner i ${V(g.navn)}`,value:o||[],children:g.kommuner.map(h=>a.jsxs(M,{value:h.lokasjon.kommunenummer,children:[V(h.navn)," (",c(h.lokasjon.kommunenummer),")"]},h.lokasjon.kommunenummer))})]},g.lokasjon.fylkesnummer))})};ot.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function at({hideLegend:s}){const t=G();return a.jsx(St,{hooks:[t],children:i=>a.jsx(ot,{geografi:i,hideLegend:s})})}at.__docgenInfo={description:"",methods:[],displayName:"GeografiFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const Y=s=>{switch(s){case N.Stilling:return"Stilling";case N.Jobbmesse:return"Jobbmesse";default:return""}};function ut({hideLegend:s}){const t=w(),{kategori:i,setKategori:l}=t,{brukerData:r,valgtNavKontor:o}=J(),d=q({filter:t,eierNavKontorEnhetId:o?.navKontor,navIdent:r?.ident,formidlinger:t.formidlinger}),f=d.data?.antall?.kategoriBuckets,k=d.isLoading||d.isValidating,m=S=>{if(k)return"-";if(f){if(S===N.Stilling)return f.stilling||0;if(S===N.Jobbmesse)return f.jobbmesse||0}return 0};return a.jsxs(O,{hideLegend:s,size:"small",legend:"Kategori",value:i,onChange:l,children:[a.jsxs(M,{value:N.Stilling,children:[Y(N.Stilling)," (",m(N.Stilling),")"]}),a.jsxs(M,{value:N.Jobbmesse,children:[Y(N.Jobbmesse)," (",m(N.Jobbmesse),")"]})]})}ut.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function dt({hideLegend:s}){const t=w(),{statuser:i,setStatuser:l,portefølje:r}=t,{brukerData:{ident:o},valgtNavKontor:d}=J(),f=q({filter:t,eierNavKontorEnhetId:d?.navKontor,navIdent:o,formidlinger:t.formidlinger}),k=F.useRef(0),m=f.data?.antall?.visningsStatusBuckets||[],S=f.isLoading||f.isValidating,_=u=>S?"-":m.find(c=>c.key===u)?.count??0,j=u=>{const c=i||[];c.includes(u)?l(c.filter(b=>b!==u)):l([...c,u])},n=[v.ApenForSokere,v.StengtForSokere,v.UtloptStengtForSokere,v.Fullfort,v.IkkePublisert];return F.useEffect(()=>{k.current<1&&!t.formidlinger&&!S&&(i?.length??0)===0&&(l([v.ApenForSokere]),k.current=k.current+1)},[S,i,l,t.formidlinger]),a.jsx(O,{legend:s?void 0:"Status",size:"small",children:a.jsx("div",{className:"flex flex-col gap-2",children:n.map(u=>{if(u===v.IkkePublisert&&r!==K.VIS_MINE)return null;const c=!!i?.includes(u),b=u===v.UtloptStengtForSokere?"Utløpt":u;return a.jsxs(M,{checked:c,onChange:()=>j(u),value:u,disabled:S,size:"small",children:[b," (",_(u),")"]},u)})})})}dt.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function gt({hideLegend:s}){const t=w(),i=l=>{t.setSortering(l)};return a.jsxs(Tt,{size:"small",hideLegend:s,legend:"Sorter",value:t.sortering,onChange:i,className:"pb-2",children:[a.jsx(U,{value:"publiseringsdato",children:"Publiseringsdato"}),a.jsx(U,{value:"utløpsdato",children:"Utløpsdato"}),a.jsx(U,{value:"mestRelevant",children:"Mest relevant"})]})}gt.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function mt({alltidÅpen:s}){const{fritekst:t,setFritekstListe:i}=w(),[l,r]=F.useState(""),[o,d]=F.useState(!1),[f,k]=F.useState(!1),m=$(),S=F.useRef(null),_=F.useRef(null),j=W(),n=()=>{d(!1),k(!1),j.push("/stilling?brukStandardsok=true")},u=()=>{if(l.trim()){const c=[...t,l];i(c),r("")}d(!1),k(!1)};return F.useEffect(()=>{!s&&f&&_.current&&_.current.focus()},[s,f]),F.useEffect(()=>{const c=b=>{S.current&&!S.current.contains(b.target)&&d(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),a.jsxs("div",{className:"relative",ref:S,children:[a.jsx(It,{ref:_,onKeyDownCapture:c=>{c.key==="Enter"?(c.preventDefault(),u()):c.key==="Escape"&&(k(!1),r(""),d(!1))},onFocus:()=>d(!0),onBlur:()=>{setTimeout(()=>{l.trim()||k(!1),d(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:l,onChange:c=>r(c),onSearchClick:u}),o&&m.data&&f&&a.jsx(X.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:a.jsx("div",{className:"p-2",children:a.jsx(H,{variant:"tertiary",size:"small",icon:a.jsx(Z,{}),onClick:n,className:"w-full justify-start",children:"Standardssøk"})})})]})}mt.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};const ue=({formidlinger:s})=>{const[t,i]=F.useState(!1),{harRolle:l}=J(),r=$(),o=F.useRef(null),d=W(),f=l([bt.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),k=()=>{i(!1),d.push("/stilling?brukStandardsok=true")};return F.useEffect(()=>{const m=S=>{o.current&&!o.current.contains(S.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),a.jsxs("div",{className:"@container flex flex-row items-center justify-between",children:[a.jsx(Et,{}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative",ref:o,children:t&&r.data&&a.jsx(X.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:a.jsx("div",{className:"p-2",children:a.jsx(H,{variant:"tertiary",size:"small",icon:a.jsx(Z,{}),onClick:k,className:"w-full justify-start",children:"Standardssøk"})})})}),a.jsx("div",{className:"block @[720px]:hidden",children:a.jsx("div",{className:"whitespace-nowrap",children:a.jsxs(wt,{children:[a.jsx(mt,{alltidÅpen:!0}),a.jsx(Rt,{}),a.jsx(gt,{}),f&&!s&&a.jsx(dt,{}),a.jsx(at,{}),!s&&a.jsx(ut,{}),a.jsx(_t,{})]})})})]})]})};ue.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};export{ot as F,at as G,ut as K,ue as S,dt as a,mt as b,Mt as c,gt as d,Bt as e};
