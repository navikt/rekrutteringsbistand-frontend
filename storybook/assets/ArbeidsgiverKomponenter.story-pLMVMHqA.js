import{r as p,j as e,hb as N,e as k,h2 as S,h3 as w,S as R,B as M,h1 as E}from"./iframe-Ejs43Sks.js";import{A as v,L as x,u as C,S as h,s as H,V as I}from"./LeggTilArbeidsgiverForm-0fqKYGRT.js";import{u as _}from"./useArbeidsgiver-eVc7k5Qs.js";import{S as D}from"./Plus-BsAt0x21.js";import{M as c}from"./Modal-BP64UtCa.js";import{T as q}from"./Tooltip-BCLbUfEd.js";import"./preload-helper-BWMAHTUm.js";import"./stilling-util-BjBixF7p.js";import"./Box-B4lI0D0x.js";import"./BasePrimitive-BxpluNwg.js";import"./Tag-TP6QH-jh.js";import"./Trash-Bm0dsz2Z.js";import"./ComboboxProvider-DuxFp4uU.js";import"./Floating-Cy4-q4HL.js";import"./Modal.context-DQr9EoQJ.js";import"./useControllableState-CSEGMF6f.js";import"./useClientLayoutEffect-CeU_aQpQ.js";import"./useFormField-BMJXgtxV.js";import"./ChevronDown-no_Jq8A9.js";import"./Chips-CNKnigG1.js";import"./ChevronUp-ponLUuNy.js";import"./VStack-CchjVpJ5.js";import"./floating-ui.react-BwRoqLYP.js";import"./Date.Input-CsFsJtM3.js";import"./match-LE9LHLKw.js";import"./Calendar-CsD0Nk9_.js";import"./Portal-BDp1vaYq.js";const b=({arbeidsgiver:s,status:r,actionSlot:a})=>{const i=s.organisasjonsnummer,{data:n}=_(i),m=p.useMemo(()=>n?.find(t=>t.organisasjonsnummer===i),[n,i])?.adresse??null;return e.jsx(v,{navn:s.navn,organisasjonsnummer:i,adresse:m,status:r,actionSlot:a})};b.__docgenInfo={description:"",methods:[],displayName:"ArbeidsgiverListeItem",props:{arbeidsgiver:{required:!0,tsType:{name:"z.infer",elements:[{name:"ArbeidsgiverSchema"}],raw:"z.infer<typeof ArbeidsgiverSchema>"},description:""},status:{required:!1,tsType:{name:"string"},description:""},actionSlot:{required:!1,tsType:{name:"ReactNode"},description:""}}};const j=({className:s})=>{const r=p.useRef(null),{activeStep:a}=N(),i=a==="FULLFØRE"||a==="AVLYST",n=()=>r.current?.showModal(),o=()=>r.current?.close();return e.jsxs(e.Fragment,{children:[e.jsx(k,{onClick:n,variant:"secondary",icon:e.jsx(D,{}),disabled:i,className:s,type:"button",children:"Legg til arbeidsgiver"}),e.jsx(c,{ref:r,className:"overflow-visible",onClose:o,header:{heading:"Legg til arbeidsgivere"},children:e.jsx(c.Body,{className:"overflow-visible min-w-[500px]",children:e.jsx(x,{variant:"modal",onCompleted:()=>r.current?.close()})})})]})};j.__docgenInfo={description:"",methods:[],displayName:"LeggTilArbeidsgiverKnapp",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const A=()=>{const{rekrutteringstreffId:s}=S(),r=w(s),a=C(s),i=t=>t.hendelser.find(({hendelsestype:g})=>g==="OPPRETT")?{status:"Lagt til"}:{status:void 0},[n,o]=p.useState(!1),m=async t=>{if(t)try{o(!0),await H(s,t.arbeidsgiverTreffId??t.organisasjonsnummer),r.mutate(),a.mutate()}finally{o(!1)}};return e.jsx(R,{hooks:[r],children:t=>e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx(j,{})}),t.length===0?e.jsx(M,{children:"Ingen arbeidsgivere lagt til"}):e.jsx("ul",{children:t.map((l,g)=>{const{status:T}=i(l),u=t.length===1,L=e.jsx(h,{navn:l.navn,loading:n,disabled:u||n,onConfirm:()=>m(l),arbeidsgivereHook:r,variant:"trash",renderTrigger:({button:f})=>u?e.jsx(q,{content:"Treffet må alltid ha en arbeidsgiver som deltar. Legg til en ny arbeidsgiver først.",className:"max-w-[200px] text-left",children:e.jsx("span",{children:f})}):f});return e.jsx("li",{children:e.jsx(b,{arbeidsgiver:l,status:T,actionSlot:L})},g)})})]})})};A.__docgenInfo={description:"",methods:[],displayName:"Arbeidsgivere"};const y=({modalRef:s})=>{const r=()=>{s.current?.close()};return e.jsx(c,{ref:s,className:"overflow-visible",onClose:r,header:{heading:"Legg til arbeidsgivere"},children:e.jsx(c.Body,{className:"overflow-visible min-w-[500px]",children:e.jsx(x,{variant:"modal",onCompleted:()=>{s.current?.close()}})})})};y.__docgenInfo={description:"",methods:[],displayName:"LeggTilArbeidsgiverModal",props:{modalRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDialogElement | null",elements:[{name:"HTMLDialogElement"},{name:"null"}]}],raw:"RefObject<HTMLDialogElement | null>"},description:""}}};const me={tags:["autodocs"],render:()=>e.jsx(E,{children:e.jsxs("div",{className:"space-y-10 opacity-60 pointer-events-none",children:[e.jsxs("section",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"ArbeidsgiverKort"}),e.jsx(v,{navn:"Eksempelbedrift AS",organisasjonsnummer:"999999999",adresse:{adresse:"Storgata 1",postnummer:"0155",poststed:"Oslo"},status:"Lagt til"})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Arbeidsgivere (liste)"}),e.jsx(A,{})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"VelgArbeidsgiver"}),e.jsx(I,{arbeidsgiverCallback:()=>{}})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Modaler"}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(y,{modalRef:{current:null}}),e.jsx(h,{navn:"Eksempelbedrift AS",loading:!1,disabled:!1,onConfirm:()=>{},arbeidsgivereHook:{mutate:()=>{}},variant:"trash",renderTrigger:()=>null})]})]})]})})},d={};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"{}",...d.parameters?.docs?.source}}};export{d as Oversikt,me as default};
