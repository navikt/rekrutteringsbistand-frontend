import{r as d,k as _,l as m,ac as w,u as O,b9 as P,cl as u,j as e,e as o,H as V,B as K,w as x,cm as I,ad as R,S as F,aG as A,ch as N,h as E,aE as G}from"./iframe-B7Dvl8Jj.js";import{B}from"./Box-DuFDghgU.js";import{S as L}from"./EyeSlash-DHkjdBtM.js";import{S as M}from"./CircleSlash-C8ewjTLH.js";import{M as h}from"./Modal-C4YlaOo0.js";import{C as D}from"./Checkbox-CJMGQDeu.js";import{S as $}from"./Pencil-BqqEy_lV.js";import{P as W,s as T}from"./PersonbrukerTekst-BAQMaFD0.js";import{S as J}from"./ClockDashed-DwKTmuMU.js";import{S as U}from"./Tasklist-rUPDg8fA.js";var q=function(s,a){var l={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(l[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(s);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(l[t[n]]=s[t[n]]);return l};const Q=d.forwardRef((s,a)=>{var{title:l,titleId:t}=s,n=q(s,["title","titleId"]);let r=_();return r=l?t||"title-"+r:void 0,m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),l?m.createElement("title",{id:r},l):null,m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.75 3.75V7.5a.75.75 0 0 1-1.5 0v-4c0-.69.56-1.25 1.25-1.25h9c.69 0 1.25.56 1.25 1.25v7a.75.75 0 0 1-1.5 0V3.75zm-1.75 7a.25.25 0 0 0-.25.25v9.25h12.5v-6.5H12a.75.75 0 0 1-.75-.75v-2a.25.25 0 0 0-.25-.25zM4.25 11c0-.966.784-1.75 1.75-1.75h5c.966 0 1.75.784 1.75 1.75v1.25h5.75c.69 0 1.25.56 1.25 1.25v7c0 .69-.56 1.25-1.25 1.25h-13c-.69 0-1.25-.56-1.25-1.25zM10 4.75a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))});var X=function(s,a){var l={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(l[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(s);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(l[t[n]]=s[t[n]]);return l};const Y=d.forwardRef((s,a)=>{var{title:l,titleId:t}=s,n=X(s,["title","titleId"]);let r=_();return r=l?t||"title-"+r:void 0,m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),l?m.createElement("title",{id:r},l):null,m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 6.25a.75.75 0 0 0-.75.75v10c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V7a.75.75 0 0 0-.75-.75zm.75 10v-8.5h1.5v8.5zm6.25-10a.75.75 0 0 0-.75.75v10c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V7a.75.75 0 0 0-.75-.75zm.75 10v-8.5h1.5v8.5z",clipRule:"evenodd"}))});var Z=function(s,a){var l={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(l[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(s);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(l[t[n]]=s[t[n]]);return l};const ee=d.forwardRef((s,a)=>{var{title:l,titleId:t}=s,n=Z(s,["title","titleId"]);let r=_();return r=l?t||"title-"+r:void 0,m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),l?m.createElement("title",{id:r},l):null,m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.62 6.354a.75.75 0 0 1 .744-.01l9 5a.75.75 0 0 1 0 1.312l-9 5A.75.75 0 0 1 8.25 17V7a.75.75 0 0 1 .37-.646m1.13 1.92v7.451L16.456 12z",clipRule:"evenodd"}))});function te(){const{stillingsData:s,refetch:a}=w(),{valgtNavKontor:l,brukerData:t}=O(),n=P(),[r,c]=d.useState(!1),[p,g]=d.useState(!1),[f,v]=d.useState(!1),b=async k=>{c(!0);try{const j=await I({...s,stilling:{...s.stilling,status:k,privacy:p?"SHOW_ALL":"INTERNAL_NOT_SHOWN"}},{eierNavident:t.ident,eierNavn:t.navn,eierNavKontorEnhetId:l?.navKontor});j.stilling.uuid&&(a?.(),n.push(`/stilling/${j.stilling.uuid}`))}finally{c(!1)}},i=s.stilling.status;return i===u.Aktiv?e.jsx(e.Fragment,{children:e.jsx(o,{loading:r,icon:e.jsx(Y,{}),size:"small",className:"w-full  mt-4",onClick:()=>b(u.Inaktiv),children:"Pause søkerforslag"})}):i===u.Inaktiv?e.jsxs(e.Fragment,{children:[e.jsxs(B.New,{background:"brand-beige-moderate",borderRadius:"large",className:"my-4 p-4",children:[e.jsx(V,{level:"2",size:"xsmall",className:"mb-2",children:"Du mottar ikke søkerforslag"}),e.jsxs("div",{className:"flex gap-4 flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(K,{size:"small",children:"Oppdraget er skjult. Folk kan fortsatt finne oppdraget ved å filtrerer det inn."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(K,{size:"small",children:"Andre kan ikke foreslå jobbsøkere."})]})]})]}),e.jsx(o,{loading:r,icon:e.jsx(ee,{}),size:"small",className:"w-full  mt-4",onClick:()=>v(!0),children:"Åpne søkerforslag"}),e.jsxs(h,{open:f,onClose:()=>v(!1),header:{heading:"Åpne søkerforslag",size:"small",closeButton:!1},width:"small",children:[(s?.stilling?.properties?.applicationurl!=null||s?.stilling?.properties?.applicationemail!=null)&&e.jsx(h.Body,{children:e.jsx(x,{children:e.jsx(D,{checked:p,onChange:k=>g(k.target.checked),children:"Publiser stillingsoppdraget offentlig på arbeidsplassen.no også"})})}),e.jsxs(h.Footer,{children:[e.jsx(o,{type:"button",onClick:()=>b(u.Aktiv),children:"Åpne søkerforslag"}),e.jsx(o,{type:"button",variant:"secondary",onClick:()=>v(!1),children:"Avbryt"})]})]})]}):null}te.__docgenInfo={description:"",methods:[],displayName:"EndreSøkeforslag"};function se(){const{stillingsData:s,erEier:a,kandidatlisteInfo:l}=w(),t=P();return a?e.jsx(o,{disabled:l?.kandidatlisteStatus==="LUKKET",variant:"secondary",size:"small",className:"h-5 w-full",icon:e.jsx($,{}),onClick:()=>t.push(`/stilling/${s.stilling.uuid}/rediger`),children:"Rediger"}):null}se.__docgenInfo={description:"",methods:[],displayName:"RedigerStillingKnapp"};function H(){return e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Oppdraget og annonsen"}),e.jsxs("div",{className:"flex flex-col gap-3 ",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{"aria-hidden":!0}),e.jsx(x,{size:"small",className:"m-0",children:"Annonsen vises ikke lenger som aktiv."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{"aria-hidden":!0}),e.jsx(x,{size:"small",className:"m-0",children:"Du kan fremdeles se detaljer om oppdraget."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{"aria-hidden":!0}),e.jsx(x,{size:"small",className:"m-0",children:"Du kan gjenåpne oppdraget hvis du vil gjøre noen endringer."})]})]})]})}H.__docgenInfo={description:"",methods:[],displayName:"FullførOppdragTekst"};function le(){const[s,a]=d.useState(!1),{stillingsData:l,refetch:t,erEier:n}=w(),{valgtNavKontor:r,brukerData:c,visVarsel:p}=O(),[g,f]=d.useState(!1),v=R(l,n),b=async i=>{f(!0);try{await Promise.all([T(i,N.Lukket),I({...l,stilling:{...l.stilling,status:u.Stoppet}},{eierNavident:c.ident,eierNavn:c.navn,eierNavKontorEnhetId:r?.navKontor})]),p({type:"success",tekst:"Du har nå fullført oppdraget."}),t?.(),v.mutate(),t&&t()}catch(k){p({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new E({message:"Klarte ikke å fullføre oppdrag",error:k})}f(!1),a(!1)};return e.jsx(F,{hooks:[v],children:i=>{const j=(i?.kandidater?.filter(S=>!S.arkivert)??[]).filter(S=>S.utfall===A.FATT_JOBBEN).length+(i?.formidlingerAvUsynligKandidat?.filter(S=>S.utfall===A.FATT_JOBBEN)?.length||0),y=i?.antallStillinger,C=j,z=C===0;return e.jsxs(e.Fragment,{children:[e.jsxs(h,{width:600,open:s,onClose:()=>a(!1),header:{heading:"Fullfør oppdraget"},children:[e.jsxs(h.Body,{children:[e.jsx(x,{className:"mb-3",children:z?"Ingen stillinger er besatt":`${C} av ${y} 
                  ${y===1?"stilling":"stillinger"} er
                  besatt.`}),e.jsxs(B.New,{borderRadius:"large",background:"neutral-soft",className:"p-5",children:[e.jsx(x,{className:" font-bold",children:"Dette skjer når du fullfører"}),e.jsx(H,{}),!z&&e.jsx(W,{})]})]}),e.jsxs(h.Footer,{children:[e.jsx(o,{type:"button",disabled:g||i.status===N.Lukket&&l.stilling.status===u.Stoppet,onClick:()=>i.kandidatlisteId&&b(i.kandidatlisteId),children:"Fullfør"}),e.jsx(o,{type:"button",variant:"secondary",onClick:()=>a(!1),children:"Avbryt"})]})]}),e.jsx(o,{onClick:()=>a(!0),disabled:g||i.status===N.Lukket&&l.stilling.status===u.Stoppet||!i.kandidatlisteId,variant:"secondary",size:"small",className:"h-5 w-full",icon:e.jsx(U,{}),children:"Fullfør"})]})}})}le.__docgenInfo={description:"",methods:[],displayName:"FullførStillingKnapp"};function ne(){const[s,a]=d.useState(!1),{stillingsData:l,refetch:t,kandidatlisteInfo:n}=w(),{brukerData:r,valgtNavKontor:c,visVarsel:p}=O(),g=async()=>{a(!0);try{await Promise.all([I({...l,stilling:{...l.stilling,status:u.Stoppet}},{eierNavident:r.ident,eierNavn:r.navn,eierNavKontorEnhetId:c?.navKontor})]),p({type:"success",tekst:"Stillingoppdrag stoppet."}),t?.()}catch(f){p({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new E({message:"Klarte ikke å stoppe oppdrag via stopp knapp",error:f})}a(!1)};return n?.kandidatlisteStatus===N.Lukket&&l.stilling.status!==u.Stoppet?e.jsx(o,{loading:s,size:"small",className:"w-full",onClick:g,children:"Set som avsluttet"}):null}ne.__docgenInfo={description:"",methods:[],displayName:"StoppStillingKnapp"};function ae(){const{stillingsData:s,refetch:a,erEier:l}=w(),{valgtNavKontor:t,brukerData:n,visVarsel:r}=O(),c=R(s,l),[p,g]=d.useState(!1),[f,v]=d.useState(!1),[b,i]=d.useState(!1),k=async j=>{g(!0);try{await Promise.all([T(j,N.Åpen),I({...s,stilling:{...s.stilling,status:u.Aktiv,privacy:f?"SHOW_ALL":"INTERNAL_NOT_SHOWN"}},{eierNavident:n.ident,eierNavn:n.navn,eierNavKontorEnhetId:t?.navKontor})]),r({type:"success",tekst:"Oppdraget gjenåpnet."}),a?.(),c.mutate()}catch(y){r({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new E({message:"Klarte ikke å gjenåpne oppdrag",error:y})}g(!1)};return e.jsx(F,{hooks:[c],children:j=>e.jsxs(e.Fragment,{children:[e.jsx(o,{loading:p,size:"small",className:"w-full",onClick:()=>i(!0),children:"Gjenåpne"}),e.jsxs(h,{open:b,onClose:()=>i(!1),header:{heading:"Gjenåpne stillingsoppdrag",size:"small",closeButton:!1},width:"small",children:[s?.stillingsinfo?.stillingskategori!==G.Formidling&&(s?.stilling?.properties?.applicationurl!=null||s?.stilling?.properties?.applicationemail!=null)&&e.jsx(h.Body,{children:e.jsx(x,{children:e.jsx(D,{checked:f,onChange:y=>v(y.target.checked),children:"Publiser stillingsoppdraget offentlig på arbeidsplassen.no også"})})}),e.jsxs(h.Footer,{children:[e.jsx(o,{type:"button",onClick:()=>k(j.kandidatlisteId),children:"Gjenåpne"}),e.jsx(o,{type:"button",variant:"secondary",onClick:()=>i(!1),children:"Avbryt"})]})]})]})})}ae.__docgenInfo={description:"",methods:[],displayName:"GjenåpneStillingKnapp"};export{te as E,le as F,ae as G,se as R,ne as S};
