import{r as g,j as e,b as h,B as j}from"./iframe-BZGI7Ig_.js";import{A,L as T,u as y,S as L,s as S}from"./LeggTilArbeidsgiverForm-CYzF1d7-.js";import{u as k}from"./useArbeidsgiver-BciUesVU.js";import{u as R}from"./useRekrutteringstreffData-D33OprpO.js";import{S as N}from"./Plus-2JMF5pw1.js";import{M as f}from"./Modal-0KuFj30Z.js";import{u as I}from"./useArbeidsgivere-tKlsI6ch.js";import{u as w}from"./RekrutteringstreffContext-BzHe6DV4.js";import{S as _}from"./SWRLaster-BBaxFb3n.js";import{T as C}from"./Tooltip-D5gQYanW.js";const p=({arbeidsgiver:t,status:r,actionSlot:a})=>{const i=t.organisasjonsnummer,{data:n}=k(i),d=g.useMemo(()=>n?.find(s=>s.organisasjonsnummer===i),[n,i])?.adresse??null;return e.jsx(A,{navn:t.navn,organisasjonsnummer:i,adresse:d,status:r,actionSlot:a})};p.__docgenInfo={description:"",methods:[],displayName:"ArbeidsgiverListeItem",props:{arbeidsgiver:{required:!0,tsType:{name:"z.infer",elements:[{name:"ArbeidsgiverSchema"}],raw:"z.infer<typeof ArbeidsgiverSchema>"},description:""},status:{required:!1,tsType:{name:"string"},description:""},actionSlot:{required:!1,tsType:{name:"ReactNode"},description:""}}};const v=({className:t})=>{const r=g.useRef(null),{activeStep:a}=R(),i=a==="FULLFØRE"||a==="AVLYST",n=()=>r.current?.showModal(),o=()=>r.current?.close();return e.jsxs(e.Fragment,{children:[e.jsx(h,{onClick:n,variant:"secondary",icon:e.jsx(N,{}),disabled:i,className:t,type:"button",children:"Legg til arbeidsgiver"}),e.jsx(f,{ref:r,className:"overflow-visible",onClose:o,header:{heading:"Legg til arbeidsgivere"},children:e.jsx(f.Body,{className:"overflow-visible min-w-[500px]",children:e.jsx(T,{variant:"modal",onCompleted:()=>r.current?.close()})})})]})};v.__docgenInfo={description:"",methods:[],displayName:"LeggTilArbeidsgiverKnapp",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const E=()=>{const{rekrutteringstreffId:t}=w(),r=I(t),a=y(t),i=s=>s.hendelser.find(({hendelsestype:c})=>c==="OPPRETT")?{status:"Lagt til"}:{status:void 0},[n,o]=g.useState(!1),d=async s=>{if(s)try{o(!0),await S(t,s.arbeidsgiverTreffId??s.organisasjonsnummer),r.mutate(),a.mutate()}finally{o(!1)}};return e.jsx(_,{hooks:[r],children:s=>e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx(v,{})}),s.length===0?e.jsx(j,{children:"Ingen arbeidsgivere lagt til"}):e.jsx("ul",{children:s.map((l,c)=>{const{status:x}=i(l),m=s.length===1,b=e.jsx(L,{navn:l.navn,loading:n,disabled:m||n,onConfirm:()=>d(l),arbeidsgivereHook:r,variant:"trash",renderTrigger:({button:u})=>m?e.jsx(C,{content:"Treffet må alltid ha en arbeidsgiver som deltar. Legg til en ny arbeidsgiver først.",className:"max-w-[200px] text-left",children:e.jsx("span",{children:u})}):u});return e.jsx("li",{children:e.jsx(p,{arbeidsgiver:l,status:x,actionSlot:b})},c)})})]})})};E.__docgenInfo={description:"",methods:[],displayName:"Arbeidsgivere"};export{E as A};
