import{a_ as R,bB as T,r as y,j as e,A as f,_ as p,ah as j,B as r,d}from"./iframe-DkqQV0Vp.js";import{S as c}from"./Skeleton-C-V5bcSZ.js";import{f as h}from"./format-DbRpKZZT.js";const v="grid grid-cols-[2rem_10rem_6rem_14rem_4rem_4rem_3rem_7rem] gap-x-4 items-start",o=i=>{if(!i)return null;const m=i.replace(/\[.*\]$/,""),n=new Date(m);return isNaN(n.getTime())?null:n},M=({feltType:i})=>{const{rekrutteringstreffId:m}=R(),{data:n,isLoading:a,error:b,setManuell:x,manuellError:N}=T(m,i),[u,k]=y.useState(null),K=y.useMemo(()=>e.jsxs("div",{className:`${v} font-semibold text-lg mt-4`,children:[e.jsx("span",{className:"text-base",children:"✔/✘"}),e.jsx("span",{children:"Tidspunkt"}),e.jsx("span",{children:"Felt"}),e.jsx("span",{children:"KI versjon"}),e.jsx("span",{children:"Prompt"}),e.jsx("span",{children:"Lagret"}),e.jsx("span",{children:"KI"}),e.jsx("span",{children:"Tekst ok?"})]}),[]);return b?e.jsx(f,{variant:"error",children:"Kunne ikke laste KI-logg."}):e.jsxs("section",{className:"flex flex-col gap-3",children:[a&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(c,{variant:"text",width:"60%"}),e.jsx(c,{variant:"text"}),e.jsx(c,{variant:"text"}),e.jsx(c,{variant:"text"})]}),!a&&n&&n.length>0&&K,!a&&n?.map(s=>{const g=o(s.opprettetTidspunkt),t=s.manuellKontrollBryterRetningslinjer,l=s.lagret&&s.bryterRetningslinjer;return e.jsxs("div",{className:"border-b border-gray-200 pb-2",children:[e.jsxs("div",{className:v,children:[e.jsx("div",{className:"flex justify-start items-center",children:s.manuellKontrollBryterRetningslinjer===null?e.jsx("span",{children:"—"}):s.manuellKontrollBryterRetningslinjer===s.bryterRetningslinjer?e.jsx(p,{className:"text-green-600"}):e.jsx(j,{className:"text-red-600"})}),e.jsx(r,{className:"whitespace-nowrap",children:g?h(g,"dd.MM.yyyy HH:mm:ss"):"—"}),e.jsx(r,{className:"whitespace-nowrap",children:s.feltType}),e.jsxs(r,{className:"whitespace-nowrap",children:[s.kiNavn,"@",s.kiVersjon]}),e.jsx(r,{className:"whitespace-nowrap",children:s.promptVersjonsnummer??"—"}),e.jsx(r,{className:`whitespace-nowrap rounded px-1 ${l?"bg-red-400 font-semibold":""}`,title:l?"Lagret selv om KI meldte brudd":void 0,"aria-live":"polite",children:s.lagret?"Ja":"Nei"}),e.jsx("div",{className:`flex justify-start items-center h-6 rounded px-1 ${l?"bg-red-400":""}`,title:l?"KI: Brudd på retningslinjer (rad er lagret)":void 0,"aria-live":"polite",children:s.bryterRetningslinjer?e.jsx(j,{className:`${l?"":"text-red-600"}`}):e.jsx(p,{className:"text-green-600"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{size:"xsmall",variant:t===!1?"primary":"secondary",onClick:async()=>x({id:s.id,bryterRetningslinjer:!1}),"aria-pressed":t===!1,title:"Marker som godkjent",children:e.jsx(p,{"aria-hidden":!0,className:"text-green-700"})}),e.jsx(d,{size:"xsmall",variant:t===!0?"primary":"secondary",onClick:async()=>x({id:s.id,bryterRetningslinjer:!0}),"aria-pressed":t===!0,title:"Marker som ikke godkjent",children:e.jsx(j,{"aria-hidden":!0,className:"text-red-600"})}),e.jsx(d,{size:"xsmall",variant:t===null?"primary":"secondary",onClick:async()=>x({id:s.id,bryterRetningslinjer:null}),"aria-pressed":t===null,title:"Nullstill vurdering",children:"—"}),e.jsx(d,{size:"xsmall",variant:"tertiary",onClick:()=>k(I=>I===s.id?null:s.id),children:u===s.id?"Skjul":"Detaljer"})]})]}),N&&e.jsx("div",{className:"mt-2",children:e.jsx(f,{variant:"error",children:"Kunne ikke oppdatere manuell vurdering."})}),u===s.id&&e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(r,{children:[e.jsx("b",{children:"ID:"})," ",s.id]}),e.jsxs(r,{children:[e.jsx("b",{children:"TreffId:"})," ",s.treffId]}),e.jsxs(r,{children:[e.jsx("b",{children:"Tittel:"})," ",s.tittel??"—"]}),e.jsxs(r,{children:[e.jsx("b",{children:"FeltType:"})," ",s.feltType]}),e.jsxs(r,{children:[e.jsx("b",{children:"KI-navn:"})," ",s.kiNavn]}),e.jsxs(r,{children:[e.jsx("b",{children:"KI-versjon:"})," ",s.kiVersjon]}),e.jsxs(r,{children:[e.jsx("b",{children:"Svartid:"})," ",s.svartidMs," ms"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Prompt-versjon:"})," ",s.promptVersjonsnummer??"—"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Prompt-hash:"})," ",s.promptHash??"—"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Prompt-tidspunkt:"})," ",s.promptEndretTidspunkt?h(o(s.promptEndretTidspunkt),"dd.MM.yyyy HH:mm:ss"):"—"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Lagret:"})," ",s.lagret?"Ja":"Nei"]}),e.jsxs(r,{children:[e.jsx("b",{children:"KI-resultat:"})," ",s.bryterRetningslinjer?"Brudd":"OK"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Manuell vurdering:"})," ",s.manuellKontrollBryterRetningslinjer===null||s.manuellKontrollBryterRetningslinjer===void 0?"Ikke satt":s.manuellKontrollBryterRetningslinjer?"Brudd":"OK"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Manuell utført av:"})," ",s.manuellKontrollUtfortAv??"—"]}),e.jsxs(r,{children:[e.jsx("b",{children:"Manuell tidspunkt:"})," ",s.manuellKontrollTidspunkt?h(o(s.manuellKontrollTidspunkt),"dd.MM.yyyy HH:mm:ss"):"—"]})]}),e.jsxs("div",{className:"space-y-2 break-words",children:[e.jsxs("div",{children:[e.jsx(r,{className:"font-semibold",children:"Begrunnelse"}),e.jsx("pre",{className:"whitespace-pre-wrap text-sm bg-gray-500 p-2 rounded",children:s.begrunnelse??"—"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-semibold",children:"Spørring (fra frontend)"}),e.jsx("pre",{className:"whitespace-pre-wrap text-xs bg-gray-500 p-2 rounded",children:s.spørringFraFrontend})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-semibold",children:"Spørring (filtrert)"}),e.jsx("pre",{className:"whitespace-pre-wrap text-xs bg-gray-500 p-2 rounded",children:s.spørringFiltrert})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-semibold",children:"Systemprompt"}),e.jsx("pre",{className:"whitespace-pre-wrap text-xs bg-gray-500 p-2 rounded",children:s.systemprompt??"—"})]})]})]})]},s.id)}),!a&&(n?.length??0)===0&&e.jsx(r,{className:"mt-4",children:"Ingen KI-logg for dette treffet."})]})};M.__docgenInfo={description:"",methods:[],displayName:"KiLogg",props:{children:{required:!1,tsType:{name:"union",raw:"ReactNode | undefined",elements:[{name:"ReactNode"},{name:"undefined"}]},description:""},feltType:{required:!1,tsType:{name:"string"},description:""}}};export{M as K};
