import{c as j,u,r as N,j as e,b as c}from"./iframe--aQMagBM.js";import{l as y}from"./leggTilKandidat-BEjoIxf4.js";import{u as m}from"./useKandidatlisteForEier-l_MuYz3a.js";import{u as b,a as g}from"./StillingsContext-DZ7500xJ.js";import{U as S}from"./umamiEvents-BDpRy9-M.js";import{S as T}from"./Plus-DG9zBBLC.js";import{K as C}from"./KandidatlisteContext-fubJ-EHq.js";import{K as E}from"./KandidatlisteFilterContext-Fs3GYEVk.js";import{u as _}from"./useForespurteOmDelingAvCv-DQ69Yz0_.js";import{u as w}from"./SendSmsModal-CYDrk7HN.js";import{o as F}from"./overtaEierskap-3e8F2n3n.js";import{S as p}from"./SWRLaster-CS2y56Xc.js";import{K as I}from"./KandidatVisningSidebar-b1pvPQE3.js";import{S as L}from"./stilling-typer-DLlwa7NU.js";import{N as D}from"./NavigerTilAktivitetsplanenKnapp-B2Y2qKge.js";import{B}from"./Box-8eYY1qxJ.js";const k=({kandidatId:n,stillingId:i})=>{const{track:d}=j(),{visVarsel:t}=u(),[l,r]=N.useState(!1),s=b(),a=m(s?.stillingsData,s?.erEier),o=async()=>{d(S.Stilling.legg_til_kandidat_i_kandidatliste),r(!0);try{await y([n],i),t({tekst:"Kandidat er lagt til i kandidatliste",type:"success"})}catch{t({tekst:"Kandidat kunne ikke legges til i kandidatliste",type:"error"})}finally{r(!1),setTimeout(()=>{a.mutate(),s?.refetchKandidatliste?.()},1e3)}};return e.jsx(c,{onClick:o,loading:l,icon:e.jsx(T,{}),children:"Legg til i listen"})};k.__docgenInfo={description:"",methods:[],displayName:"LeggKandidatTilKandidatliste",props:{kandidatId:{required:!0,tsType:{name:"string"},description:""},stillingId:{required:!0,tsType:{name:"string"},description:""}}};const f=({children:n})=>{const{brukerData:i,valgtNavKontor:d}=u(),{stillingsData:t,erEier:l}=g(),r=_(t.stilling.uuid),s=w(t.stilling.uuid),a=m(t,l),o=async()=>{await F({stillingsid:t.stilling.uuid,eierNavident:i.ident,eierNavn:i.navn,eierNavKontorEnhetId:d?.navKontor}),window.location.reload()},x=()=>{a.mutate(),r.mutate(),s.mutate()};return e.jsx(p,{hooks:[a,r,s],egenFeilmelding:()=>e.jsxs("div",{children:["Feil ved henting av kandidater",e.jsx("br",{}),"Du får ikke vise kandidater hvis du ikke er eier, du kan prøve å ta eierskap på nytt",e.jsx(c,{onClick:o,variant:"secondary",size:"small",className:"my-2 h-5 w-full",children:"Ta eierskap"})]}),children:(v,K,h)=>e.jsx(E,{children:e.jsx(C,{kandidatliste:v,forespurteKandidater:K,beskjeder:h,reFetchKandidatliste:x,children:n})})})};f.__docgenInfo={description:"",methods:[],displayName:"KandidatlisteWrapper",props:{children:{required:!1,tsType:{name:"union",raw:"ReactNode | undefined",elements:[{name:"ReactNode"},{name:"undefined"}]},description:""}}};const H=({kandidatnr:n})=>{const{stillingsData:i,erEier:d,kandidatlisteInfo:t,kandidatlisteLaster:l}=g(),r=m(i,d),s=({children:a})=>e.jsx(B.New,{borderColor:"neutral-subtleA",background:"neutral-soft",borderWidth:"1",padding:"4",borderRadius:"xlarge",className:"mb-2",children:a});return i.stillingsinfo?.stillingskategori===L.Jobbmesse||l?null:e.jsx(p,{hooks:[r],skjulFeilmelding:!0,allowPartialData:!0,children:a=>a&&a.kandidater.some(o=>o.kandidatnr===n)?e.jsx("div",{className:"mb-4",children:e.jsxs(f,{children:[e.jsx("div",{className:"my-5",children:e.jsx(D,{})}),e.jsx(s,{children:e.jsx(I,{kandidatnr:n})})]})}):t?e.jsx(s,{children:e.jsx("div",{className:"flex justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-2",children:i.stilling.title}),e.jsx(k,{kandidatId:n,stillingId:i.stilling.uuid})]})})}):null})};H.__docgenInfo={description:"",methods:[],displayName:"KandidatlisteBoks",props:{kandidatnr:{required:!0,tsType:{name:"string"},description:""}}};export{H as K,k as L};
