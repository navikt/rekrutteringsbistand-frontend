import{t as m,a as A}from"./utils-6AvcrISN.js";import{b5 as h,bL as y,b7 as I,r as v,bM as L,bJ as w,bN as C,bO as D,h as F,bP as E,bw as b}from"./iframe-CcX8-4GA.js";const O=()=>{try{return!1}catch{return!1}},P=r=>{const s=E(r?.hendelser);return s===b.INVITERE||s===b.FULLFÃ˜RE},T=(r,s)=>s?!1:P(r)&&O();function R(){const{rekrutteringstreffId:r,startLagring:s,stoppLagring:l}=h(),{data:e,mutate:c}=y(r),{getValues:u,trigger:a,formState:g}=I(),f=v.useCallback(()=>{const t=u(),o=m(t.fraDato??null,t.fraTid)??e?.fraTid??null,d=m(t.tilDato??t.fraDato??null,t.tilTid)??e?.tilTid??null,i=m(t.svarfristDato??null,t.svarfristTid)??e?.svarfrist??null,n=typeof t.tittel=="string"?t.tittel.trim():"";return{...(n.length>0||e?.tittel&&e.tittel.trim().length>0)&&{tittel:n.length>0?n:e?.tittel},beskrivelse:t.beskrivelse??e?.beskrivelse??null,fraTid:o,tilTid:d,svarfrist:i,gateadresse:t.gateadresse??e?.gateadresse??null,postnummer:t.postnummer??e?.postnummer??null,poststed:t.poststed??e?.poststed??null}},[u,e]);return{save:v.useCallback(async(t,o)=>{if(!r||T(e,o))return;const d=!t||t.length===0;if(!await a(d?void 0:t,{shouldFocus:!1})||g?.errors?.root?.type==="manualPeriod")return;const n=f();try{s("rekrutteringstreff"),await L(r,n),c()}finally{l("rekrutteringstreff")}},[f,r,a,e,c,g?.errors,s,l])}}function S(){const{rekrutteringstreffId:r,startLagring:s,stoppLagring:l}=h(),{data:e}=y(r),{data:c,mutate:u}=w(r),a=c?.[0],{getValues:g,trigger:f,setValue:k}=I();return{save:v.useCallback(async(o,d)=>{if(!r||T(e,d)||o&&o.length&&!await f(o,{shouldFocus:!1}))return;const i=(g("htmlContent")??"").toString();if(i.trim())try{const n=a?.opprettetAvPersonNavn||a?.opprettetAvPersonNavident||"Markedskontakt",p={htmlContent:i,tittel:"Om treffet",opprettetAvPersonNavn:n,opprettetAvPersonBeskrivelse:"Markedskontakt",sendesTilJobbsokerTidspunkt:A(new Date,"Europe/Oslo","yyyy-MM-dd'T'HH:mm:ssXXX")};s("innlegg"),a?.id?await C(r,a.id,p):await D(r,p),u(),k("htmlContent",i,{shouldDirty:!1})}catch(n){new F({message:"Lagring av innlegg feilet.",error:n})}finally{l("innlegg")}},[g,a,u,r,s,l,k,e,f])}}export{O as a,R as b,P as e,S as u};
