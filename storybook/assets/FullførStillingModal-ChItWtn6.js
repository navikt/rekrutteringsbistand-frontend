import{r as y,G as _,R as h,j as e,B as N,M as p,ax as S,Q as F,U as w,S as M,cG as j,u as R,d as k,cz as K,cO as D,cH as T,E as z}from"./iframe-DYebcAac.js";import{P as A,s as $}from"./PersonbrukerTekst-ClY1wHy3.js";import{S as C}from"./EyeSlash-DZW4WbfU.js";import{S as P}from"./ClockDashed-BXarJ3x7.js";import{I as U}from"./IkonNavnAvatar-CCc0gHDO.js";import{U as V}from"./umamiEvents-CYDHrNFb.js";import{M as v}from"./Modal-COqdtEtc.js";import{b as L}from"./useFormField-Bk3OyaAW.js";import{B as O}from"./Box-BSGJkrRu.js";var G=function(s,a){var n={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(n[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(s);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(s,t[l])&&(n[t[l]]=s[t[l]]);return n};const J=y.forwardRef((s,a)=>{var{title:n,titleId:t}=s,l=G(s,["title","titleId"]);let i=_();return i=n?t||"title-"+i:void 0,h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},l),n?h.createElement("title",{id:i},n):null,h.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.75 3.75V7.5a.75.75 0 0 1-1.5 0v-4c0-.69.56-1.25 1.25-1.25h9c.69 0 1.25.56 1.25 1.25v7a.75.75 0 0 1-1.5 0V3.75zm-1.75 7a.25.25 0 0 0-.25.25v9.25h12.5v-6.5H12a.75.75 0 0 1-.75-.75v-2a.25.25 0 0 0-.25-.25zM4.25 11c0-.966.784-1.75 1.75-1.75h5c.966 0 1.75.784 1.75 1.75v1.25h5.75c.69 0 1.25.56 1.25 1.25v7c0 .69-.56 1.25-1.25 1.25h-13c-.69 0-1.25-.56-1.25-1.25zM10 4.75a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))});function I(){return e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Oppdraget og annonsen"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(C,{"aria-hidden":!0})}),e.jsx(p,{size:"small",className:"m-0",children:"Oppdraget vises ikke lenger som åpent for søkere."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(J,{"aria-hidden":!0})}),e.jsx(p,{size:"small",className:"m-0",children:"Du kan fremdeles se detaljer om oppdraget."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(P,{"aria-hidden":!0})}),e.jsx(p,{size:"small",className:"m-0",children:"Du kan gjenåpne oppdraget hvis du vil gjøre noen endringer."})]})]})]})}I.__docgenInfo={description:"",methods:[],displayName:"FullførOppdragTekst"};function q({setVisModal:s}){const{stillingsData:a,erEier:n}=S(),{track:t}=F(),l=w(a,n);return e.jsx(M,{hooks:[l],children:i=>{const d=(i?.kandidater?.filter(r=>!r.arkivert)??[]).filter(r=>r.utfall===j.FATT_JOBBEN).map(r=>`${r.fornavn} ${r.etternavn}`)||[],o=i?.formidlingerAvUsynligKandidat?.filter(r=>r.utfall===j.FATT_JOBBEN).map(r=>`${r.fornavn} ${r.etternavn}`)||[],f=(d?.length||0)+(o?.length||0),g=i?.antallStillinger;return t(V.Stilling.åpne_fullfør_stilling_modal),e.jsx(H,{antallStillinger:g,antallKandidaterSomHarFåttJobb:f,onClose:s,kandidaterSomHarFåttJobb:d.concat(o),kandidatlisteId:i.kandidatlisteId})}})}function H({antallStillinger:s,antallKandidaterSomHarFåttJobb:a,kandidaterSomHarFåttJobb:n,onClose:t,kandidatlisteId:l}){const{valgtNavKontor:i,brukerData:m,visVarsel:d}=R(),{stillingsData:o,refetch:f,erEier:g}=S(),[r,x]=y.useState(!1),E=w(o,g),B=async c=>{x(!0);try{await $(c,K.Lukket),await D({...o,stilling:{...o.stilling,status:T.Stoppet}},{eierNavident:m.ident,eierNavn:m.navn,eierNavKontorEnhetId:i?.navKontor}),d({type:"success",tekst:"Du har nå fullført oppdraget."}),f?.(),await E.mutate()}catch(u){d({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new z({message:"Klarte ikke å fullføre oppdrag",error:u})}x(!1),t()};return e.jsxs(v,{width:600,open:!0,onClose:t,header:{heading:"Fullfør oppdraget"},children:[e.jsxs(v.Body,{children:[e.jsx(p,{className:"mb-3",children:a===0?"Ingen stillinger er besatt":`${a} av ${s} 
                  ${s===1?"stilling":"stillinger"} er
                  besatt.`}),a>5&&e.jsx(L,{header:"Disse jobbsøkerne er blitt ansatt",children:n?.map((c,u)=>e.jsx(b,{kandidat:c},u))}),a<=5&&n?.map((c,u)=>e.jsx(b,{kandidat:c},u)),e.jsxs(O.New,{borderRadius:"large",background:"neutral-soft",className:"p-5",children:[e.jsx(p,{className:"font-bold",children:"Dette skjer når du fullfører:"}),e.jsx(I,{}),a!==0&&e.jsx(A,{})]})]}),e.jsxs(v.Footer,{children:[e.jsx(k,{type:"button",disabled:r,onClick:()=>B(l),children:"Fullfør"}),e.jsx(k,{type:"button",variant:"secondary",onClick:t,children:"Avbryt"})]})]})}const b=({kandidat:s})=>e.jsx(O.New,{borderRadius:"large",background:"neutral-soft",className:"mb-2 p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{fulltNavn:s}),e.jsx(N,{children:s})]})});q.__docgenInfo={description:"",methods:[],displayName:"FullførStillingModal",props:{setVisModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{q as F};
