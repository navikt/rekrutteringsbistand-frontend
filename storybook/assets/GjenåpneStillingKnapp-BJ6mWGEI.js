import{r as i,m as I,h as N,u as w,h6 as A,h_ as u,j as e,e as d,H,B as K,x as j,S as P,w as _,i as V}from"./iframe-D-AjZlUt.js";import{o as O}from"./oppdaterStilling-DuwhYumL.js";import{B as R}from"./Box-ixjNQs7d.js";import{S as F}from"./EyeSlash-DszgvzJl.js";import{S as M}from"./CircleSlash-Dpoo_fYJ.js";import{M as m}from"./Modal-D6I5DY54.js";import{C as B}from"./Checkbox-DneWEjK7.js";import{S as $}from"./Pencil-D_66K7F0.js";import{K as S}from"./schema.zod-DN8VKkm_.js";import{P as G,s as L}from"./PersonbrukerTekst-DL8OgRhU.js";import{u as D}from"./useKandidatlisteForEier-D2Hru4bA.js";import{S as W}from"./ClockDashed-DE0E0Pui.js";import{K as z}from"./KandidatTyper-CkRsvxsW.js";import{S as J}from"./Tasklist-Dpx0SGKA.js";var U=function(s,a){var l={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(l[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(s);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(l[t[n]]=s[t[n]]);return l};const q=i.forwardRef((s,a)=>{var{title:l,titleId:t}=s,n=U(s,["title","titleId"]);let r=I();return r=l?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),l?i.createElement("title",{id:r},l):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.75 3.75V7.5a.75.75 0 0 1-1.5 0v-4c0-.69.56-1.25 1.25-1.25h9c.69 0 1.25.56 1.25 1.25v7a.75.75 0 0 1-1.5 0V3.75zm-1.75 7a.25.25 0 0 0-.25.25v9.25h12.5v-6.5H12a.75.75 0 0 1-.75-.75v-2a.25.25 0 0 0-.25-.25zM4.25 11c0-.966.784-1.75 1.75-1.75h5c.966 0 1.75.784 1.75 1.75v1.25h5.75c.69 0 1.25.56 1.25 1.25v7c0 .69-.56 1.25-1.25 1.25h-13c-.69 0-1.25-.56-1.25-1.25zM10 4.75a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))});var Q=function(s,a){var l={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(l[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(s);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(l[t[n]]=s[t[n]]);return l};const X=i.forwardRef((s,a)=>{var{title:l,titleId:t}=s,n=Q(s,["title","titleId"]);let r=I();return r=l?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),l?i.createElement("title",{id:r},l):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 6.25a.75.75 0 0 0-.75.75v10c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V7a.75.75 0 0 0-.75-.75zm.75 10v-8.5h1.5v8.5zm6.25-10a.75.75 0 0 0-.75.75v10c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V7a.75.75 0 0 0-.75-.75zm.75 10v-8.5h1.5v8.5z",clipRule:"evenodd"}))});var Y=function(s,a){var l={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(l[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(s);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(l[t[n]]=s[t[n]]);return l};const Z=i.forwardRef((s,a)=>{var{title:l,titleId:t}=s,n=Y(s,["title","titleId"]);let r=I();return r=l?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),l?i.createElement("title",{id:r},l):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.62 6.354a.75.75 0 0 1 .744-.01l9 5a.75.75 0 0 1 0 1.312l-9 5A.75.75 0 0 1 8.25 17V7a.75.75 0 0 1 .37-.646m1.13 1.92v7.451L16.456 12z",clipRule:"evenodd"}))});function ee(){const{stillingsData:s,refetch:a}=N(),{valgtNavKontor:l,brukerData:t}=w(),n=A(),[r,c]=i.useState(!1),[p,g]=i.useState(!1),[f,h]=i.useState(!1),x=async v=>{c(!0);try{const k=await O({...s,stilling:{...s.stilling,status:v,privacy:p?"SHOW_ALL":"INTERNAL_NOT_SHOWN"}},{eierNavident:t.ident,eierNavn:t.navn,eierNavKontorEnhetId:l?.navKontor});k.stilling.uuid&&(a?.(),n.push(`/stilling/${k.stilling.uuid}`))}finally{c(!1)}},o=s.stilling.status;return o===u.Aktiv?e.jsx(e.Fragment,{children:e.jsx(d,{loading:r,icon:e.jsx(X,{}),size:"small",className:"w-full  mt-4",onClick:()=>x(u.Inaktiv),children:"Pause søkerforslag"})}):o===u.Inaktiv?e.jsxs(e.Fragment,{children:[e.jsxs(R.New,{background:"brand-beige-moderate",borderRadius:"large",className:"my-4 p-4",children:[e.jsx(H,{level:"2",size:"xsmall",className:"mb-2",children:"Du mottar ikke søkerforslag"}),e.jsxs("div",{className:"flex gap-4 flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(K,{size:"small",children:"Oppdraget er skjult. Folk kan fortsatt finne oppdraget ved å filtrerer det inn."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(K,{size:"small",children:"Andre kan ikke foreslå jobbsøkere."})]})]})]}),e.jsx(d,{loading:r,icon:e.jsx(Z,{}),size:"small",className:"w-full  mt-4",onClick:()=>h(!0),children:"Åpne søkerforslag"}),e.jsxs(m,{open:f,onClose:()=>h(!1),header:{heading:"Åpne søkerforslag",size:"small",closeButton:!1},width:"small",children:[(s?.stilling?.properties?.applicationurl!=null||s?.stilling?.properties?.applicationemail!=null)&&e.jsx(m.Body,{children:e.jsx(j,{children:e.jsx(B,{checked:p,onChange:v=>g(v.target.checked),children:"Publiser stillingsoppdraget offentlig på arbeidsplassen.no også"})})}),e.jsxs(m.Footer,{children:[e.jsx(d,{type:"button",onClick:()=>x(u.Aktiv),children:"Åpne søkerforslag"}),e.jsx(d,{type:"button",variant:"secondary",onClick:()=>h(!1),children:"Avbryt"})]})]})]}):null}ee.__docgenInfo={description:"",methods:[],displayName:"EndreSøkeforslag"};function te(){const{stillingsData:s,erEier:a,kandidatlisteInfo:l}=N(),t=A();return a?e.jsx(d,{disabled:l?.kandidatlisteStatus==="LUKKET",variant:"secondary",size:"small",className:"h-5 w-full",icon:e.jsx($,{}),onClick:()=>t.push(`/stilling/${s.stilling.uuid}/rediger`),children:"Rediger"}):null}te.__docgenInfo={description:"",methods:[],displayName:"RedigerStillingKnapp"};function T(){return e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Oppdraget og annonsen"}),e.jsxs("div",{className:"flex flex-col gap-3 ",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{"aria-hidden":!0}),e.jsx(j,{size:"small",className:"m-0",children:"Annonsen vises ikke lenger som aktiv."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{"aria-hidden":!0}),e.jsx(j,{size:"small",className:"m-0",children:"Du kan fremdeles se detaljer om oppdraget."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{"aria-hidden":!0}),e.jsx(j,{size:"small",className:"m-0",children:"Du kan gjenåpne oppdraget hvis du vil gjøre noen endringer."})]})]})]})}T.__docgenInfo={description:"",methods:[],displayName:"FullførOppdragTekst"};function se(){const[s,a]=i.useState(!1),{stillingsData:l,refetch:t,erEier:n}=N(),{valgtNavKontor:r,brukerData:c,visVarsel:p}=w(),[g,f]=i.useState(!1),h=D(l,n),x=async o=>{f(!0);try{await Promise.all([L(o,S.Lukket),O({...l,stilling:{...l.stilling,status:u.Stoppet}},{eierNavident:c.ident,eierNavn:c.navn,eierNavKontorEnhetId:r?.navKontor})]),p({type:"success",tekst:"Du har nå fullført oppdraget."}),t?.(),h.mutate(),t&&t()}catch(v){p({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new _({message:"Klarte ikke å fullføre oppdrag",error:v})}f(!1),a(!1)};return e.jsx(P,{hooks:[h],children:o=>{const k=(o?.kandidater?.filter(y=>!y.arkivert)??[]).filter(y=>y.utfall===z.FATT_JOBBEN).length+(o?.formidlingerAvUsynligKandidat?.filter(y=>y.utfall===z.FATT_JOBBEN)?.length||0),b=o?.antallStillinger,E=k,C=E===0;return e.jsxs(e.Fragment,{children:[e.jsxs(m,{width:600,open:s,onClose:()=>a(!1),header:{heading:"Fullfør oppdraget"},children:[e.jsxs(m.Body,{children:[e.jsx(j,{className:"mb-3",children:C?"Ingen stillinger er besatt":`${E} av ${b} 
                  ${b===1?"stilling":"stillinger"} er
                  besatt.`}),e.jsxs(R.New,{borderRadius:"large",background:"neutral-soft",className:"p-5",children:[e.jsx(j,{className:" font-bold",children:"Dette skjer når du fullfører"}),e.jsx(T,{}),!C&&e.jsx(G,{})]})]}),e.jsxs(m.Footer,{children:[e.jsx(d,{type:"button",disabled:g||o.status===S.Lukket&&l.stilling.status===u.Stoppet,onClick:()=>o.kandidatlisteId&&x(o.kandidatlisteId),children:"Fullfør"}),e.jsx(d,{type:"button",variant:"secondary",onClick:()=>a(!1),children:"Avbryt"})]})]}),e.jsx(d,{onClick:()=>a(!0),disabled:g||o.status===S.Lukket&&l.stilling.status===u.Stoppet||!o.kandidatlisteId,variant:"secondary",size:"small",className:"h-5 w-full",icon:e.jsx(J,{}),children:"Fullfør"})]})}})}se.__docgenInfo={description:"",methods:[],displayName:"FullførStillingKnapp"};function le(){const[s,a]=i.useState(!1),{stillingsData:l,refetch:t,kandidatlisteInfo:n}=N(),{brukerData:r,valgtNavKontor:c,visVarsel:p}=w(),g=async()=>{a(!0);try{await Promise.all([O({...l,stilling:{...l.stilling,status:u.Stoppet}},{eierNavident:r.ident,eierNavn:r.navn,eierNavKontorEnhetId:c?.navKontor})]),p({type:"success",tekst:"Stillingoppdrag stoppet."}),t?.()}catch(f){p({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new _({message:"Klarte ikke å stoppe oppdrag via stopp knapp",error:f})}a(!1)};return n?.kandidatlisteStatus===S.Lukket&&l.stilling.status!==u.Stoppet?e.jsx(d,{loading:s,size:"small",className:"w-full",onClick:g,children:"Set som avsluttet"}):null}le.__docgenInfo={description:"",methods:[],displayName:"StoppStillingKnapp"};function ne(){const{stillingsData:s,refetch:a,erEier:l}=N(),{valgtNavKontor:t,brukerData:n,visVarsel:r}=w(),c=D(s,l),[p,g]=i.useState(!1),[f,h]=i.useState(!1),[x,o]=i.useState(!1),v=async k=>{g(!0);try{await Promise.all([L(k,S.Åpen),O({...s,stilling:{...s.stilling,status:u.Aktiv,privacy:f?"SHOW_ALL":"INTERNAL_NOT_SHOWN"}},{eierNavident:n.ident,eierNavn:n.navn,eierNavKontorEnhetId:t?.navKontor})]),r({type:"success",tekst:"Oppdraget gjenåpnet."}),a?.(),c.mutate()}catch(b){r({type:"error",tekst:"Klarte ikke å endre status på oppdraget"}),new _({message:"Klarte ikke å gjenåpne oppdrag",error:b})}g(!1)};return e.jsx(P,{hooks:[c],children:k=>e.jsxs(e.Fragment,{children:[e.jsx(d,{loading:p,size:"small",className:"w-full",onClick:()=>o(!0),children:"Gjenåpne"}),e.jsxs(m,{open:x,onClose:()=>o(!1),header:{heading:"Gjenåpne stillingsoppdrag",size:"small",closeButton:!1},width:"small",children:[s?.stillingsinfo?.stillingskategori!==V.Formidling&&(s?.stilling?.properties?.applicationurl!=null||s?.stilling?.properties?.applicationemail!=null)&&e.jsx(m.Body,{children:e.jsx(j,{children:e.jsx(B,{checked:f,onChange:b=>h(b.target.checked),children:"Publiser stillingsoppdraget offentlig på arbeidsplassen.no også"})})}),e.jsxs(m.Footer,{children:[e.jsx(d,{type:"button",onClick:()=>v(k.kandidatlisteId),children:"Gjenåpne"}),e.jsx(d,{type:"button",variant:"secondary",onClick:()=>o(!1),children:"Avbryt"})]})]})]})})}ne.__docgenInfo={description:"",methods:[],displayName:"GjenåpneStillingKnapp"};export{ee as E,se as F,ne as G,te as R,le as S};
