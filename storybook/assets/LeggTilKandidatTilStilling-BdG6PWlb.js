import{c as K,j as n,ac as T,K as S,r as l,u as I,b,R as F}from"./iframe-WlOW16KT.js";import{L as h}from"./LenkeKortMedIkon-BTJzFF2W.js";import{U as g}from"./umamiEvents-BDpRy9-M.js";import{l as w}from"./leggTilKandidat-CksgX940.js";import{a as C}from"./StillingsContext-BX8ONHb7.js";import{L as M}from"./LeggTilKandidater-CYd67IsR.js";import{M as d}from"./Modal-qtWpECVq.js";function U({stillingId:t}){const{trackAndNavigate:s}=K(),i=`/stilling/${t}/finn-kandidater`,r=()=>s(g.Stilling.finn_kandidater_knapp,i);return n.jsx(h,{tittel:"Finn og foreslÃ¥ jobbsÃ¸kere",beskrivelse:"Se alle som leter etter jobb nÃ¥, og finn riktig person til jobben",ikon:"ðŸ‘‰",onClick:r})}U.__docgenInfo={description:"",methods:[],displayName:"FinnKandidaterKnapp",props:{stillingId:{required:!0,tsType:{name:"string"},description:""}}};const A=t=>`${S.internUrl}/veileder/kandidatlister/${t}/formidlingeravusynligkandidat`,E=(t,s)=>T(A(t),s),N=({stillingsId:t,stillingsTittel:s})=>{const i=l.useRef(null),{track:r}=K(),{stillingsData:B,kandidatlisteInfo:c,refetchKandidatliste:j}=C(),{valgtNavKontor:y,visVarsel:p}=I(),[o,k]=l.useState([]),[v,x]=l.useState(0),[m,u]=l.useState(!1),L=()=>{x(a=>a+1),r(g.Stilling.Ã¥pne_legg_til_kandidat_modal),i.current?.showModal()},_=async()=>{u(!0);const a=o.filter(e=>e.aktÃ¸rId===null),f=o.map(e=>e.aktÃ¸rId).filter(e=>e!=null);if(c?.kandidatlisteId&&(f.length>0||a.length>0))try{await w(f,t);for(const e of a)await E(c.kandidatlisteId,{fnr:e.fÃ¸dselsnummer,fÃ¥ttJobb:!0,navKontor:y?.navKontor??"",stillingsId:t});r(g.Stilling.legg_til_kandidat,{antall:o.length}),p({tekst:"JobbsÃ¸kere ble lagt til i stillingen",type:"success"}),k([]),j?.(),i.current?.close()}catch(e){throw p({tekst:"Noe gikk galt ved lagring av jobbsÃ¸kere",type:"error"}),new F({message:"Veil ved legg til jobbsÃ¸kere",error:e})}u(!1)};return n.jsxs(l.Fragment,{children:[n.jsx(h,{tittel:"Legg til jobbsÃ¸kere",beskrivelse:"Vet du fÃ¸dselsnummeret til personen, kan du legge dem til med en gang.",onClick:L,ikon:"âž•",loading:m}),n.jsxs(d,{width:"600px",ref:i,header:{closeButton:!1,heading:`Legg til jobbsÃ¸kere til ${s??"stilling"}`},children:[n.jsx(d.Body,{children:n.jsx(M,{callBack:a=>{k(a)}},v)}),n.jsxs(d.Footer,{children:[n.jsx(b,{disabled:o.length===0,onClick:_,children:"Legg til jobbsÃ¸ker"}),n.jsx(b,{loading:m,type:"button",variant:"secondary",onClick:()=>i.current?.close(),children:"Avbryt"})]})]})]},t)};N.__docgenInfo={description:"",methods:[],displayName:"LeggTilKandidatTilStilling",props:{stillingsId:{required:!0,tsType:{name:"string"},description:""},stillingsTittel:{required:!0,tsType:{name:"string"},description:""}}};export{U as F,N as L};
