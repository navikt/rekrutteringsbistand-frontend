import{u as T}from"./useJobbsøkere-DWEnogLx.js";import{u as I}from"./useRekrutteringstreff-s9TdfY-S.js";import{u as k}from"./RekrutteringstreffContext-CgxDvbBy.js";import{J as c}from"./constants-ZFgYQbaO.js";import{r as o,gH as v,g as S,o as A,I as r,d as b}from"./iframe-DUxtTNxK.js";import{u as P}from"./index-BB9gl3jm.js";import{g as N}from"./rekrutteringstreff-gXHlv8Wn.js";const g=e=>e.hendelser?.some(t=>t.hendelsestype===c.INVITER)??!1,m=e=>e.hendelser?.some(t=>t.hendelsestype===c.SVAR_JA_TIL_INVITASJON)??!1,R=e=>e.hendelser?.some(t=>t.hendelsestype===c.SVAR_NEI_TIL_INVITASJON)??!1,D=()=>{const{rekrutteringstreffId:e}=k(),{data:t}=I(e),{data:s=[]}=T(e),n=o.useMemo(()=>t?.tilTid?new Date(t.tilTid)<new Date:!1,[t?.tilTid]),l=o.useMemo(()=>s.filter(g).length,[s]),a=l>0,u=o.useMemo(()=>s.filter(m).length,[s]),f=o.useMemo(()=>s.filter(i=>g(i)&&!m(i)&&!R(i)).length,[s]),d=[a,n].filter(Boolean).length;return{harInvitert:a,antallInviterte:l,antallSvarJa:u,antallVenterSvar:f,antallInviterePunkterFullfort:d,totaltAntallInviterePunkter:2}},J=A({id:r(),treffId:r(),tittel:r(),opprettetAvPersonNavident:r(),opprettetAvPersonNavn:r().optional().nullable(),opprettetAvPersonBeskrivelse:r(),sendesTilJobbsokerTidspunkt:r().nullable(),htmlContent:r(),opprettetTidspunkt:r(),sistOppdatertTidspunkt:r()}),H=b(J),V=e=>`${v.internUrl}/${e}/innlegg`,_=e=>P(V(e),S(H)),C=()=>{const{rekrutteringstreffId:e}=k(),t=I(e),{data:s}=_(e),n=t.data,l=n?.hendelser,a=o.useMemo(()=>N(l),[l]),u=a==="AVLYST",f=a==="INVITERE"||a==="FULLFØRE",{harInvitert:d}=D(),p=o.useMemo(()=>n?.fraTid?new Date(n.fraTid)<new Date:!1,[n?.fraTid]),i=o.useMemo(()=>n?.tilTid?new Date(n.tilTid)<new Date:!1,[n?.tilTid]),h=s?.[0]?.htmlContent??null;return{rekrutteringstreffId:e,treff:n,hendelser:l,innlegg:s,activeStep:a,avlyst:u,harPublisert:f,harInvitert:d,fraTidspunktHarPassert:p,tilTidspunktHarPassert:i,innleggHtmlFraBackend:h,oppdaterData:()=>{t.mutate()},rekrutteringstreffHook:t}};export{J as I,_ as a,D as b,C as u};
