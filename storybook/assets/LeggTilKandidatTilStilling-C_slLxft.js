import{j as t,r as a,G as L,aq as I,u as S,d as b,cr as T,i as F}from"./iframe-CYiyhWTI.js";import{L as h}from"./LenkeKortMedIkon-BNtB30CV.js";import{U as o}from"./umamiEvents-4lZbqD_K.js";import{l as w}from"./leggTilKandidat-BcQF897C.js";import{L as M}from"./LeggTilKandidater-DB20NYA-.js";import{M as d}from"./Modal-CLHJe2OT.js";function C(n){let r=null,i="";return"stillingId"in n?(r=o.Stilling.finn_kandidater_knapp,i=`/stilling/${n.stillingId}/finn-kandidater`):"rekrutteringstreffId"in n&&(r=o.Rekrutteringstreff.finn_jobbsÃ¸kere_knapp,i=`/rekrutteringstreff/${n.rekrutteringstreffId}/finn-kandidater`),t.jsx(h,{tittel:"Finn og foreslÃ¥ jobbsÃ¸kere",beskrivelse:"Se alle som leter etter jobb nÃ¥, og finn riktig person til jobben",ikon:"ðŸ‘‰",href:i,"data-umami-event":r})}C.__docgenInfo={description:"",methods:[],displayName:"FinnJobbsÃ¸kereKnapp"};const E=({stillingsId:n,stillingsTittel:r})=>{const i=a.useRef(null),{track:g}=L(),{kandidatlisteInfo:c,refetchKandidatliste:j}=I(),{valgtNavKontor:K,visVarsel:k}=S(),[l,f]=a.useState([]),[v,y]=a.useState(0),[m,u]=a.useState(!1),x=()=>{y(s=>s+1),g(o.Stilling.Ã¥pne_legg_til_kandidat_modal),i.current?.showModal()},_=async()=>{u(!0);const s=l.filter(e=>e.aktÃ¸rId===null),p=l.map(e=>e.aktÃ¸rId).filter(e=>e!=null);if(c?.kandidatlisteId&&(p.length>0||s.length>0))try{await w(p,n);for(const e of s)await T(c.kandidatlisteId,{fnr:e.fÃ¸dselsnummer,fÃ¥ttJobb:!0,navKontor:K?.navKontor??"",stillingsId:n});g(o.Stilling.legg_til_kandidat,{antall:l.length}),k({tekst:"JobbsÃ¸kere ble lagt til i stillingen",type:"success"}),f([]),j?.(),i.current?.close()}catch(e){throw k({tekst:"Noe gikk galt ved lagring av jobbsÃ¸kere",type:"error"}),new F({message:"Veil ved legg til jobbsÃ¸kere",error:e})}u(!1)};return t.jsxs(a.Fragment,{children:[t.jsx(h,{tittel:"Legg til jobbsÃ¸kere",beskrivelse:"Vet du fÃ¸dselsnummeret til personen, kan du legge dem til med en gang.",onClick:x,ikon:"âž•",loading:m}),t.jsxs(d,{width:"600px",ref:i,header:{closeButton:!1,heading:`Legg til jobbsÃ¸kere til ${r??"stilling"}`},children:[t.jsx(d.Body,{children:t.jsx(M,{callBack:s=>{f(s)}},v)}),t.jsxs(d.Footer,{children:[t.jsx(b,{disabled:l.length===0,onClick:_,children:"Legg til jobbsÃ¸ker"}),t.jsx(b,{loading:m,type:"button",variant:"secondary",onClick:()=>i.current?.close(),children:"Avbryt"})]})]})]},n)};E.__docgenInfo={description:"",methods:[],displayName:"LeggTilKandidatTilStilling",props:{stillingsId:{required:!0,tsType:{name:"string"},description:""},stillingsTittel:{required:!0,tsType:{name:"string"},description:""}}};export{C as F,E as L};
