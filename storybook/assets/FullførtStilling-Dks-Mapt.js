import{r as f,l as X,m as y,bn as Z,aq as I,u as xe,f as ee,cL as T,h as he,j as e,H as m,x as A,d as O,C as z,cM as M,cN as P,A as ke,cO as ve,cP as B,cI as je,cQ as be,cR as Se,cB as Ne,cG as W,B as c,e as ye,cD as De,n as Ee}from"./iframe-DQa1UAKP.js";import{E as ze,R as we,F as Fe,S as Oe,G as Ae}from"./Gjen√•pneStillingKnapp-DWLrwZ9j.js";import{D as K}from"./DatoVelger-CYU433if.js";import{M as H}from"./Modal-CSMNSt-W.js";import{C as Y}from"./Checkbox-Cw5u9KGl.js";import{a as Ve}from"./useDatepicker-DedfWgaM.js";import{A as se,a as te,b as re,c as ie}from"./accordion-D7W2V-QT.js";import{B as V}from"./Box-BN3emj-o.js";import{S as ae}from"./Bell-CxFcLzt9.js";import{S as le}from"./Table-oEbQcJVn.js";import{S as ne}from"./PersonChat-BdCOtIVi.js";import{S as de}from"./Eye-rGTPb-14.js";import{P as Ie}from"./ProgressBar-CLaFC3UL.js";import{S as _e}from"./ShieldLock-Cd2Az5wC.js";import{S as Re}from"./PadlockLocked-Cu1s0EDh.js";var Ce=function(t,i){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(a[s[l]]=t[s[l]]);return a};const oe=f.forwardRef((t,i)=>{var{title:a,titleId:s}=t,l=Ce(t,["title","titleId"]);let d=X();return d=a?s||"title-"+d:void 0,y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:i,"aria-labelledby":d},l),a?y.createElement("title",{id:d},a):null,y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.5 2.25c-.69 0-1.25.56-1.25 1.25v16.75h-2.5V10.5c0-.69-.56-1.25-1.25-1.25h-3c-.69 0-1.25.56-1.25 1.25v9.75H4a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 0-1.5h-1.25V3.5c0-.69-.56-1.25-1.25-1.25zm.25 18V3.75h2.5v16.5zm-8-9.5v9.5h2.5v-9.5z",clipRule:"evenodd"}))});var Te=function(t,i){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(a[s[l]]=t[s[l]]);return a};const Me=f.forwardRef((t,i)=>{var{title:a,titleId:s}=t,l=Te(t,["title","titleId"]);let d=X();return d=a?s||"title-"+d:void 0,y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:i,"aria-labelledby":d},l),a?y.createElement("title",{id:d},a):null,y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.04 4.558a4.75 4.75 0 0 1 8.248 4.716A1.75 1.75 0 0 1 18.75 11v9a.75.75 0 0 1-.75.75H6a.75.75 0 0 1-.75-.75v-9c0-.966.784-1.75 1.75-1.75h8.57l.399-.692a3.25 3.25 0 0 0-5.63-3.25l-.69 1.195a.75.75 0 1 1-1.299-.75zm7.036 6.192a1 1 0 0 1-.153 0H7a.25.25 0 0 0-.25.25v8.25h10.5V11a.25.25 0 0 0-.25-.25zM10.5 14.5a1.5 1.5 0 1 1 2.25 1.3V17a.75.75 0 0 1-1.5 0v-1.2a1.5 1.5 0 0 1-.75-1.3",clipRule:"evenodd"}))});function ce(){const t=Z(),{stillingsData:i,refetch:a}=I(),{brukerData:s,valgtNavKontor:l}=xe(),[d,u]=f.useState(!1),[b,p]=f.useState(!1),[h,S]=f.useState(),D=f.useMemo(()=>ee(Ve(new Date,3),ve),[]),E=f.useCallback(()=>{const r=i?.stilling,n=i?.stilling?.properties??{},g=n?.starttime==="Etter avtale",o=n?.applicationdue==="Snarest";return{visningsdato:typeof r?.expires=="string"?T(r.expires):void 0,oppstart:!g&&typeof n?.starttime=="string"?T(n.starttime):void 0,oppstartEtterAvtale:g,soknadsfrist:!o&&typeof n?.applicationdue=="string"?T(n.applicationdue):void 0,soknadsfristSnarest:o}},[i]),{control:k,handleSubmit:w,setValue:v,getValues:j,watch:F,reset:q,trigger:L}=he({mode:"onSubmit",reValidateMode:"onChange",defaultValues:E()});f.useEffect(()=>{d&&(q(E()),S(void 0))},[d,E,q]);const pe=F("oppstartEtterAvtale"),fe=F("soknadsfristSnarest"),_=F("oppstart"),R=F("soknadsfrist"),[G,U]=f.useState(),[$,J]=f.useState();if(f.useEffect(()=>{_&&U(_)},[_]),f.useEffect(()=>{R&&J(R)},[R]),!i)return null;const ue=async r=>{const n=B(r.visningsdato),g=r.oppstartEtterAvtale?"Etter avtale":B(r.oppstart),o=r.soknadsfristSnarest?"Snarest":B(r.soknadsfrist),x=i.stilling.properties??{};if(!r.oppstartEtterAvtale&&g==null||!r.soknadsfristSnarest&&o==null){S("Ugyldig datoformat. Vennligst kontroller at alle datoer er gyldige.");return}const C={...i,stilling:{...i.stilling,status:je.Aktiv,expires:n,properties:{...x,starttime:g,applicationdue:o},administration:{...i.stilling.administration??{},status:Se.Done}}};p(!0),S(void 0);try{const N=await be(C,{eierNavident:s.ident,eierNavn:s.navn,eierNavKontorEnhetId:l?.navKontor});a?.(),t.push(`/stilling/${N.stilling.uuid}`),u(!1)}catch(N){S(N?.message??"Klarte ikke √• lagre endringene")}finally{p(!1)}};return e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{size:"xsmall",level:"3",children:"Forlengelse"}),e.jsx(A,{size:"small",className:"mt-1",children:"Trenger du litt mer tid? Du kan endre datoene for siste visning, s√∏knadsfrist, og oppstart."}),e.jsx(O,{size:"small",className:"mt-4 w-full",onClick:()=>u(!0),children:"Forlenge oppdraget"}),e.jsx(H,{open:d,onClose:()=>u(!1),header:{heading:"Forleng oppdraget",size:"small"},width:"small",children:e.jsxs("form",{onSubmit:w(ue),children:[e.jsxs(H.Body,{children:[e.jsx(A,{className:"mb-6",children:"Endre datoene for oppdraget hvis du vil ha litt mer tid."}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(z,{name:"visningsdato",control:k,rules:{required:"Velg siste visningsdato",validate:r=>r?M(r)?P(r)?"Dato kan ikke v√¶re i fortiden":!0:"Ugyldig datoformat":"Velg siste visningsdato"},render:({field:{value:r,onChange:n},fieldState:{error:g}})=>e.jsx(K,{label:"Siste visningsdato",disablePastDates:!0,valgtDato:r,setDato:o=>{n(o)},error:g?.message})}),e.jsxs("div",{className:"grid grid-cols-[3fr_2fr] items-start gap-6",children:[e.jsx(z,{name:"oppstart",control:k,rules:{validate:r=>{const{oppstartEtterAvtale:n}=j();return n?!0:r?P(r)?"Dato kan ikke v√¶re i fortiden":!0:"Velg oppstartsdato eller marker Etter avtale"}},render:({field:{value:r,onChange:n},fieldState:{error:g}})=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(K,{label:"Oppstart",disablePastDates:!0,valgtDato:r,setDato:o=>{n(o)},disabled:pe,error:g?.message})})}),e.jsx(z,{name:"oppstartEtterAvtale",control:k,render:({field:{value:r,onChange:n}})=>e.jsx(Y,{className:"min-w-max pt-9",checked:r,onChange:g=>{const o=g.target.checked;n(o);const x=j("oppstart");o?(x&&U(x),v("oppstart",void 0,{shouldValidate:!0})):!x&&G&&v("oppstart",G,{shouldValidate:!0}),L("oppstart")},children:"Etter avtale"})})]}),e.jsxs("div",{className:"grid grid-cols-[3fr_2fr] items-start gap-6",children:[e.jsx(z,{name:"soknadsfrist",control:k,rules:{validate:r=>{const{soknadsfristSnarest:n}=j();return n?!0:r?P(r)?"Dato kan ikke v√¶re i fortiden":!0:"Velg s√∏knadsfrist eller marker Snarest"}},render:({field:{value:r,onChange:n},fieldState:{error:g}})=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(K,{label:"S√∏knadsfrist",disablePastDates:!0,valgtDato:r,setDato:o=>{n(o)},disabled:fe,error:g?.message})})}),e.jsx(z,{name:"soknadsfristSnarest",control:k,render:({field:{value:r,onChange:n}})=>e.jsx(Y,{className:"min-w-max pt-9",checked:r,onChange:g=>{const o=g.target.checked;n(o);const x=j("soknadsfrist");if(o){x&&J(x),v("soknadsfrist",void 0,{shouldValidate:!0});const C=j("visningsdato"),N=M(C),Q=M(D);(!N||Q&&N<Q)&&v("visningsdato",D,{shouldValidate:!0})}else!x&&$&&v("soknadsfrist",$,{shouldValidate:!0});L(["soknadsfrist","visningsdato"])},children:"Snarest"})})]}),h&&e.jsx(ke,{variant:"error",children:h})]})]}),e.jsxs(H.Footer,{children:[e.jsx(O,{type:"submit",loading:b,disabled:b,children:"Publiser"}),e.jsx(O,{type:"button",variant:"secondary",onClick:()=>u(!1),disabled:b,children:"Avbryt"})]})]})})]})}ce.__docgenInfo={description:"",methods:[],displayName:"ForlengeOppdrag"};function Pe({antallF√•ttJobben:t,antallDelt:i,totalStillinger:a,dropDown:s}){const{stillingsData:l,omStilling:{erJobbmesse:d}}=I(),u=Ne(l).visningsStatus,b=d?null:e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsx(m,{size:"small",level:"2",children:"Del med arbeidsgiver"}),e.jsx(Ie,{value:i,valueMax:a,size:"small","aria-labelledby":"progress-bar-label-small"}),e.jsxs("div",{className:"flex justify-end text-sm tabular-nums",children:[i,"/",a]})]}),p=e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(we,{}),e.jsx(Fe,{})]}),h=e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx(m,{size:"xsmall",level:"3",children:"Sjekkliste"}),e.jsx(A,{size:"small",className:"mt-1",children:"Ble det match? Velg hvem som fikk jobben og fullf√∏r. Du kan ogs√• fullf√∏re oppdraget selv om det ikke gikk denne gangen."})]}),e.jsxs("div",{children:[e.jsx(m,{size:"xsmall",level:"3",children:"S√∏kerstopp"}),e.jsx(A,{size:"small",className:"mt-1",children:"Har du f√•tt nok jobbs√∏kere? Du kan stoppe √• motta nye forslag, og samtidig skjule oppdraget fra listen. Sl√• det p√• igjen n√•r du vil."}),e.jsx(ze,{}),u!==W.Slettet&&u!==W.Fullfort&&e.jsx(ce,{})]}),!d&&e.jsxs(V.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(m,{size:"xsmall",level:"3",className:"mb-4",children:"Hva skjer etter fullf√∏ring?"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Alle som ikke fikk jobben f√•r beskjed om avslaget p√• nav.no/min-side."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Aktivitetskortet flyttes til ‚ÄúFullf√∏rt‚Äù-kolonnen i aktivitetsplanen."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"De som fikk jobben f√•r ikke beskjed automatisk, siden de mest sannsynlig f√•r h√∏re nyheten direkte fra arbeidsgiveren."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Oppdraget vises ikke lenger som aktiv."})]}),t>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Registreringen sendes til statistikk. Tellingene l√•ses ved m√•nedsskifte."})]})]})]})]});return s?e.jsx("div",{className:"p-2",children:e.jsx(se,{type:"single",collapsible:!0,children:e.jsxs(te,{value:"item-1",children:[p,e.jsx(re,{children:b}),e.jsx(ie,{children:h})]})})}):e.jsxs("div",{className:"mr-2",children:[p,e.jsxs("div",{className:"mt-5",children:[b,h]})]})}Pe.__docgenInfo={description:"",methods:[],displayName:"AktivStilling",props:{dropDown:{required:!1,tsType:{name:"boolean"},description:""},antallF√•ttJobben:{required:!0,tsType:{name:"number"},description:""},antallDelt:{required:!0,tsType:{name:"number"},description:""},totalStillinger:{required:!0,tsType:{name:"number"},description:""}}};function ge(){const{stillingsData:t}=I(),i=Z();return e.jsx(O,{variant:"primary",size:"small",className:"h-5 w-full",onClick:()=>i.push(`/etterregistrering/${t.stilling.uuid}/rediger`),children:"Gjen√•pne"})}ge.__docgenInfo={description:"",methods:[],displayName:"Gjen√•pneEtterregistreringKnapp"};const me=()=>e.jsxs(V.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(m,{size:"xsmall",level:"3",className:"mb-4",children:"Hva skjer etter registrering?"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Registreringen sendes til statistikk. Tellingene l√•ses ved m√•nedsskifte."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_e,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Ved m√•nedsskiftet l√•ses registreringen. Det vil ikke lenger v√¶re mulig √• rette feil."})]})]})]});me.__docgenInfo={description:"",methods:[],displayName:"FremdriftspanelEtterregistreringInfoTekst"};function Be({totalStillinger:t,antallF√•ttJobben:i,dropDown:a}){const{stillingsData:s,omStilling:{erJobbmesse:l}}=I(),u=s?.stillingsinfo?.stillingskategori===De.Formidling,p=(()=>{const v=s?.stilling.published;if(!v)return null;const j=new Date(v);return new Date(j.getFullYear(),j.getMonth()+1,0)})(),h=new Date,S=p!=null?ee(p,"dd. MMMM",{locale:Ee}):"",D=p!=null&&h>p,E=p!=null?p.getDate()-h.getDate():0,k=u?D?e.jsx(e.Fragment,{}):e.jsx(ge,{}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsx(Ae,{})]}),w=e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[e.jsxs("div",{children:[u?e.jsx(m,{size:"small",level:"2",children:"Registreringen er fullf√∏rt üí™"}):e.jsx(m,{size:"small",level:"2",children:"Oppdrag fullf√∏rt üí™"}),e.jsxs(c,{size:"small",className:"mt-1 text-[var(--ax-text-neutral-subtle)]",children:["Av ",s.stilling?.administration?.reportee," ",ye({dato:s.stilling.updated})]})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[i>0?e.jsx(m,{size:"xsmall",level:"3",children:"üéØ Her traff du blink"}):e.jsx(m,{size:"xsmall",level:"3",children:"üêü Ingen napp denne gangen"}),e.jsxs(c,{size:"small",children:[i," av ",t," stillinger ble besatt"]})]}),u?e.jsxs(e.Fragment,{children:[e.jsx(V.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:D?e.jsxs(e.Fragment,{children:[e.jsxs(m,{size:"xsmall",level:"3",className:"mb-4 flex items-center gap-2",children:[e.jsx(Re,{"aria-hidden":!0,className:"shrink-0"}),"Registreringen er l√•st"]}),e.jsxs(c,{size:"small",children:["Statistikken ble telt"," ",S,"."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(m,{size:"xsmall",level:"3",className:"mb-4 flex items-center gap-2",children:[e.jsx(Me,{"aria-hidden":!0,className:"shrink-0"}),"L√•ses om ",E," dager"]}),e.jsxs(c,{size:"small",children:["Statistikken telles"," ",S,". Du kan rette feil frem til det."]})]})}),e.jsx(me,{})]}):e.jsxs(V.New,{background:"neutral-soft",borderRadius:"large",padding:"3",children:[e.jsx(m,{size:"xsmall",level:"3",className:"mb-4",children:"Hva som skjedde bak kulissene"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Alle som ikke fikk jobben fikk beskjed om avslaget p√• nav.no/min-side."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Aktivitetskortet ble flyttet til ‚ÄúFullf√∏rt‚Äù-kolonnen i aktivitetsplanen."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"De som fikk jobben fikk ikke beskjed automatisk, siden de mest sannsynlig f√•r h√∏re nyheten direkte fra arbeidsgiveren."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{"aria-hidden":!0,className:"shrink-0"}),e.jsx(c,{size:"small",children:"Annonsen vises ikke lenger som aktiv."})]})]})]})]})]});return a?e.jsx("div",{className:"p-2",children:e.jsx(se,{type:"single",collapsible:!0,children:e.jsxs(te,{value:"item-1",children:[k,e.jsx(re,{children:e.jsxs(c,{size:"small",children:[i," av ",t," stillinger ble besatt"]})}),e.jsx(ie,{children:w})]})})}):e.jsxs("div",{className:a?"p-4":"mr-2",children:[k," ",w]})}Be.__docgenInfo={description:"",methods:[],displayName:"Fullf√∏rtStilling",props:{totalStillinger:{required:!0,tsType:{name:"number"},description:""},antallF√•ttJobben:{required:!0,tsType:{name:"number"},description:""},dropDown:{required:!1,tsType:{name:"boolean"},description:""}}};export{Pe as A,Be as F};
