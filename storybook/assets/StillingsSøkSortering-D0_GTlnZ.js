import{j as n,cY as M,l as q,cZ as C,r as k,u as E,c_ as P,b4 as L,p as B,o as U,c$ as K,d0 as O,d1 as V,cp as h,cD as b,d2 as J}from"./iframe-BpAMzbpD.js";import{u as j,h as Y,v as w,S as $}from"./StillingsSøkNavigasjon-YPwZ_sQ5.js";import{P as Z}from"./Pagination-CkVa1-Hl.js";import{a as F,s as _}from"./util-CXMN-qRW.js";import{V as H}from"./ValgteFiltre-DM1tP1C2.js";import{S as Q}from"./SidepanelTrigger-DoHSjien.js";import{B as D}from"./Box-AcxEZv3v.js";import{S as G}from"./MagnifyingGlass-CZs8SVOv.js";import{S as W}from"./Filter-DHwg8v2l.js";import{C as T,a as R}from"./Checkbox-BMmFHU5G.js";import{S as X}from"./Search-D4a2Ebeh.js";import{R as ee,a as I}from"./Radio-B1Rk872Q.js";const te=({totaltAntallTreff:t})=>{const o=j(),i=ne(t,M);return i<=1?null:n.jsx(Z,{size:"small",className:"my-4 flex justify-center",page:o.side,count:i,onPageChange:s=>o.setSide(s)})},ne=(t,o)=>{const i=Math.ceil(t/o),d=1e4/40-1;return Math.min(i,d)};te.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};function se(){const t=j(),o=q();function i(e){if(e.length===2){const l=o.data?.filter(a=>a.type===C.FYLKE).find(a=>a.lokasjon.fylkesnummer===e);return l?l.navn:""}else{const l=o.data?.filter(a=>a.type===C.KOMMUNE).find(a=>a.lokasjon.kommunenummer===e);return l?l.navn:""}}const s=[];t.fritekst&&t.fritekst.length>0&&s.push({type:[...t.fritekst],setVerdi:e=>t.setFritekstListe(e)}),t.statuser.length>0&&s.push({type:[...t.statuser],setVerdi:e=>t.setStatuser(e),mapVerdiNavn:e=>F(e)});const d=[],f=[];return t.inkludering.forEach(e=>{const l=Y.find(u=>u.hovedtag===e),a=t.inkluderingUnderkategori.filter(u=>l?.subtags.includes(u));a.length>0?f.push(...a):d.push(e)}),f.length>0&&s.push({type:[...f],setVerdi:e=>t.setInkluderingUnderkategori(e),mapVerdiNavn:e=>w[e]||e}),d.length>0&&s.push({type:[...d],setVerdi:e=>t.setInkludering(e),mapVerdiNavn:e=>w[e]||e}),t.publisert.length>0&&s.push({type:[...t.publisert],setVerdi:e=>t.setPublisert(e),mapVerdiNavn:e=>F(e)}),t.kategori.length>0&&s.push({type:[...t.kategori],setVerdi:e=>t.setKategori(e),mapVerdiNavn:e=>F(e)}),t.fylker.length>0&&s.push({type:[...t.fylker],setVerdi:e=>t.setFylker(e),mapVerdiNavn:e=>F(i(e))}),t.kommuner.length>0&&s.push({type:[...t.kommuner],setVerdi:e=>t.setKommuner(e),mapVerdiNavn:e=>F(i(e))}),n.jsx("div",{className:"mt-2",children:n.jsx(H,{filtre:s,tømFiltreProps:{fjernFritekst:()=>t.setFritekstListe([])}})})}se.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips"};const re=({formidlinger:t})=>{const[o,i]=k.useState(!1),{harRolle:s}=E(),d=P(),f=k.useRef(null),e=L();s([B.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]);const l=()=>{i(!1),e.push("/stilling?brukStandardsok=true")};return k.useEffect(()=>{const a=u=>{f.current&&!f.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),n.jsxs("div",{className:"@container flex flex-row items-center justify-between contain-layout",children:[n.jsx($,{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"relative",ref:f,children:o&&d.data&&n.jsx(D.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(U,{variant:"tertiary",size:"small",icon:n.jsx(G,{}),onClick:l,className:"w-full justify-start",children:"Standardssøk"})})})}),n.jsx(Q,{icon:n.jsx(W,{}),children:"Filtrer"})]})]})};re.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};const ie=({geografi:t,hideLegend:o})=>{const i=j(),{fylker:s,setFylker:d,kommuner:f,setKommuner:e}=i,{brukerData:{ident:l},valgtNavKontor:a}=E(),u=K({filter:i,eierNavKontorEnhetId:a?.navKontor,navIdent:l,formidlinger:i.formidlinger}),p=u.data?.antall?.geografi?.fylker||[],S=u.data?.antall?.geografi?.kommuner||[],N=O(S),y=u.isLoading||u.isValidating,x=r=>y?"-":r?p.find(m=>String(m.key)===String(r))?.count??0:0,g=r=>y?"-":r?N.find(m=>V(m.key)===V(r))?.count??0:0,c=r=>x(r),v=t?.filter(r=>r.type===C.FYLKE)?.map(r=>({...r,kommuner:t?.filter(m=>m.type===C.KOMMUNE)?.filter(m=>r.lokasjon.fylkesnummer===m.lokasjon.fylkesnummer).sort((m,z)=>m.navn.localeCompare(z.navn))})).sort((r,m)=>r.navn.localeCompare(m.navn));return n.jsx(T,{size:"small",hideLegend:o,legend:"Område",value:s||[],onChange:d,children:v?.map(r=>n.jsxs(k.Fragment,{children:[n.jsxs(R,{value:r.lokasjon.fylkesnummer,children:[_(r.navn)," (",c(r.lokasjon.fylkesnummer),")"]}),r.lokasjon.fylkesnummer&&s.includes(r.lokasjon.fylkesnummer)&&r.kommuner&&r.kommuner.length>1&&n.jsx(T,{className:"ml-4",onChange:e,hideLegend:!0,legend:`Velg kommuner i ${_(r.navn)}`,value:f||[],children:r.kommuner.map(m=>n.jsxs(R,{value:m.lokasjon.kommunenummer,children:[_(m.navn)," (",g(m.lokasjon.kommunenummer),")"]},m.lokasjon.kommunenummer))})]},r.lokasjon.fylkesnummer))})};ie.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const A=t=>{switch(t){case h.Stilling:return"Stilling";case h.Jobbmesse:return"Jobbmesse";default:return""}};function ae({hideLegend:t}){const o=j(),{kategori:i,setKategori:s}=o,{brukerData:d,valgtNavKontor:f}=E(),e=K({filter:o,eierNavKontorEnhetId:f?.navKontor,navIdent:d?.ident,formidlinger:o.formidlinger}),l=e.data?.antall?.kategoriBuckets,a=e.isLoading||e.isValidating,u=p=>{if(a)return"-";if(l){if(p===h.Stilling)return l.stilling||0;if(p===h.Jobbmesse)return l.jobbmesse||0}return 0};return n.jsxs(T,{hideLegend:t,size:"small",legend:"Kategori",value:i,onChange:s,children:[n.jsxs(R,{value:h.Stilling,children:[A(h.Stilling)," (",u(h.Stilling),")"]}),n.jsxs(R,{value:h.Jobbmesse,children:[A(h.Jobbmesse)," (",u(h.Jobbmesse),")"]})]})}ae.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function oe({hideLegend:t}){const{harRolle:o}=E(),i=j(),{statuser:s,setStatuser:d,portefølje:f}=i,{brukerData:{ident:e},valgtNavKontor:l}=E(),a=K({filter:i,eierNavKontorEnhetId:l?.navKontor,navIdent:e,formidlinger:i.formidlinger}),u=k.useRef(0),p=a.data?.antall?.visningsStatusBuckets||[],S=a.isLoading||a.isValidating,N=c=>S?"-":p.find(v=>v.key===c)?.count??0,y=c=>{const v=s||[];v.includes(c)?d(v.filter(r=>r!==c)):d([...v,c])},x=o([B.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),g=[b.ApenForSokere,b.StengtForSokere,b.UtloptStengtForSokere,b.Fullfort,b.IkkePublisert];return k.useEffect(()=>{u.current<1&&!i.formidlinger&&!S&&(s?.length??0)===0&&(d([b.ApenForSokere]),u.current=u.current+1)},[S,s,d,i.formidlinger]),x?n.jsx(T,{legend:t?void 0:"Status",size:"small",children:n.jsx("div",{className:"flex flex-col gap-2",children:g.map(c=>{if(c===b.IkkePublisert&&f!==J.VIS_MINE)return null;const v=!!s?.includes(c),r=c===b.UtloptStengtForSokere?"Utløpt":c;return n.jsxs(R,{checked:v,onChange:()=>y(c),value:c,disabled:S,size:"small",children:[r," (",N(c),")"]},c)})})}):null}oe.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function le({alltidÅpen:t}){const{fritekst:o,setFritekstListe:i}=j(),[s,d]=k.useState(""),[f,e]=k.useState(!1),[l,a]=k.useState(!1),u=P(),p=k.useRef(null),S=k.useRef(null),N=L(),y=()=>{e(!1),a(!1),N.push("/stilling?brukStandardsok=true")},x=()=>{if(s.trim()){const g=[...o,s];i(g),d("")}e(!1),a(!1)};return k.useEffect(()=>{!t&&l&&S.current&&S.current.focus()},[t,l]),k.useEffect(()=>{const g=c=>{p.current&&!p.current.contains(c.target)&&e(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]),n.jsxs("div",{className:"relative",ref:p,children:[n.jsx(X,{ref:S,onKeyDownCapture:g=>{g.key==="Enter"?(g.preventDefault(),x()):g.key==="Escape"&&(a(!1),d(""),e(!1))},onFocus:()=>e(!0),onBlur:()=>{setTimeout(()=>{s.trim()||a(!1),e(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:s,onChange:g=>d(g),onSearchClick:x}),f&&u.data&&l&&n.jsx(D.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(U,{variant:"tertiary",size:"small",icon:n.jsx(G,{}),onClick:y,className:"w-full justify-start",children:"Standardssøk"})})})]})}le.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};function de({hideLegend:t}){const o=j(),i=s=>{o.setSortering(s)};return n.jsxs(ee,{size:"small",hideLegend:t,legend:"Sorter",value:o.sortering,onChange:i,className:"pb-2",children:[n.jsx(I,{value:"publiseringsdato",children:"Publiseringsdato"}),n.jsx(I,{value:"utløpsdato",children:"Utløpsdato"}),n.jsx(I,{value:"mestRelevant",children:"Mest relevant"})]})}de.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};export{ie as F,ae as K,re as S,oe as a,le as b,se as c,de as d,te as e};
