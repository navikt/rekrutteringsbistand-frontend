import{j as n,cY as W,aC as L,cZ as _,u as E,c_ as K,c$ as Z,r as p,d0 as V,S as Q,cp as S,R as P,cD as j,d1 as X,d2 as G,b4 as B,d as U}from"./iframe-D2dvj_6K.js";import{u as b,h as ee,v as w,S as te,I as ne}from"./StillingsSøkNavigasjon-B16c8aKg.js";import{P as se}from"./Pagination-D9aRI9ZU.js";import{d as F,c as C}from"./util-Beh5P7GG.js";import{V as re}from"./ValgteFiltre-uXVlC0li.js";import{a as I,C as R}from"./Checkbox-Cd_p8BDn.js";import{R as ae,a as T}from"./Radio-D-REaJBX.js";import{S as ie}from"./Search-BJgwYXW2.js";import{B as D}from"./Box-QyXigN0J.js";import{S as z}from"./MagnifyingGlass-d035BfhV.js";import{M as oe}from"./MittStandardsøk-CLMRQJ-e.js";import{A as le}from"./AlleFilterKomponent-Cp1UCX4Z.js";const de=({totaltAntallTreff:t})=>{const o=b(),a=ce(t,W);return a<=1?null:n.jsx(se,{size:"small",className:"my-4 flex justify-center",page:o.side,count:a,onPageChange:s=>o.setSide(s)})},ce=(t,o)=>{const a=Math.ceil(t/o),d=1e4/40-1;return Math.min(a,d)};de.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};function ue(){const t=b(),o=L();function a(e){if(e.length===2){const l=o.data?.filter(i=>i.type===_.FYLKE).find(i=>i.lokasjon.fylkesnummer===e);return l?l.navn:""}else{const l=o.data?.filter(i=>i.type===_.KOMMUNE).find(i=>i.lokasjon.kommunenummer===e);return l?l.navn:""}}const s=[];t.fritekst&&t.fritekst.length>0&&s.push({type:[...t.fritekst],setVerdi:e=>t.setFritekstListe(e)}),t.statuser.length>0&&s.push({type:[...t.statuser],setVerdi:e=>t.setStatuser(e),mapVerdiNavn:e=>F(e)});const d=[],f=[];return t.inkludering.forEach(e=>{const l=ee.find(c=>c.hovedtag===e),i=t.inkluderingUnderkategori.filter(c=>l?.subtags.includes(c));i.length>0?f.push(...i):d.push(e)}),f.length>0&&s.push({type:[...f],setVerdi:e=>t.setInkluderingUnderkategori(e),mapVerdiNavn:e=>w[e]||e}),d.length>0&&s.push({type:[...d],setVerdi:e=>t.setInkludering(e),mapVerdiNavn:e=>w[e]||e}),t.publisert.length>0&&s.push({type:[...t.publisert],setVerdi:e=>t.setPublisert(e),mapVerdiNavn:e=>F(e)}),t.kategori.length>0&&s.push({type:[...t.kategori],setVerdi:e=>t.setKategori(e),mapVerdiNavn:e=>F(e)}),t.fylker.length>0&&s.push({type:[...t.fylker],setVerdi:e=>t.setFylker(e),mapVerdiNavn:e=>F(a(e))}),t.kommuner.length>0&&s.push({type:[...t.kommuner],setVerdi:e=>t.setKommuner(e),mapVerdiNavn:e=>F(a(e))}),n.jsx("div",{className:"mt-2",children:n.jsx(re,{filtre:s,tømFiltreProps:{fjernFritekst:()=>t.setFritekstListe([])}})})}ue.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips"};const M=({geografi:t,hideLegend:o})=>{const a=b(),{fylker:s,setFylker:d,kommuner:f,setKommuner:e}=a,{brukerData:{ident:l},valgtNavKontor:i}=E(),c=K({filter:a,eierNavKontorEnhetId:i?.navKontor,navIdent:l,formidlinger:a.formidlinger}),k=c.data?.antall?.geografi?.fylker||[],h=c.data?.antall?.geografi?.kommuner||[],N=Z(h),x=c.isLoading||c.isValidating,y=r=>x?"-":r?k.find(m=>String(m.key)===String(r))?.count??0:0,g=r=>x?"-":r?N.find(m=>V(m.key)===V(r))?.count??0:0,u=r=>y(r),v=t?.filter(r=>r.type===_.FYLKE)?.map(r=>({...r,kommuner:t?.filter(m=>m.type===_.KOMMUNE)?.filter(m=>r.lokasjon.fylkesnummer===m.lokasjon.fylkesnummer).sort((m,H)=>m.navn.localeCompare(H.navn))})).sort((r,m)=>r.navn.localeCompare(m.navn));return n.jsx(I,{size:"small",hideLegend:o,legend:"Område",value:s||[],onChange:d,children:v?.map(r=>n.jsxs(p.Fragment,{children:[n.jsxs(R,{value:r.lokasjon.fylkesnummer,children:[C(r.navn)," (",u(r.lokasjon.fylkesnummer),")"]}),r.lokasjon.fylkesnummer&&s.includes(r.lokasjon.fylkesnummer)&&r.kommuner&&r.kommuner.length>1&&n.jsx(I,{className:"ml-4",onChange:e,hideLegend:!0,legend:`Velg kommuner i ${C(r.navn)}`,value:f||[],children:r.kommuner.map(m=>n.jsxs(R,{value:m.lokasjon.kommunenummer,children:[C(m.navn)," (",g(m.lokasjon.kommunenummer),")"]},m.lokasjon.kommunenummer))})]},r.lokasjon.fylkesnummer))})};M.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function q({hideLegend:t}){const o=L();return n.jsx(Q,{hooks:[o],children:a=>n.jsx(M,{geografi:a,hideLegend:t})})}q.__docgenInfo={description:"",methods:[],displayName:"GeografiFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const A=t=>{switch(t){case S.Stilling:return"Stilling";case S.Jobbmesse:return"Jobbmesse";default:return""}};function O({hideLegend:t}){const o=b(),{kategori:a,setKategori:s}=o,{brukerData:d,valgtNavKontor:f}=E(),e=K({filter:o,eierNavKontorEnhetId:f?.navKontor,navIdent:d?.ident,formidlinger:o.formidlinger}),l=e.data?.antall?.kategoriBuckets,i=e.isLoading||e.isValidating,c=k=>{if(i)return"-";if(l){if(k===S.Stilling)return l.stilling||0;if(k===S.Jobbmesse)return l.jobbmesse||0}return 0};return n.jsxs(I,{hideLegend:t,size:"small",legend:"Kategori",value:a,onChange:s,children:[n.jsxs(R,{value:S.Stilling,children:[A(S.Stilling)," (",c(S.Stilling),")"]}),n.jsxs(R,{value:S.Jobbmesse,children:[A(S.Jobbmesse)," (",c(S.Jobbmesse),")"]})]})}O.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function J({hideLegend:t}){const{harRolle:o}=E(),a=b(),{statuser:s,setStatuser:d,portefølje:f}=a,{brukerData:{ident:e},valgtNavKontor:l}=E(),i=K({filter:a,eierNavKontorEnhetId:l?.navKontor,navIdent:e,formidlinger:a.formidlinger}),c=p.useRef(0),k=i.data?.antall?.visningsStatusBuckets||[],h=i.isLoading||i.isValidating,N=u=>h?"-":k.find(v=>v.key===u)?.count??0,x=u=>{const v=s||[];v.includes(u)?d(v.filter(r=>r!==u)):d([...v,u])},y=o([P.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),g=[j.ApenForSokere,j.StengtForSokere,j.UtloptStengtForSokere,j.Fullfort,j.IkkePublisert];return p.useEffect(()=>{c.current<1&&!a.formidlinger&&!h&&(s?.length??0)===0&&(d([j.ApenForSokere]),c.current=c.current+1)},[h,s,d,a.formidlinger]),y?n.jsx(I,{legend:t?void 0:"Status",size:"small",children:n.jsx("div",{className:"flex flex-col gap-2",children:g.map(u=>{if(u===j.IkkePublisert&&f!==X.VIS_MINE)return null;const v=!!s?.includes(u),r=u===j.UtloptStengtForSokere?"Utløpt":u;return n.jsxs(R,{checked:v,onChange:()=>x(u),value:u,disabled:h,size:"small",children:[r," (",N(u),")"]},u)})})}):null}J.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function Y({hideLegend:t}){const o=b(),a=s=>{o.setSortering(s)};return n.jsxs(ae,{size:"small",hideLegend:t,legend:"Sorter",value:o.sortering,onChange:a,className:"pb-2",children:[n.jsx(T,{value:"publiseringsdato",children:"Publiseringsdato"}),n.jsx(T,{value:"utløpsdato",children:"Utløpsdato"}),n.jsx(T,{value:"mestRelevant",children:"Mest relevant"})]})}Y.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function $({alltidÅpen:t}){const{fritekst:o,setFritekstListe:a}=b(),[s,d]=p.useState(""),[f,e]=p.useState(!1),[l,i]=p.useState(!1),c=G(),k=p.useRef(null),h=p.useRef(null),N=B(),x=()=>{e(!1),i(!1),N.push("/stilling?brukStandardsok=true")},y=()=>{if(s.trim()){const g=[...o,s];a(g),d("")}e(!1),i(!1)};return p.useEffect(()=>{!t&&l&&h.current&&h.current.focus()},[t,l]),p.useEffect(()=>{const g=u=>{k.current&&!k.current.contains(u.target)&&e(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]),n.jsxs("div",{className:"relative",ref:k,children:[n.jsx(ie,{ref:h,onKeyDownCapture:g=>{g.key==="Enter"?(g.preventDefault(),y()):g.key==="Escape"&&(i(!1),d(""),e(!1))},onFocus:()=>e(!0),onBlur:()=>{setTimeout(()=>{s.trim()||i(!1),e(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:s,onChange:g=>d(g),onSearchClick:y}),f&&c.data&&l&&n.jsx(D.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(U,{variant:"tertiary",size:"small",icon:n.jsx(z,{}),onClick:x,className:"w-full justify-start",children:"Standardssøk"})})})]})}$.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};const me=({formidlinger:t})=>{const[o,a]=p.useState(!1),{harRolle:s}=E(),d=G(),f=p.useRef(null),e=B(),l=s([P.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),i=()=>{a(!1),e.push("/stilling?brukStandardsok=true")};return p.useEffect(()=>{const c=k=>{f.current&&!f.current.contains(k.target)&&a(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),n.jsxs("div",{className:"@container flex flex-row items-center justify-between contain-layout",children:[n.jsx(te,{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"relative",ref:f,children:o&&d.data&&n.jsx(D.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(U,{variant:"tertiary",size:"small",icon:n.jsx(z,{}),onClick:i,className:"w-full justify-start",children:"Standardssøk"})})})}),n.jsx("div",{className:"block @[720px]:hidden",children:n.jsx("div",{className:"whitespace-nowrap",children:n.jsxs(le,{children:[n.jsx($,{alltidÅpen:!0}),n.jsx(oe,{}),n.jsx(Y,{}),l&&!t&&n.jsx(J,{}),n.jsx(q,{}),!t&&n.jsx(O,{}),n.jsx(ne,{})]})})})]})]})};me.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};export{M as F,q as G,O as K,me as S,J as a,$ as b,ue as c,Y as d,de as e};
