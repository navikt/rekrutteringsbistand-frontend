import{b3 as I,bK as K,r as i,j as e,B as T,C as E}from"./iframe-Dyt_T7m6.js";import{K as R}from"./KiAnalyseIntro-B-HUGqF3.js";import{K as w}from"./KiAnalysePanel-CivDRx36.js";import{u as A}from"./useFormFeltMedKiValidering-CJSmTBXT.js";import{R as N}from"./RikTekstEditor-CbIT4MbC.js";import{S as V}from"./Skeleton-DmfYPgIQ.js";const B="rediger-innlegg-htmlcontent-form",a=({onUpdated:l})=>{const{rekrutteringstreffId:d}=I(),{data:m,isLoading:o}=K(d),n=m?.[0],g=n?n.htmlContent??null:void 0,[u,c]=i.useState(0),{analyse:f,analyseError:h,validating:p,kiErrorBorder:y,harGodkjentKiFeil:j,showAnalysis:v,erRedigeringAvPublisertTreff:x,validerMedKiOgLagreVedGodkjenning:k,onGodkjennKiFeil:C,control:b,setValue:s}=A({feltType:"innlegg",fieldName:"htmlContent",savedValue:g,onUpdated:l});return i.useEffect(()=>{const t=n?.htmlContent??"";s("htmlContent",t,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1});const r=window.setTimeout(()=>{c(F=>F+1)},0);return()=>window.clearTimeout(r)},[s,n?.htmlContent]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"space-y-3",children:[e.jsx(R,{title:"Introduksjon"}),o&&e.jsx(V,{variant:"text"}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:e.jsx(T,{size:"small",textColor:"subtle",children:"Fortell jobbsøkeren om treffet: de unike fordelene, mulighetene, og oppgavene som de vil møte. For eksempel arbeidsgivere, forventninger, læring- og karrieremuligheter."})}),e.jsx("div",{className:`rounded-lg border ${y?"border-red-500":"border-gray-300"}`,onBlur:t=>{const r=t.currentTarget;setTimeout(async()=>{r.contains(document.activeElement)||await k()},0)},children:e.jsx(E,{name:"htmlContent",control:b,render:({field:t})=>e.jsx(N,{id:B,tekst:t.value??"",onChange:t.onChange},u)})}),e.jsx(w,{validating:p,analyse:f,analyseError:h,harGodkjentKiFeil:j,showAnalysis:v,erRedigeringAvPublisertTreff:x,onGodkjennKiFeil:C,ariaLabel:"Analyse av innlegg"})]})]})})};a.displayName="InnleggForm";a.__docgenInfo={description:"",methods:[],displayName:"InnleggForm",props:{onUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{a as I};
