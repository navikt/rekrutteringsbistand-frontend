import{j as n,dd as q,p as D,de as E,r as k,df as P,bt as A,d as B,u as K,dg as T,dh as M,di as R,cH as S,q as O,cT as b,dj as J}from"./iframe-DwwpuTFP.js";import{u as j,h as Y,v as w,S as H}from"./StillingsSøkNavigasjon-CDMfyeMj.js";import{P as $}from"./Pagination--pzq5LNy.js";import{a as F,s as _}from"./util-D_fvgQrs.js";import{V as Q}from"./ValgteFiltre-DyOvtVQK.js";import{S as W}from"./SidepanelTrigger-CTSKshMa.js";import{B as z}from"./Box-Dy8C-oQK.js";import{S as U}from"./MagnifyingGlass-DMIY4pTz.js";import{S as X}from"./Filter-BjW2Hs3u.js";import{C as V,a as C}from"./Checkbox-BrDSP9kz.js";import{S as Z}from"./Search-C1GYq4NV.js";import{R as ee,a as I}from"./Radio-CMxU9v1A.js";const te=({totaltAntallTreff:t})=>{const o=j(),i=ne(t,q);return i<=1?null:n.jsx($,{size:"small",className:"my-4 flex justify-center",page:o.side,count:i,onPageChange:s=>o.setSide(s)})},ne=(t,o)=>{const i=Math.ceil(t/o),l=1e4/40-1;return Math.min(i,l)};te.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkPaginering",props:{totaltAntallTreff:{required:!0,tsType:{name:"number"},description:""}}};function se(){const t=j(),o=D();function i(e){if(e.length===2){const d=o.data?.filter(a=>a.type===E.FYLKE).find(a=>a.lokasjon.fylkesnummer===e);return d?d.navn:""}else{const d=o.data?.filter(a=>a.type===E.KOMMUNE).find(a=>a.lokasjon.kommunenummer===e);return d?d.navn:""}}const s=[];t.fritekst&&t.fritekst.length>0&&s.push({type:[...t.fritekst],setVerdi:e=>t.setFritekstListe(e)}),t.statuser.length>0&&s.push({type:[...t.statuser],setVerdi:e=>t.setStatuser(e),mapVerdiNavn:e=>F(e)});const l=[],g=[];return t.inkludering.forEach(e=>{const d=Y.find(c=>c.hovedtag===e),a=t.inkluderingUnderkategori.filter(c=>d?.subtags.includes(c));a.length>0?g.push(...a):l.push(e)}),g.length>0&&s.push({type:[...g],setVerdi:e=>t.setInkluderingUnderkategori(e),mapVerdiNavn:e=>w[e]||e}),l.length>0&&s.push({type:[...l],setVerdi:e=>t.setInkludering(e),mapVerdiNavn:e=>w[e]||e}),t.publisert.length>0&&s.push({type:[...t.publisert],setVerdi:e=>t.setPublisert(e),mapVerdiNavn:e=>F(e)}),t.kategori.length>0&&s.push({type:[...t.kategori],setVerdi:e=>t.setKategori(e),mapVerdiNavn:e=>F(e)}),t.fylker.length>0&&s.push({type:[...t.fylker],setVerdi:e=>t.setFylker(e),mapVerdiNavn:e=>F(i(e))}),t.kommuner.length>0&&s.push({type:[...t.kommuner],setVerdi:e=>t.setKommuner(e),mapVerdiNavn:e=>F(i(e))}),n.jsx("div",{className:"mt-2",children:n.jsx(Q,{filtre:s,tømFiltreProps:{fjernFritekst:()=>t.setFritekstListe([])}})})}se.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkChips"};const re=({formidlinger:t})=>{const[o,i]=k.useState(!1),s=P(),l=k.useRef(null),g=A(),e=()=>{i(!1),g.push("/stilling?brukStandardsok=true")};return k.useEffect(()=>{const d=a=>{l.current&&!l.current.contains(a.target)&&i(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]),n.jsxs("div",{className:"@container flex flex-row items-center justify-between contain-layout",children:[n.jsx(H,{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"relative",ref:l,children:!t&&o&&s.data&&n.jsx(z.New,{background:"default",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(B,{variant:"tertiary",size:"small",icon:n.jsx(U,{}),onClick:e,className:"w-full justify-start",children:"Standardssøk"})})})}),n.jsx(W,{icon:n.jsx(X,{}),children:"Filtrer"})]})]})};re.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkFilter",props:{formidlinger:{required:!1,tsType:{name:"boolean"},description:""},stillingForKandidat:{required:!1,tsType:{name:"string"},description:""}}};const ie=({geografi:t,hideLegend:o})=>{const i=j(),{fylker:s,setFylker:l,kommuner:g,setKommuner:e}=i,{brukerData:{ident:d},valgtNavKontor:a}=K(),c=T({filter:i,eierNavKontorEnhetId:a?.navKontor,navIdent:d,formidlinger:i.formidlinger}),p=c.data?.antall?.geografi?.fylker||[],h=c.data?.antall?.geografi?.kommuner||[],N=M(h),y=c.isLoading||c.isValidating,x=r=>y?"-":r?p.find(m=>String(m.key)===String(r))?.count??0:0,f=r=>y?"-":r?N.find(m=>R(m.key)===R(r))?.count??0:0,u=r=>x(r),v=t?.filter(r=>r.type===E.FYLKE)?.map(r=>({...r,kommuner:t?.filter(m=>m.type===E.KOMMUNE)?.filter(m=>r.lokasjon.fylkesnummer===m.lokasjon.fylkesnummer).sort((m,G)=>m.navn.localeCompare(G.navn))})).sort((r,m)=>r.navn.localeCompare(m.navn));return n.jsx(V,{size:"small",hideLegend:o,legend:"Område",value:s||[],onChange:l,children:v?.map(r=>n.jsxs(k.Fragment,{children:[n.jsxs(C,{value:r.lokasjon.fylkesnummer,children:[_(r.navn)," (",u(r.lokasjon.fylkesnummer),")"]}),r.lokasjon.fylkesnummer&&s.includes(r.lokasjon.fylkesnummer)&&r.kommuner&&r.kommuner.length>1&&n.jsx(V,{className:"ml-4",onChange:e,hideLegend:!0,legend:`Velg kommuner i ${_(r.navn)}`,value:g||[],children:r.kommuner.map(m=>n.jsxs(C,{value:m.lokasjon.kommunenummer,children:[_(m.navn)," (",f(m.lokasjon.kommunenummer),")"]},m.lokasjon.kommunenummer))})]},r.lokasjon.fylkesnummer))})};ie.__docgenInfo={description:"",methods:[],displayName:"FylkerOgKommunerFilter",props:{geografi:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"PamGeografiSchema"}],raw:"z.infer<typeof PamGeografiSchema>"}],raw:"PamGeografi[]"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};const L=t=>{switch(t){case S.Stilling:return"Stilling";case S.Jobbmesse:return"Jobbmesse";default:return""}};function ae({hideLegend:t}){const o=j(),{kategori:i,setKategori:s}=o,{brukerData:l,valgtNavKontor:g}=K(),e=T({filter:o,eierNavKontorEnhetId:g?.navKontor,navIdent:l?.ident,formidlinger:o.formidlinger}),d=e.data?.antall?.kategoriBuckets,a=e.isLoading||e.isValidating,c=p=>{if(a)return"-";if(d){if(p===S.Stilling)return d.stilling||0;if(p===S.Jobbmesse)return d.jobbmesse||0}return 0};return n.jsxs(V,{hideLegend:t,size:"small",legend:"Kategori",value:i,onChange:s,children:[n.jsxs(C,{value:S.Stilling,children:[L(S.Stilling)," (",c(S.Stilling),")"]}),n.jsxs(C,{value:S.Jobbmesse,children:[L(S.Jobbmesse)," (",c(S.Jobbmesse),")"]})]})}ae.__docgenInfo={description:"",methods:[],displayName:"KategoriFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function oe({hideLegend:t}){const{harRolle:o}=K(),i=j(),{statuser:s,setStatuser:l,portefølje:g}=i,{brukerData:{ident:e},valgtNavKontor:d}=K(),a=T({filter:i,eierNavKontorEnhetId:d?.navKontor,navIdent:e,formidlinger:i.formidlinger}),c=k.useRef(0),p=a.data?.antall?.visningsStatusBuckets||[],h=a.isLoading||a.isValidating,N=u=>h?"-":p.find(v=>v.key===u)?.count??0,y=u=>{const v=s||[];v.includes(u)?l(v.filter(r=>r!==u)):l([...v,u])},x=o([O.AD_GRUPPE_REKRUTTERINGSBISTAND_ARBEIDSGIVERRETTET]),f=[b.ApenForSokere,b.StengtForSokere,b.UtloptStengtForSokere,b.Fullfort,b.IkkePublisert];return k.useEffect(()=>{c.current<1&&!i.formidlinger&&!h&&(s?.length??0)===0&&(l([b.ApenForSokere]),c.current=c.current+1)},[h,s,l,i.formidlinger]),x?n.jsx(V,{legend:t?void 0:"Status",size:"small",children:n.jsx("div",{className:"flex flex-col gap-2",children:f.map(u=>{if(u===b.IkkePublisert&&g!==J.VIS_MINE)return null;const v=!!s?.includes(u),r=u===b.UtloptStengtForSokere?"Utløpt":u;return n.jsxs(C,{checked:v,onChange:()=>y(u),value:u,disabled:h,size:"small",children:[r," (",N(u),")"]},u)})})}):null}oe.__docgenInfo={description:"",methods:[],displayName:"StatusFilter",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};function le({alltidÅpen:t}){const{fritekst:o,setFritekstListe:i}=j(),[s,l]=k.useState(""),[g,e]=k.useState(!1),[d,a]=k.useState(!1),c=P(),p=k.useRef(null),h=k.useRef(null),N=A(),y=()=>{e(!1),a(!1),N.push("/stilling?brukStandardsok=true")},x=()=>{if(s.trim()){const f=[...o,s];i(f),l("")}e(!1),a(!1)};return k.useEffect(()=>{!t&&d&&h.current&&h.current.focus()},[t,d]),k.useEffect(()=>{const f=u=>{p.current&&!p.current.contains(u.target)&&e(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),n.jsxs("div",{className:"relative",ref:p,children:[n.jsx(Z,{ref:h,onKeyDownCapture:f=>{f.key==="Enter"?(f.preventDefault(),x()):f.key==="Escape"&&(a(!1),l(""),e(!1))},onFocus:()=>e(!0),onBlur:()=>{setTimeout(()=>{s.trim()||a(!1),e(!1)},150)},size:"small",hideLabel:!0,label:"Søk i stillinger",placeholder:"Søk i stillinger",variant:"secondary",value:s,onChange:f=>l(f),onSearchClick:x}),g&&c.data&&d&&n.jsx(z.New,{background:"neutral-moderate",className:"absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-50",children:n.jsx("div",{className:"p-2",children:n.jsx(B,{variant:"tertiary",size:"small",icon:n.jsx(U,{}),onClick:y,className:"w-full justify-start",children:"Standardssøk"})})})]})}le.__docgenInfo={description:"",methods:[],displayName:"StillingSøkebar",props:{alltidÅpen:{required:!0,tsType:{name:"boolean"},description:""}}};function de({hideLegend:t}){const o=j(),i=s=>{o.setSortering(s)};return n.jsxs(ee,{size:"small",hideLegend:t,legend:"Sorter",value:o.sortering,onChange:i,className:"pb-2",children:[n.jsx(I,{value:"publiseringsdato",children:"Publiseringsdato"}),n.jsx(I,{value:"utløpsdato",children:"Utløpsdato"}),n.jsx(I,{value:"mestRelevant",children:"Mest relevant"})]})}de.__docgenInfo={description:"",methods:[],displayName:"StillingsSøkSortering",props:{hideLegend:{required:!1,tsType:{name:"boolean"},description:""}}};export{ie as F,ae as K,re as S,oe as a,le as b,se as c,de as d,te as e};
