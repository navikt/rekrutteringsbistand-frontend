import{r as c,j as e,b as j,B as T}from"./iframe-DUxtTNxK.js";import{A,L,u as y,S,s as k}from"./LeggTilArbeidsgiverForm-Ddq7-Bk0.js";import{u as M}from"./useArbeidsgiver-rYMwLi27.js";import{M as p}from"./Modal-DyHa_SWt.js";import{u as R}from"./useArbeidsgivere-DgohNhaX.js";import{u as w}from"./RekrutteringstreffContext-CgxDvbBy.js";import{S as H}from"./SWRLaster-ahx2Fy0D.js";import{S as I}from"./Plus-BN_bqasQ.js";import{T as N}from"./Tooltip-DWDWeldW.js";const v=({arbeidsgiver:s,status:t,actionSlot:l})=>{const i=s.organisasjonsnummer,{data:a}=M(i),o=c.useMemo(()=>a?.find(m=>m.organisasjonsnummer===i),[a,i])?.adresse??null;return e.jsx(A,{navn:s.navn,organisasjonsnummer:i,adresse:o,status:t,actionSlot:l})};v.__docgenInfo={description:"",methods:[],displayName:"ArbeidsgiverListeItem",props:{arbeidsgiver:{required:!0,tsType:{name:"z.infer",elements:[{name:"ArbeidsgiverSchema"}],raw:"z.infer<typeof ArbeidsgiverSchema>"},description:""},status:{required:!1,tsType:{name:"string"},description:""},actionSlot:{required:!1,tsType:{name:"ReactNode"},description:""}}};const b=({modalRef:s})=>{const t=()=>{s.current?.close()};return e.jsx(p,{ref:s,className:"overflow-visible",onClose:t,header:{heading:"Legg til arbeidsgivere"},children:e.jsx(p.Body,{className:"overflow-visible min-w-[500px]",children:e.jsx(L,{variant:"modal",onCompleted:()=>{s.current?.close()}})})})};b.__docgenInfo={description:"",methods:[],displayName:"LeggTilArbeidsgiverModal",props:{modalRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDialogElement | null",elements:[{name:"HTMLDialogElement"},{name:"null"}]}],raw:"RefObject<HTMLDialogElement | null>"},description:""}}};const E=()=>{const{rekrutteringstreffId:s}=w(),t=R(s),l=y(s),i=c.useRef(null),a=r=>r.hendelser.find(({hendelsestype:g})=>g==="OPPRETT")?{status:"Lagt til"}:{status:void 0},[d,o]=c.useState(!1),m=async r=>{if(r)try{o(!0),await k(s,r.arbeidsgiverTreffId??r.organisasjonsnummer),t.mutate(),l.mutate()}finally{o(!1)}};return e.jsx(H,{hooks:[t],children:r=>e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{onClick:()=>i.current?.showModal(),variant:"secondary",icon:e.jsx(I,{}),children:"Legg til arbeidsgiver"}),e.jsx(b,{modalRef:i})]}),r.length===0?e.jsx(T,{children:"Ingen arbeidsgivere lagt til"}):e.jsx("ul",{children:r.map((n,g)=>{const{status:x}=a(n),u=r.length===1,h=e.jsx(S,{navn:n.navn,loading:d,disabled:u||d,onConfirm:()=>m(n),arbeidsgivereHook:t,variant:"trash",renderTrigger:({button:f})=>u?e.jsx(N,{content:"Treffet må alltid ha en arbeidsgiver som deltar. Legg til en ny arbeidsgiver først.",className:"max-w-[200px] text-left",children:e.jsx("span",{children:f})}):f});return e.jsx("li",{children:e.jsx(v,{arbeidsgiver:n,status:x,actionSlot:h})},g)})})]})})};E.__docgenInfo={description:"",methods:[],displayName:"Arbeidsgivere"};export{E as A,b as L};
